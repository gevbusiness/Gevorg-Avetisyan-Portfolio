(self["webpackChunk_zoom_client_email_desktop"]=self["webpackChunk_zoom_client_email_desktop"]||[]).push([[530,983,797,337,887,464,348],{13887:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=function(){var e=this,t=e._self._c;return t("zm-dialog",{ref:"dialog",attrs:{visible:e.isVisible,title:e.title,"aria-labelledby":"title","close-on-click-modal":!0,"append-to-body":!0,"close-on-press-escape":!0},on:{"update:visible":function(t){e.isVisible=t},close:e.onCancel}},[t("zm-form",{ref:"expirationForm",attrs:{inline:"","label-width":"100px","label-position":"top"}},[t("p",[e._v(" "+e._s(e.$t("editor.expirationFormTip"))+" ")]),t("div",{staticClass:"dialog-body",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.submitForm.apply(null,arguments))}}},[t("label",{attrs:{id:"set-expiration"}},[e._v(e._s(e.$t("expiration.setExpiration")))]),t("zm-select",{staticClass:"select-self-dark-mode size zm-select",attrs:{label:e.$t("expiration.setExpiration"),size:"large",popperClass:"select-dark-mode",autofocus:!0,"label-by":"set-expiration"},model:{value:e.expiration,callback:function(t){e.expiration=t},expression:"expiration"}},e._l(e.durationOptions,(function(e){return t("zm-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1)]),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"footer-left"},[e.ruleActive?t("zm-button",{attrs:{plain:""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onRemove.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("operation.remove"))+" ")]):e._e()],1),t("div",[t("zm-button",{attrs:{type:"secondary"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onCancel.apply(null,arguments)}}},[e._v(" "+e._s(e.cancelText||e.$t("operation.cancel"))+" ")]),t("zm-button",{attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.submitForm.apply(null,arguments)}}},[e._v(e._s(e.okText||e.$t("operation.save"))+" ")])],1)])],1)},s=[],a=i(76635),r={name:"ExpirationDialog",props:{title:String,defaultExpiration:{type:Number,default:2592e3},okText:{type:String,default:""},cancelText:{type:String,default:""},show:{type:Boolean,default:!1},ruleActive:{type:Boolean,default:!1}},data:function(){return{expiration:this.defaultExpiration,isVisible:!1,durationOptions:[{label:this.$t("time.oneDay"),value:86400},{label:this.$t("time.oneWeek"),value:604800},{label:this.$t("time.oneMonth"),value:2592e3}]}},computed:{header:function(){return(0,a.upperFirst)(this.title||"")}},watch:{show:function(e){this.isVisible=e}},methods:{reset:function(){this.expiration=this.defaultExpiration},onRemove:function(){this.$emit("onRemove")},onCancel:function(){this.reset(),this.$emit("onCancel")},submitForm:function(){this.$emit("onOk",this.expiration)}}},o=r,l=i(93483),c=(0,l.Z)(o,n,s,!1,null,"65699a58",null),d=c.exports},41797:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return h}});var n=function(){var e=this,t=e._self._c;return t("div",{class:["select-item"],on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleOpen.apply(null,arguments)}}},[t("div",{staticClass:"select-item_left"},[t("img",{attrs:{src:e.getIcon(e.uploadItem[e.type],e.prefersColorScheme),alt:""}})]),t("div",{staticClass:"select-item_right"},[t("zm-tooltip",{attrs:{"popper-class":"attachment-name-tooltip",placement:"bottom",content:e.uploadItem[e.type]}},[t("div",{class:["name","much-hidden"]},[e._v(e._s(e.uploadItem[e.type]))])]),t("div",{staticClass:"content-info"},["Error"===e.uploadItem.downloadStatus?t("span",{staticClass:"download-error-forward"},[t("i",{staticClass:"zm-icon-corner-error"}),t("span",[e._v(e._s(e.$t("common.downloadError")))])]):t("span",[e._v(e._s(e.formatSize(e.uploadItem.size)))])])],1),t("div",{staticClass:"delete"},[e.showDelete?t("svg-icon",{staticClass:"attachment-delete-icon",attrs:{iconClass:"delete"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleClick(e.uploadItem)}}}):e._e()],1)])},s=[],a=i(34948),r=i(20629),o=i(71071),l={props:{select:{type:Boolean,default:!1},uploadItem:{type:Object,required:!0},type:{type:String,default:"fileName"},showDelete:{type:Boolean,default:!0},downloadStatus:String},computed:(0,a.Z)((0,a.Z)({},(0,r.rn)(["prefersColorScheme"])),{},{percentage:function(){return(this.uploadItem.fileSize||0)/this.uploadItem.size}}),methods:{handleOpen:function(){},handleCancel:function(){this.$emit("handleCancel",this.uploadItem)},handleDownLoad:function(){this.$emit("handleDownLoad",this.uploadItem)},handleClick:function(e){this.$emit("deleteItem",e)},getIcon:function(e,t){return(0,o.L)(e,t)},formatSize:function(e){return e<1024?e+"bytes":e>=1024&&e<1048576?(e/1024).toFixed(1)+"KB":e>=1048576?(e/1048576).toFixed(1)+"MB":void 0}}},c=l,d=i(93483),u=(0,d.Z)(c,n,s,!1,null,"90593f50",null),h=u.exports},96464:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"expiration-alert-container"},[t("zm-alert",{directives:[{name:"show",rawName:"v-show",value:e.showExpirationBanner,expression:"showExpirationBanner"}],class:["alert",{"alert-subitems":e.hasComposeSubItems}],attrs:{center:""},on:{close:e.emitClosed}},[t("div",{staticClass:"alert-body"},[t("svg-icon",{staticClass:"alert-icon",attrs:{iconClass:"locked-outlined"}}),t("div",{staticClass:"alert-body-content"},[e._v(" "+e._s(e.$t("editor.expirationBanner",[e.getExpDate(e.expirationSeconds)]))+" "),t("zm-button",{attrs:{type:"link"},on:{click:function(t){return t.preventDefault(),e.emitEdit.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("operation.edit"))+" ")])],1)],1)])],1)},s=[],a=i(34948),r=i(20629),o={name:"ExpirationBanner",props:{showExpirationBanner:{type:Boolean,default:!1},expirationSeconds:{type:Number,default:2592e3},hasComposeSubItems:{type:Boolean,default:!1}},data:function(){return{durationOptions:{86400:this.$t("time.oneDay"),604800:this.$t("time.oneWeek"),2592e3:this.$t("time.oneMonth")}}},computed:(0,a.Z)({},(0,r.rn)({userTimeZone:function(e){return e.userProfile.userTimeZone}})),methods:{getExpDate:function(e){return this.durationOptions[e]},emitEdit:function(){this.$emit("edit")},emitClosed:function(){this.$emit("closed")}}},l=o,c=i(93483),d=(0,c.Z)(l,n,s,!1,null,"2e5e75ec",null),u=d.exports},47474:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return un}});var n,s,a=function(){var e=this,t=e._self._c;return t("div",[e.showBanner?t("vacation-responder-banner"):e._e(),t("div",{staticClass:"tab-focus",attrs:{id:"newUI"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.handleTab.apply(null,arguments)}}},[t("div",{staticClass:"mail"},[t("div",{class:["mail-left",e.isMinimized&&"minimized",e.showBanner&&"has-banner"],style:{width:e.sidebarMenuWidth+"px"},on:{contextmenu:e.closeInboxContextMenu}},[t("div",{class:["mail-left-container",{tabed:e.tabed}]},[t("div",{staticClass:"mail-left-header"},[t("span",{directives:[{name:"show",rawName:"v-show",value:!e.isMinimized,expression:"!isMinimized"}],staticClass:"mail-left-title"},[e._v("Mail")]),t("div",{staticClass:"mail-left-compose tab-focus",attrs:{tabindex:"0"},on:{click:e.openCompose}},[t("shortcut-reminder",{attrs:{preTooltip:e.$t("compose.compose"),shortcutKey:"compose",customClass:""}},[t("svg-icon",{attrs:{needHover:!1,iconClass:"edit"}})],1)],1)]),t("div",{staticClass:"mail-left-label-wrap"},[t("system-labels",{attrs:{selectMailLabel:e.selectMailLabelData,mailLabels:e.mailLabels,isMinimized:e.isMinimized},on:{handleSelectLabel:e.handleSelectLabel}}),t("user-labels",{attrs:{selectMailLabel:e.selectMailLabelData,mailLabels:e.mailLabels,isMinimized:e.isMinimized},on:{handleSelectLabel:e.handleSelectLabel}})],1)])]),t("div",{staticClass:"mail-divider"},[t("div",{staticClass:"mail-divider-container"},[t("span",{class:["toggle-minimize-action","tab-focus"],attrs:{tabindex:"0",role:"button","aria-label":e.isMinimized?e.$t("sidebar.maximizeFolderBar"):e.$t("sidebar.minimizeFolderBar")},on:{click:e.toggleMinimize,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.toggleMinimize.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.toggleMinimize.apply(null,arguments)}]}},[e.isMinimized?t("svg-icon",{attrs:{iconClass:"maximize-triangle"}}):t("svg-icon",{attrs:{iconClass:"minimize-triangle"}})],1)])]),t("div",{class:["mail-right",e.showBanner&&"has-banner"],attrs:{id:"mail-right"}},[t("inbox",{ref:"inboxRef",on:{resetInstantDraftsMsgIdByThreadIds:e.resetInstantDraftsMsgIdByThreadIds}})],1),t("compose-container",{ref:"composeContainer"})],1)])],1)},r=[],o=i(70021),l=i(56706),c=i(34948),d=i(20629),u=function(){var e=this,t=e._self._c;return t("div",{class:["label-list",e.isMinimized&&"label-list__minimized"]},[e._l(e.systemLabels,(function(i){return t("div",{key:i.id,staticClass:"label-list-item"},[t("zm-tooltip",{staticClass:"item",attrs:{content:e.getLabelContent(i),placement:"right-end",enterable:!1,"break-word":!0,tabindex:"-1"}},[t("label-item",{attrs:{selectMailLabel:e.selectMailLabel,item:i,isMinimized:e.isMinimized},on:{handleSelectLabel:e.handleSelectLabel}})],1)],1)})),t("zm-tooltip",{attrs:{content:e.showAllSystemLabels?e.$t("label.showLess"):e.$t("label.showMore"),placement:"right-end"}},[t("div",{style:e.isMinimized?"":"width: 100%;"},[t("div",{class:["more-wrapper",e.isMinimized&&"more-wrapper__minimized","tab-focus"],attrs:{tabindex:"0"},on:{click:e.handleToggleLabels,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.handleToggleLabels.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleToggleLabels.apply(null,arguments)}]}},[t("svg-icon",{class:[e.isMinimized&&"more__minimized","svg-icon","system-icon"],attrs:{iconClass:e.showAllSystemLabels?"minus":"more"}}),e.isMinimized?e._e():t("span",{staticClass:"much-hidden"},[e._v(" "+e._s(e.showAllSystemLabels?e.$t("label.less"):e.$t("label.more"))+" ")])],1)])])],2)},h=[],m=function(){var e=this,t=e._self._c;return t("div",{class:["label-item",{"label-item__selected":e.getIsSelectedLabel(e.item),"label-item__minimized":e.isMinimized}],on:{click:function(t){return e.handleClick(e.item)}}},[e.item.isSystem?t("svg-icon",{class:["svg-icon"],attrs:{isSelected:e.selectMailLabel.id===e.item.id,iconClass:e.getFolderIconClass(e.item)}}):t("svg-label",{attrs:{labelClass:e.labelIcon,labelColor:e.getIsSelectedLabel(e.item)?"var(--button-primary-font-color)":e.item.backgroundColor}}),e.isMinimized?e._e():t("div",{staticClass:"label-item-content"},[t("span",{staticClass:"label-name"},[e._v(" "+e._s(e.getLabelContent(e.item))+" ")]),e.item.isSystem?e._e():t("zm-dropdown",{attrs:{trigger:"click",placement:"bottom"},on:{command:e.handleCommand}},[t("svg-icon",{staticClass:"dropdown-btn",attrs:{iconClass:"more-horizontal"}}),t("zm-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("zm-dropdown-item",{staticClass:"clearfix",attrs:{command:"delete"}},[t("span",[e._v(e._s(e.$t("operation.delete")))])]),t("zm-dropdown-item",{staticClass:"clearfix",attrs:{command:"update"}},[t("span",[e._v(e._s(e.$t("common.update")))])]),"Decrypted"!==e.item.labelDecryptionStatus?t("zm-dropdown-item",{staticClass:"clearfix",attrs:{command:"retryDecrypt"}},[t("span",[e._v(e._s(e.$t("common.decrypt")))])]):e._e()],1)],1)],1),0!==e.item.displayNum&&e.isNotTrashLabel(e.item.id)?t("zm-badge",{class:["label-item-badge",{"hide-on-hover":!(e.item.isSystem||e.isMinimized),"zm-badge-draft":e.isDraftLabel(e.item.id),selected:e.getIsSelectedLabel(e.item)}],attrs:{"is-dot":e.isMinimized||!e.enableLabelCount,value:e.item.displayNum,max:9999,title:e.item.displayNum}}):e._e()],1)},p=[],f=i(36199),v=i(42115),b=i(94182),g=i(50620),S=i(63147),I=i(87671),w=i(26274),x=i(12546),y=I.Yb.OUTLOOK_SYSTEM_FOLDER_NAME,L=(n={},(0,w.Z)(n,y.INBOX,{id:"inbox",displayName:x.Z.t("label.inbox"),icon:"inbox"}),(0,w.Z)(n,y.ARCHIVE,{id:"archive",displayName:x.Z.t("label.archive"),icon:"archive"}),(0,w.Z)(n,y.CONVERSATION_HISTORY,{id:"conversation_history",displayName:x.Z.t("label.conversationHistory"),icon:"conversation-history"}),(0,w.Z)(n,y.DELETED_ITEMS,{id:"delete_items",displayName:x.Z.t("label.deleteItems"),icon:"trash"}),(0,w.Z)(n,y.DRAFTS,{id:"draft",displayName:x.Z.t("label.draft"),icon:"draft"}),(0,w.Z)(n,y.JUNK_EMAIL,{id:"junk_email",displayName:x.Z.t("label.junk"),icon:"spam"}),(0,w.Z)(n,y.SENT_ITEMS,{id:"sent_items",displayName:x.Z.t("label.sent"),icon:"sent"}),(0,w.Z)(n,y.SYNC_ISSUES,{id:"sync_issues",displayName:x.Z.t("label.syncIssues"),icon:"sync-issues"}),(0,w.Z)(n,y.OUTBOX,{id:"outbox",displayName:x.Z.t("label.outbox"),icon:"outbox"}),(0,w.Z)(n,y.SNOOZED,{id:"snoozed",displayName:x.Z.t("label.snoozed"),icon:"snoozed"}),n),C=L,$=I.Yb.SystemDefinedCategoryIds,k={name:"LabelItem",components:{SvgLabel:b.Z,SvgIcon:v.Z},props:{item:Object,selectMailLabel:Object,isMinimized:{type:Boolean,default:!1}},data:function(){return{categoryIds:Object.values($)}},computed:(0,c.Z)((0,c.Z)((0,c.Z)({},(0,d.Se)(["enableLabelCount","isGmail","isOutlook"])),(0,d.rn)(["searchString","inSearching"])),{},{labelIcon:function(){return I.e.labelUtil.getLabelIconName()}}),methods:{isDraftLabel:function(e){return e===I.e.labelUtil.getDraftLabelId()},isNotTrashLabel:function(e){return e!==I.e.labelUtil.getTrashLabelId()},getIsSelectedLabel:function(e){if(this.selectMailLabel.id===e.id)return!0;if(e.id===I.e.labelUtil.getInboxLabelId()&&this.categoryIds.includes(this.selectMailLabel.id))return!0;if(this.inSearching&&!this.selectMailLabel.id){var t,i=null===(t=this.searchString)||void 0===t?void 0:t.toLowerCase();if(i==="in:".concat(e.id.toLowerCase()," ")||i==="is:".concat(e.id.toLowerCase()," "))return!0;if(S.Z.isArchive(e.id)&&("in:archive "===i||"is:archive "===i))return!0;if(i==="in:".concat(e.name.toLowerCase()," ")||i==="is:".concat(e.name.toLowerCase()," "))return!0}return!1},getFolderIconClass:function(e){var t,i,n="folder";this.isOutlook?n=(null===(t=C[e.name])||void 0===t?void 0:t.icon)||"folder":n=(null===(i=g.Z[e.id])||void 0===i?void 0:i.icon)||"folder";return this.getIsSelectedLabel(e)?"".concat(n,"-filled"):n},handleCommand:function(e){this.$emit("handleCommand",{method:e,item:this.item})},handleClick:function(e){this.$store.commit("changeCurrentPage",1),this.$emit("handleSelectLabel",e)},getLabelContent:function(e){var t,i;return e.isSystem?this.isOutlook?(null===(i=C[e.name])||void 0===i?void 0:i.displayName)||"":(null===(t=g.Z[e.id])||void 0===t?void 0:t.displayName)||"":this.isGmail?(0,f.X)(e.name,20):"DecryptFailed"===e.labelDecryptionStatus?this.$t("label.encrytedLabel"):e.name}}},T=k,_=i(93483),M=(0,_.Z)(T,m,p,!1,null,"6f8ebe96",null),D=M.exports,E=I.Yb.SystemDefinedCategoryIds,A={name:"SystemLabels",components:{LabelItem:D},props:{mailLabels:{type:Array,default:function(){return[]}},selectMailLabel:{type:Object,default:function(){}},isMinimized:{type:Boolean}},data:function(){return{categoryIds:Object.values(E),mailLabelsLength:7}},computed:(0,c.Z)((0,c.Z)((0,c.Z)({},(0,d.Se)(["currentLabelId","isOutlook"])),(0,d.rn)(["showAllSystemLabels"])),{},{systemLabels:function(){var e=this;return this.mailLabels.filter((function(e){return e.isSystem})).filter((function(t){return!e.categoryIds.includes(t.id)})).filter((function(t){var i=t.id,n=t.count;return e.isOutlook?![I.Yb.OUTLOOK_SYSTEM_FOLDER_NAME.OUTBOX,I.Yb.OUTLOOK_SYSTEM_FOLDER_NAME.SYNC_ISSUES].includes(t.name)||n.threadsTotal:![I.Yb.SystemDefinedMailLabelIds.OUTBOX,I.Yb.SystemDefinedMailLabelIds.USER_SCHEDULED,I.Yb.SystemDefinedMailLabelIds.ESCROW].includes(i)||n.threadsTotal})).filter((function(t,i){return e.showAllSystemLabels||i<e.mailLabelsLength}))}}),watch:{currentLabelId:function(e){this.systemLabels.findIndex((function(t){return t.id===e}))>this.mailLabelsLength&&(this.showAllSystemLabels||this.handleToggleLabels())},mailLabels:function(e){this.checkOutboxCount(e)}},methods:(0,c.Z)((0,c.Z)({},(0,d.OI)(["setShowAllSystemLabels"])),{},{getLabelContent:function(e){var t;if(this.isOutlook){var i,n=this.$t("common.unknownFolderName");return e.name&&(null===(i=C[e.name])||void 0===i?void 0:i.displayName)||n}var s=this.$t("common.unknownLabelName");return e.id&&(null===(t=g.Z[e.id])||void 0===t?void 0:t.displayName)||s},handleSelectLabel:function(e){this.$emit("handleSelectLabel",e)},handleToggleLabels:function(){this.setShowAllSystemLabels(!this.showAllSystemLabels)},checkOutboxCount:function(e){var t=e.find((function(e){return e.id===I.Yb.SystemDefinedMailLabelIds.OUTBOX}));if(t){var i=t.displayNum;if(0===i&&this.currentLabelId===I.Yb.SystemDefinedMailLabelIds.OUTBOX){var n=e.find((function(e){return e.id===I.Yb.SystemDefinedMailLabelIds.INBOX}));n&&this.$emit("handleSelectLabel",n)}}}})},Z=A,z=(0,_.Z)(Z,u,h,!1,null,"00eb3601",null),R=z.exports,H=function(){var e=this,t=e._self._c;return t("div",{class:["labels",e.isMinimized&&"labels__minimized"]},[t("div",{class:["label-icons",e.isMinimized&&"label-icons__minimized","tab-focus","plus-icon"],attrs:{tabindex:"0"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleAddLabel.apply(null,arguments)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.handleAddLabel.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleAddLabel.apply(null,arguments)}]}},[t("zm-tooltip",{attrs:{content:e.isOutlook?e.$t("label.createNewFolder"):e.$t("label.createNewLabel"),placement:"right-end"}},[t("div",{staticClass:"plus-icon-content"},[t("svg-icon",{attrs:{iconClass:"plus"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.isMinimized,expression:"!isMinimized"}],staticClass:"plus-icon-text"},[e._v(" "+e._s(e.isOutlook?e.$t("label.createNewFolder"):e.$t("label.createNewLabel"))+" ")])],1)])],1),t("div",{staticClass:"scroll-bar-labels"},e._l(e.userMailLabels,(function(i){return t("div",{key:i.id,staticClass:"label-list-label"},[t("zm-tooltip",{staticClass:"item",attrs:{placement:"right-end",enterable:!1,content:i.name,"popper-class":"label-tooltip-container",tabindex:"-1",offset:1}},[t("label-item",{staticClass:"tab-focus hover-hide-count",attrs:{selectMailLabel:e.selectMailLabel,item:i,isMinimized:e.isMinimized},on:{handleCommand:e.handleItem,handleSelectLabel:e.handleSelectLabel}})],1)],1)})),0),t("label-dialog",{attrs:{show:e.dialogVisible,action:e.action,item:e.labelItem,"append-to-body":""},on:{onOk:function(t){e.dialogVisible=!1},onCancel:function(t){e.dialogVisible=!1}}})],1)},O=[],P=i(54467),F={name:"UserLabels",components:{LabelItem:D,SvgIcon:v.Z,labelDialog:P.Z},props:{mailLabels:{type:Array,default:function(){return[]}},selectMailLabel:{type:Object,default:function(){}},isMinimized:{type:Boolean}},data:function(){return{action:this.$t("label.create"),dialogVisible:!1,inputErrorText:"",isInputInvalid:!0,labelItem:{},loading:!1,showAllSystemLabels:!1,showUserLabelLimit:5,types:["from","reply"]}},computed:(0,c.Z)((0,c.Z)({},(0,d.Se)(["isOutlook","showDecryptFailedReminder"])),{},{providerIsGmail:function(){return"Gmail"===this.$store.state.typeOfEmail},userMailLabels:function(){return this.mailLabels.filter((function(e){return!e.isSystem}))}}),methods:(0,c.Z)((0,c.Z)({},(0,d.OI)(["setShowDecryptFailedReminder","setDecryptFailedReminderContent"])),{},{handleSelectLabel:function(e){this.$emit("handleSelectLabel",e)},handleAddLabel:function(){this.dialogVisible=!0,this.labelItem={},this.action=this.$t("label.create")},handleItem:function(e){var t=this,i=e.item,n=e.method;if("delete"===n){var s="",a=i.displayName;this.providerIsGmail&&(a=i.name),s=(0,f.X)(a,32);var r=this.isOutlook?"label.confirmDeleteFolder":"label.confirmDeleteLabel";this.$confirm(this.$t(r,[s]),this.$t("common.notice"),{confirmButtonText:this.$t("operation.confirm"),cancelButtonText:this.$t("operation.cancel"),type:"warning",customClass:"common-confirm common-confirm-delete",callback:function(){var e=(0,l.Z)((0,o.Z)().mark((function e(n){var s,a;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"!==n){e.next=12;break}return e.prev=1,e.next=4,window.zoomSdk.postJsMessage({functionName:"mailui_deletelabels",params:{labelIds:[i.id]}});case 4:s=e.sent,0===s.returnCode?(t.$store.commit("deleteMailLabels",s.result.DeleteLabels.labelIds),a=t.isOutlook?"label.folderDeleted":"label.labelDeleted",t.$undoNotice({title:t.$t(a,[i.name])}),s.result.DeleteLabels.labelIds.includes(t.selectMailLabel.id)&&t.handleSelectLabel({isSystem:!0,id:I.e.labelUtil.getInboxLabelId()})):t.$msg({type:"Error",content:t.$t("label.failedToDeleteLabel")}),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),t.$msg({type:"Error",content:t.$t("label.failedToDeleteLabel")});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));function n(t){return e.apply(this,arguments)}return n}()})}else"update"===n?(this.action=this.$t("label.update"),this.labelItem=i,this.dialogVisible=!0):"addsub"===n?(this.dialogVisible=!0,this.action=this.$t("label.addSub")):"retryDecrypt"===n&&this.retryDecryptAllLabels()},retryDecryptLabel:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=4,window.zoomSdk.postJsMessage({functionName:"mailui_retrydecryptlabel",params:{labelId:e.id}});case 4:n=i.sent,0===n.returnCode?window.zoomSdk.postJsMessage({functionName:"mailui_getlabelinfo",params:{labelId:e.id}}).then((function(i){if(0===i.returnCode){var n=i.result.GetLabelInfo.mailLabel;"Decrypted"===n.labelDecryptionStatus?t.$store.commit("changeMailLabelsDisplayNum",{labelId:e.id,mailLabel:n}):t.$undoNotice({title:t.$t("label.unableToDecryptLabel")})}})):!t.showDecryptFailedReminder&&n.labelDecryptionErrCode&&(t.setDecryptFailedReminderContent("Error code: ".concat(n.labelDecryptionErrCode)),t.setShowDecryptFailedReminder(!0)),i.next=11;break;case 8:i.prev=8,i.t0=i["catch"](0),t.$msg({type:"Error",content:t.$t("label.errorDecryptingLabel")});case 11:case"end":return i.stop()}}),i,null,[[0,8]])})))()},retryDecryptAllLabels:function(){var e=this,t=this.mailLabels.filter((function(e){return"Decrypted"!==e.labelDecryptionStatus}));t.forEach((function(t){e.retryDecryptLabel(t)}))}})},N=F,U=(0,_.Z)(N,H,O,!1,null,"4059a208",null),V=U.exports,B=i(31662),G=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"scale",rawName:"v-scale",value:1,expression:"1"}],staticClass:"inbox-container",on:{wheel:e.throttleHandleMouseWheel}},[t("add-filter-dialog",{ref:"addFilterDialog",attrs:{filterEdits:e.filterEdits},on:{cancel:function(){},submit:function(){}}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showActions,expression:"showActions"}],ref:"contextMenu",staticClass:"actions",style:{left:e.actionX+"px",top:e.actionY+"px"},attrs:{id:"mail-list-actions-menu"},on:{contextmenu:function(e){e.preventDefault(),e.stopPropagation()}}},[e.archiveStatus?t("div",{staticClass:"actions-item",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleArchiveToggle.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("operation.archive"))+" ")]):e._e(),t("div",{staticClass:"actions-item",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleTrashToggle.apply(null,arguments)}}},[e._v(" "+e._s(e.trashOrMoveToInboxText)+" ")]),t("div",{staticClass:"actions-item",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleReadToggle.apply(null,arguments)}}},[e._v(" "+e._s(e.readStatus?"Mark as Unread":"Mark as Read")+" ")]),e.hasDrafts?t("div",{staticClass:"actions-item",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleDiscardDrafts.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("operation.discardDrafts"))+" ")]):e._e(),e.canDeleteForever?t("div",{staticClass:"actions-item",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleDeleteTrash.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("operation.deleteForever"))+" ")]):e._e(),e.isOutlook||e.allContextMenuSendersAreSelf?e._e():t("div",{staticClass:"actions-item",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSpamToggle.apply(null,arguments)}}},[e._v(" "+e._s(e.spamStatus)+" ")]),e.isOutlook?e._e():t("div",{staticClass:"actions-item",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),function(){return e.$refs.addFilterDialog.open()}.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("operation.createFilter"))+" ")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.showDetail||e.isSplitView,expression:"!showDetail || isSplitView"}],ref:"searchSettingBar",class:["header-bar",{"split-view":e.isSplitView}],on:{contextmenu:e.handleHideActions}},[t("CategoryTabs",{attrs:{selectionCount:e.selectInboxes.length}}),t("div",[t("search",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"searchRef",attrs:{showSearch:e.showSearch},on:{searchFinished:e.setLoadingState,isLastPage:e.setIsLastPage,changeSearchErrorStatus:e.changeSearchErrorStatus,setShowSearch:e.setShowSearch}}),e.inSearching?t("div",{staticClass:"header-bar-right"},[t("zm-tooltip",{attrs:{content:e.$t("search.search"),placement:"bottom",enterable:!1}},[t("span",{staticClass:"searchStatusHeader tab-focus",attrs:{tabindex:"0"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),function(){return e.showSearch=!0}.apply(null,arguments)}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.searchString,expression:"searchString"}],staticClass:"searchStatus"},[t("svg-icon",{style:{marginRight:"8px"},attrs:{iconClass:"search"}}),t("span",[e._v(e._s(e.searchString))])],1),t("span",{staticClass:"search-close",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleExitSearch.apply(null,arguments)}}},[t("svg-icon",{style:{margin:"4px",width:"14px",height:"14px"},attrs:{iconClass:"close"}})],1)])])],1):t("div",{staticClass:"header-bar-right"},[e.isTestClient?t("span",{style:{lineHeight:"16px",userSelect:"text"}},[e._v(" "+e._s(e.$t("common.version",[e.version]))+" ")]):e._e(),t("zm-tooltip",{attrs:{content:e.$t("search.search"),placement:"bottom",enterable:!1}},[t("span",{staticClass:"header-bar-btn tab-focus",attrs:{tabindex:"0"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),function(){return e.showSearch=!0}.apply(null,arguments)}}},[t("svg-icon",{attrs:{iconClass:"search"}})],1)]),t("zm-tooltip",{attrs:{content:e.$t("operation.refresh"),placement:"bottom",enterable:!1}},[t("span",{staticClass:"header-bar-btn tab-focus",attrs:{tabindex:"0"},on:{click:e.throttleHandleSyncMail}},[t("svg-icon",{class:{"circle-refresh":e.refreshRun},attrs:{iconClass:"refresh"}})],1)]),t("SettingsDropdown",{on:{enterSettings:e.goToSettings},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("zm-tooltip",{attrs:{content:e.$t("common.settings"),placement:"bottom",enterable:!1}},[t("span",{staticClass:"header-bar-btn tab-focus",attrs:{tabindex:"0"}},[t("svg-icon",{attrs:{iconClass:"setting"}})],1)])]},proxy:!0}],null,!1,2976340203)}),t("zm-tooltip",{attrs:{content:e.$t("operation.toggleView"),placement:"bottom",enterable:!1}},[t("span",{staticClass:"header-bar-btn tab-focus",attrs:{tabindex:"0"},on:{click:e.handleSplitToggle}},[e.isSplitView?t("svg-icon",{attrs:{iconClass:"list"}}):t("svg-icon",{attrs:{iconClass:"combo"}})],1)])],1)],1)],1),t("div",{class:["mail-view-manager",{"split-view":e.isSplitView}]},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isSplitView||!e.showDetail,expression:"isSplitView || !showDetail"}],class:["mail-list",{"split-view":e.isSplitView}],attrs:{id:"mail-list"}},[e.isShowControlHeader?t("control-header",{ref:"controlHeader",attrs:{selectInboxes:e.selectInboxes,isLoading:e.isLoading,headerOptions:e.headerOptions,moreOptions:e.moreOptions},on:{showApproveDialog:e.showApproveDialog,handleCheckMore:e.handleCheckMore,setIsLastPage:e.setIsLastPage,changeSearchErrorStatus:e.changeSearchErrorStatus,setLoadingState:e.setLoadingState,handleCheckAllChange:e.handleCheckAllChange,setSelectInboxes:e.setSelectInboxes,handleRefresh:e.handleRefresh,handleActions:e.handleActions}}):e._e(),0!==e.inboxList.length||e.isFilteringMails||e.isSearchingMails?e._e():t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"no-data empty-state"},[e.isLoading?e._e():t("div",{staticClass:"no-data-tip"},[t("div",{staticClass:"no-data-in-label"},[e.showSplitDefault?e._e():t("div",{staticClass:"splash-image"},[t("img",{staticClass:"splash",attrs:{src:i(66813),alt:e.$t("list.splashImage")}})]),e.inSearching||e.inFilters?t("div",[t("div",[e._v(e._s(e.$t("list.noEmailsInSearch")))]),t("zm-button",{directives:[{name:"show",rawName:"v-show",value:(e.isOffline||e.searchErrorStatus)&&e.isNotInOutbox,expression:"(isOffline || searchErrorStatus) && isNotInOutbox"}],on:{click:function(t){return e.handleRefresh(null,!0)}}},[e._v(e._s(e.$t("common.retry")))])],1):t("div",[t("div",[e._v(e._s(e.listText))]),t("zm-button",{directives:[{name:"show",rawName:"v-show",value:(e.isOffline||e.errorStatus)&&e.isNotInOutbox,expression:"(isOffline || errorStatus) && isNotInOutbox"}],on:{click:function(t){return e.handleRefresh(null,!0)}}},[e._v(e._s(e.$t("common.retry")))])],1)])])]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isFilteringMails||e.isSearchingMails,expression:"isFilteringMails || isSearchingMails"}],staticClass:"recycle-scroller-container",attrs:{id:"virtual-container"}},[e.isLoading&&e.isPaginated?e._e():t("RecycleScroller",{ref:"recycleScroller",staticClass:"recycle-scroller",attrs:{id:"recycle-scroller",keyField:"threadId",items:e.mails,"item-size":e.isSplitView?80*e.scaleRadio:40*e.scaleRadio,simpleArray:!1},on:{handleHideActions:e.handleHideActions},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.item;return[t("inbox-item",{key:n.threadId,attrs:{isLoadingDetail:e.currentLoadingInboxDetailThreadId===n.threadId,selectInboxes:e.selectInboxes,inboxItem:n,lastReadInboxItem:e.lastReadInboxItem,lastCheckedInboxItem:e.lastSelectedInboxItemFocused?e.lastSelectedInboxItem:"",lastSplitViewSelected:e.lastSplitViewSelected,displayActionTooltip:!e.isThreadExist(n.threadId)},on:{"update:selectInboxes":function(t){e.selectInboxes=t},"update:select-inboxes":function(t){e.selectInboxes=t},handleDelete:e.handleItemDelete,handleArchive:e.handleItemArchive,handleMove:e.handleItemMove,handleSpam:e.handleItemSpam,handlePhishing:e.handleItemPhishing,handleMark:e.handleItemMark,handleCheckedItemsChange:e.handleCheckedItemsChange,handleShowActions:e.handleShowActions,handleHideActions:e.handleHideActions,handleShowDetail:e.handleShowDetail,handleCancelScheduledSend:e.handleCancelScheduledSend}})]}},{key:"after",fn:function(){return[e.isLoading&&0!==e.inboxList.length?t("div",{staticClass:"list-loading"},[t("i",{staticClass:"zm-icon-loading"})]):e._e(),e.isLocalLastPage&&!e.isLoading&&0!==e.inboxList.length?t("div",{staticClass:"list-marker",on:{contextmenu:function(t){return t.stopPropagation(),e.handleHideActions.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("list.endOfEmails"))+" ")]):e._e()]},proxy:!0}],null,!1,99342147)})],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isSplitView,expression:"isSplitView"}],staticClass:"resizer",attrs:{id:"resizer"}}),t("div",{class:["detail-view",{"split-view":e.isSplitView}]},[e.isSplitView&&(!e.showDetail&&e.showSplitDefault||!e.isDetailInList)?t("div",{staticClass:"splash-image"},[t("div",{staticClass:"no-data-tip"},[t("img",{staticClass:"splash",attrs:{src:i(66813),alt:e.$t("list.splashImage")}}),0!==e.inboxList.length?t("div",{staticClass:"no-data-in-label"},[e._v(" "+e._s(e.$t("list.noDetailSelected"))+" ")]):e._e()])]):e.showDetail?t("detail",{attrs:{inboxList:e.inboxList,responseItemMailLabels:e.responseItemMailLabels},on:{handleDelete:e.handleDeleteResponse,handleArchive:e.handleItemArchive,handleMark:e.handleMarkResponse,handleSpam:e.handleSpamResponse,handlePhishing:e.handleItemPhishing,handleShowDetail:e.handleShowDetail,openCreateFilter:e.openCreateFilter}}):e._e()],1)]),t("confirm-dialog",{attrs:{visible:e.showApproveUserDialog,contentWithBold:e.approveInfo,hasBold:!0,actions:e.approveUserActions,title:e.$t("operation.approveThisEmailAddress"),width:"475px"}}),t("confirm-dialog",{attrs:{visible:e.showReportPhishingDialog,title:e.$t("operation.reportPhishing"),content:e.$t("operation.reportPhishingContent"),actions:e.reportPhishingActions,width:"475px"}}),t("zm-dialog",{staticClass:"get-started",attrs:{width:"490px",visible:e.showGetStartedModal,"append-to-body":""}},[t("div",{staticClass:"logo"},[t("svg-icon",{attrs:{iconClass:"logo"}})],1),t("div",{staticClass:"description"},[e._v(e._s(e.$t("landing.aimsToHelp")))]),t("div",{staticClass:"items"},e._l(["enjobInbox","useTeamChat","customizeInbox"],(function(i,n){return t("div",{key:i,staticClass:"item"},[t("div",{staticClass:"item-title"},[t("span",[e._v(e._s(n+1))]),t("div",[e._v(e._s(e.$t("landing.".concat(i))))])]),t("div",{staticClass:"item-detail"},[e._v(e._s(e.$t("landing.".concat(i,"Detail"))))])])})),0),t("zm-button",{attrs:{type:"primary"},on:{click:e.closeGetStartedModal}},[e._v(e._s(e.$t("landing.getStarted")))])],1)],1)},j=[],W=i(84282),Y=i(6041),X=i(38291),q=i.n(X),J=i(76635),K=i.n(J),Q=i(46905),ee=i(87693),te=i(8062),ie=i(41236),ne={setConfiguration:function(){var e=(0,l.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.zoomSdk.postJsMessage({functionName:"mailui_setconfiguration",params:{key:"PaneMode",value:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getConfiguration:function(){var e=(0,l.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.zoomSdk.postJsMessage({functionName:"mailui_getconfiguration",params:{key:"PaneMode"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},se=i(92634),ae={itemsLimit:1e3},re=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:e.handleVisibilityChange,expression:"handleVisibilityChange"}],staticClass:"vue-recycle-scroller",class:(0,w.Z)({ready:e.ready,"page-mode":e.pageMode},"direction-".concat(e.direction),!0),on:{"&scroll":function(t){return e.handleScroll.apply(null,arguments)},contextmenu:e.handleHideActions}},[e.$slots.before?t("div",{staticClass:"vue-recycle-scroller__slot",on:{contextmenu:e.handleHideActions}},[e._t("before")],2):e._e(),t("div",{ref:"wrapper",staticClass:"vue-recycle-scroller__item-wrapper",style:(0,w.Z)({},"vertical"===e.direction?"minHeight":"minWidth",e.totalSize+"px")},[t("transition-group",{attrs:{name:"scroll-item-fade"}},e._l(e.pool,(function(i){return t("div",{key:i.nr.id,staticClass:"vue-recycle-scroller__item-view",class:{hover:e.hoverKey===i.nr.key},style:e.ready?{transform:"translate".concat("vertical"===e.direction?"Y":"X","(").concat(i.position,"px)")}:null,on:{mouseenter:function(t){e.hoverKey=i.nr.key},mouseleave:function(t){e.hoverKey=null}}},[e._t("default",null,{item:i.item,index:i.nr.index,active:i.nr.used})],2)})),0)],1),e.$slots.after?t("div",{staticClass:"vue-recycle-scroller__slot",on:{contextmenu:e.handleHideActions}},[e._t("after")],2):e._e(),t("ResizeObserver",{on:{notify:e.handleResize}})],1)},oe=[];function le(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var i=e.indexOf("Trident/");if(i>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var s=e.indexOf("Edge/");return s>0?parseInt(e.substring(s+5,e.indexOf(".",s)),10):-1}function ce(){ce.init||(ce.init=!0,s=-1!==le())}var de={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},mounted:function(){var e=this;ce(),this.$nextTick((function(){e._w=e.$el.offsetWidth,e._h=e.$el.offsetHeight,e.emitOnMount&&e.emitSize()}));var t=document.createElement("object");this._resizeObject=t,t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex",-1),t.onload=this.addResizeHandlers,t.type="text/html",s&&this.$el.appendChild(t),t.data="about:blank",s||this.$el.appendChild(t)},beforeDestroy:function(){this.removeResizeHandlers()},methods:{compareAndNotify:function(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize:function(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers:function(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers:function(){this._resizeObject&&this._resizeObject.onload&&(!s&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};function ue(e,t,i,n,s,a,r,o,l,c){"boolean"!==typeof r&&(l=o,o=r,r=!1);var d,u="function"===typeof i?i.options:i;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,s&&(u.functional=!0)),n&&(u._scopeId=n),a?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,o(e))}),d)if(u.functional){var h=u.render;u.render=function(e,t){return d.call(t),h(e,t)}}else{var m=u.beforeCreate;u.beforeCreate=m?[].concat(m,d):[d]}return i}var he=de,me=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"resize-observer",attrs:{tabindex:"-1"}})},pe=[];me._withStripped=!0;var fe=void 0,ve="data-v-8859cc6c",be=void 0,ge=!1,Se=ue({render:me,staticRenderFns:pe},fe,he,ve,ge,be,!1,void 0,void 0,void 0);function Ie(e){e.component("resize-observer",Se),e.component("ResizeObserver",Se)}var we={version:"1.0.1",install:Ie},xe=null;"undefined"!==typeof window?xe=window.Vue:"undefined"!==typeof i.g&&(xe=i.g.Vue),xe&&xe.use(we);function ye(e){return ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $e(e,t,i){return t&&Ce(e.prototype,t),i&&Ce(e,i),e}function ke(e){return Te(e)||_e(e)||Me()}function Te(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function _e(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function Me(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function De(e){var t;return t="function"===typeof e?{callback:e}:e,t}function Ee(e,t){var i,n,s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(r){for(var o=arguments.length,l=new Array(o>1?o-1:0),c=1;c<o;c++)l[c-1]=arguments[c];if(s=l,!i||r!==n){var d=a.leading;"function"===typeof d&&(d=d(r,n)),i&&r===n||!d||e.apply(void 0,[r].concat(ke(s))),n=r,clearTimeout(i),i=setTimeout((function(){e.apply(void 0,[r].concat(ke(s))),i=0}),t)}};return r._clear=function(){clearTimeout(i),i=null},r}function Ae(e,t){if(e===t)return!0;if("object"===ye(e)){for(var i in e)if(!Ae(e[i],t[i]))return!1;return!0}return!1}var Ze=function(){function e(t,i,n){Le(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(i,n)}return $e(e,[{key:"createObserver",value:function(e,t){var i=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=De(e),this.callback=function(e,t){i.options.callback(e,t),e&&i.options.once&&(i.frozen=!0,i.destroyObserver())},this.callback&&this.options.throttle){var n=this.options.throttleOptions||{},s=n.leading;this.callback=Ee(this.callback,this.options.throttle,{leading:function(e){return"both"===s||"visible"===s&&e||"hidden"===s&&!e}})}this.oldResult=void 0,this.observer=new IntersectionObserver((function(e){var t=e[0];if(e.length>1){var n=e.find((function(e){return e.isIntersecting}));n&&(t=n)}if(i.callback){var s=t.isIntersecting&&t.intersectionRatio>=i.threshold;if(s===i.oldResult)return;i.oldResult=s,i.callback(s,t)}}),this.options.intersection),t.context.$nextTick((function(){i.observer&&i.observer.observe(i.el)}))}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&"number"===typeof this.options.intersection.threshold?this.options.intersection.threshold:0}}]),e}();function ze(e,t,i){var n=t.value;if(n)if("undefined"===typeof IntersectionObserver);else{var s=new Ze(e,n,i);e._vue_visibilityState=s}}function Re(e,t,i){var n=t.value,s=t.oldValue;if(!Ae(n,s)){var a=e._vue_visibilityState;n?a?a.createObserver(n,i):ze(e,{value:n},i):He(e)}}function He(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var Oe={bind:ze,update:Re,unbind:He};function Pe(e){e.directive("observe-visibility",Oe)}var Fe={version:"1.0.0",install:Pe},Ne=null;"undefined"!==typeof window?Ne=window.Vue:"undefined"!==typeof i.g&&(Ne=i.g.Vue),Ne&&Ne.use(Fe);var Ue=i(56423),Ve=i.n(Ue),Be={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(e){return["vertical","horizontal"].includes(e)}},simpleArray:{type:Boolean,default:!1}},Ge=Be,je=!1;if("undefined"!==typeof window){je=!1;try{var We=Object.defineProperty({},"passive",{get:function(){je=!0}});window.addEventListener("test",null,We)}catch(hn){}}var Ye,Xe,qe=0,Je={name:"RecycleScroller",components:{ResizeObserver:Se},directives:{ObserveVisibility:Oe},props:(0,c.Z)((0,c.Z)({},Ge),{},{itemSize:{type:Number,default:null},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1}}),data:function(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes:function(){if(null===this.itemSize){for(var e,t={"-1":{accumulator:0}},i=this.items,n=this.sizeField,s=this.minItemSize,a=1e4,r=0,o=0,l=i.length;o<l;o++)e=i[o][n]||s,e<a&&(a=e),r+=e,t[o]={accumulator:r,size:e};return this.$_computedMinItemSize=a,t}return[]}},watch:{items:function(){this.updateVisibleItems(!0)},pageMode:function(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler:function(){this.updateVisibleItems(!1)},deep:!0}},created:function(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1))},activated:function(){var e=this,t=this.$_lastUpdateScrollPosition;"number"===typeof t&&this.$nextTick((function(){e.scrollToPosition(t)}))},mounted:function(){var e=this;this.applyPageMode(),this.$nextTick((function(){e.$_prerender=!1,e.updateVisibleItems(!0),e.ready=!0}))},beforeDestroy:function(){this.removeListeners()},methods:{handleHideActions:function(){this.$emit("handleHideActions")},addView:function(e,t,i,n,s){var a={item:i,position:0},r={id:qe++,index:t,used:!0,key:n,type:s};return Object.defineProperty(a,"nr",{configurable:!1,value:r}),e.push(a),a},unuseView:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.$_unusedViews,n=e.nr.type,s=i.get(n);s||(s=[],i.set(n,s)),s.push(e),t||(e.nr.used=!1,e.position=-9999,this.$_views["delete"](e.nr.key))},handleResize:function(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll:function(e){var t=this;this.$_scrollDirty||(this.$_scrollDirty=!0,requestAnimationFrame((function(){t.$_scrollDirty=!1;var e=t.updateVisibleItems(!1,!0),i=e.continuous;i||(clearTimeout(t.$_refreshTimout),t.$_refreshTimout=setTimeout(t.handleScroll,100))})))},handleVisibilityChange:function(e,t){var i=this;this.ready&&(e||0!==t.boundingClientRect.width||0!==t.boundingClientRect.height?(this.$emit("visible"),requestAnimationFrame((function(){i.updateVisibleItems(!1)}))):this.$emit("hidden"))},updateVisibleItems:function(e){var t,i,n,s,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.itemSize,o=this.$_computedMinItemSize,l=this.typeField,c=this.simpleArray?null:this.keyField,d=this.items,u=d.length,h=this.sizes,m=this.$_views,p=this.$_unusedViews,f=this.pool;if(u)if(this.$_prerender)t=0,i=this.prerender,n=null;else{var v=this.getScroll();if(a){var b=v.start-this.$_lastUpdateScrollPosition;if(b<0&&(b=-b),null===r&&b<o||b<r)return{continuous:!0}}this.$_lastUpdateScrollPosition=v.start;var g=this.buffer;if(v.start-=g,v.end+=g,null===r){var S,I,w=0,x=u-1,y=~~(u/2);do{I=y,S=h[y].accumulator,S<v.start?w=y:y<u-1&&h[y+1].accumulator>v.start&&(x=y),y=~~((w+x)/2)}while(y!==I);for(y<0&&(y=0),t=y,n=h[u-1].accumulator,i=y;i<u&&h[i].accumulator<v.end;i++);-1===i?i=d.length-1:(i++,i>u&&(i=u))}else t=~~(v.start/r),i=Math.ceil(v.end/r),t<0&&(t=0),i>u&&(i=u),n=u*r}else t=i=n=0;i-t>ae.itemsLimit&&this.itemsLimitError(),this.totalSize=n;var L=t<=this.$_endIndex&&i>=this.$_startIndex;if(this.$_continuous!==L){if(L){m.clear(),p.clear();for(var C=0,$=f.length;C<$;C++)s=f[C],this.unuseView(s)}this.$_continuous=L}else if(L)for(var k=0,T=f.length;k<T;k++)s=f[k],s.nr.used&&(e&&(s.nr.index=d.findIndex((function(e){return c?e[c]===s.item[c]:e===s.item}))),(-1===s.nr.index||s.nr.index<t||s.nr.index>=i)&&this.unuseView(s));for(var _,M,D,E,A=L?null:new Map,Z=t;Z<i;Z++){_=d[Z];var z=_[c]||_;if(null==z)throw new Error("Key is ".concat(z," on item (keyField is '").concat(c,"')"));s=m.get(z),r||h[Z].size?(s?(s.nr.used=!0,s.item=_):(M=_[l],D=p.get(M),L?D&&D.length?(s=D.pop(),s.item=_,s.nr.used=!0,s.nr.index=Z,s.nr.key=z,s.nr.type=M):s=this.addView(f,Z,_,z,M):(E=A.get(M)||0,(!D||E>=D.length)&&(s=this.addView(f,Z,_,z,M),this.unuseView(s,!0),D=p.get(M)),s=D[E],s.item=_,s.nr.used=!0,s.nr.index=Z,s.nr.key=z,s.nr.type=M,A.set(M,E+1),E++),m.set(z,s)),s.position=null===r?h[Z-1].accumulator:Z*r):s&&this.unuseView(s)}return this.$_startIndex=t,this.$_endIndex=i,this.emitUpdate&&this.$emit("update",t,i),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,300),{continuous:L}},getListenerTarget:function(){var e=Ve()(this.$el);return!window.document||e!==window.document.documentElement&&e!==window.document.body||(e=window),e},getScroll:function(){var e,t=this.$el,i=this.direction,n="vertical"===i;if(this.pageMode){var s=t.getBoundingClientRect(),a=n?s.height:s.width,r=-(n?s.top:s.left),o=n?window.innerHeight:window.innerWidth;r<0&&(o+=r,r=0),r+o>a&&(o=a-r),e={start:r,end:r+o}}else e=n?{start:t.scrollTop,end:t.scrollTop+t.clientHeight}:{start:t.scrollLeft,end:t.scrollLeft+t.clientWidth};return e},applyPageMode:function(){this.pageMode?this.addListeners():this.removeListeners()},addListeners:function(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,!!je&&{passive:!0}),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners:function(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem:function(e){var t;t=null===this.itemSize?e>0?this.sizes[e-1].accumulator:0:e*this.itemSize,this.scrollToPosition(t)},scrollToPosition:function(e){"vertical"===this.direction?this.$el.scrollTop=e:this.$el.scrollLeft=e},itemsLimitError:function(){throw setTimeout((function(){})),new Error("Rendered items limit reached")},sortViews:function(){this.pool.sort((function(e,t){return e.nr.index-t.nr.index}))}}},Ke=Je,Qe=(0,_.Z)(Ke,re,oe,!1,null,null,null),et=Qe.exports,tt=function(){var e=this,t=e._self._c;return t("RecycleScroller",e._g(e._b({ref:"scroller",attrs:{items:e.itemsWithSize,"min-item-size":e.minItemSize,direction:e.direction,"key-field":"id"},on:{resize:e.onScrollerResize,visible:e.onScrollerVisible},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item,n=t.index,s=t.active;return[e._t("default",null,null,{item:i.item,index:n,active:s,itemWithSize:i})]}}],null,!0)},"RecycleScroller",e.$attrs,!1),e.listeners),[t("template",{slot:"before"},[e._t("before")],2),t("template",{slot:"after"},[e._t("after")],2)],2)},it=[],nt={name:"DynamicScroller",components:{RecycleScroller:et},inheritAttrs:!1,provide:function(){return"undefined"!==typeof ResizeObserver&&(this.$_resizeObserver=new ResizeObserver((function(e){var t,i=(0,W.Z)(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(n.target){var s=new CustomEvent("resize",{detail:{contentRect:n.contentRect}});n.target.dispatchEvent(s)}}}catch(a){i.e(a)}finally{i.f()}}))),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},props:(0,c.Z)((0,c.Z)({},Ge),{},{minItemSize:{type:[Number,String],required:!0}}),data:function(){return{vscrollData:{active:!0,sizes:{},validSizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{itemsWithSize:function(){for(var e=[],t=this.items,i=this.keyField,n=this.simpleArray,s=this.vscrollData.sizes,a=0;a<t.length;a++){var r=t[a],o=n?a:r[i],l=s[o];"undefined"!==typeof l||this.$_undefinedMap[o]||(l=0),e.push({item:r,id:o,size:l})}return e},listeners:function(){var e={};for(var t in this.$listeners)"resize"!==t&&"visible"!==t&&(e[t]=this.$listeners[t]);return e}},watch:{items:function(){this.forceUpdate(!1)},simpleArray:{handler:function(e){this.vscrollData.simpleArray=e},immediate:!0},direction:function(e){this.forceUpdate(!0)}},created:function(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={}},activated:function(){this.vscrollData.active=!0},deactivated:function(){this.vscrollData.active=!1},methods:{onScrollerResize:function(){var e=this.$refs.scroller;e&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible:function(){this.$emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(e||this.simpleArray)&&(this.vscrollData.validSizes={}),this.$emit("vscroll:update",{force:!0})},scrollToItem:function(e){var t=this.$refs.scroller;t&&t.scrollToItem(e)},getItemSize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=this.simpleArray?null!=t?t:this.items.indexOf(e):e[this.keyField];return this.vscrollData.sizes[i]||0},scrollToBottom:function(){var e=this;if(!this.$_scrollingToBottom){this.$_scrollingToBottom=!0;var t=this.$el;this.$nextTick((function(){t.scrollTop=t.scrollHeight+5e3;var i=function i(){t.scrollTop=t.scrollHeight+5e3,requestAnimationFrame((function(){t.scrollTop=t.scrollHeight+5e3,0===e.$_undefinedSizes?e.$_scrollingToBottom=!1:requestAnimationFrame(i)}))};requestAnimationFrame(i)}))}}}},st=nt,at=(0,_.Z)(st,tt,it,!1,null,null,null),rt=at.exports,ot={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},computed:{id:function(){return this.vscrollData.simpleArray?this.index:this.item[this.vscrollData.keyField]},size:function(){return this.vscrollData.validSizes[this.id]&&this.vscrollData.sizes[this.id]||0},finalActive:function(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id:function(){this.size||this.onDataUpdate()},finalActive:function(e){this.size||(e?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?e?this.observeSize():this.unobserveSize():e&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created:function(){var e=this;if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){var t=function(t){e.$watch((function(){return e.sizeDependencies[t]}),e.onDataUpdate)};for(var i in this.sizeDependencies)t(i);this.vscrollParent.$on("vscroll:update",this.onVscrollUpdate),this.vscrollParent.$on("vscroll:update-size",this.onVscrollUpdateSize)}},mounted:function(){this.vscrollData.active&&(this.updateSize(),this.observeSize())},beforeDestroy:function(){this.vscrollParent.$off("vscroll:update",this.onVscrollUpdate),this.vscrollParent.$off("vscroll:update-size",this.onVscrollUpdateSize),this.unobserveSize()},methods:{updateSize:function(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData:function(){var e=this;this.watchData?this.$_watchData=this.$watch("data",(function(){e.onDataUpdate()}),{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate:function(e){var t=e.force;!this.finalActive&&t&&(this.$_pendingVScrollUpdate=this.id),this.$_forceNextVScrollUpdate!==this.id&&!t&&this.size||this.updateSize()},onDataUpdate:function(){this.updateSize()},computeSize:function(e){var t=this;this.$nextTick((function(){if(t.id===e){var i=t.$el.offsetWidth,n=t.$el.offsetHeight;t.applySize(i,n)}t.$_pendingSizeUpdate=null}))},applySize:function(e,t){var i=Math.round("vertical"===this.vscrollParent.direction?t:e);i&&this.size!==i&&(this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.$set(this.vscrollData.sizes,this.id,i),this.$set(this.vscrollData.validSizes,this.id,!0),this.emitResize&&this.$emit("resize",this.id))},observeSize:function(){this.vscrollResizeObserver&&(this.vscrollResizeObserver.observe(this.$el.parentNode),this.$el.parentNode.addEventListener("resize",this.onResize))},unobserveSize:function(){this.vscrollResizeObserver&&(this.vscrollResizeObserver.unobserve(this.$el.parentNode),this.$el.parentNode.removeEventListener("resize",this.onResize))},onResize:function(e){var t=e.detail.contentRect,i=t.width,n=t.height;this.applySize(i,n)}},render:function(e){return e(this.tag,this.$slots["default"])}},lt=ot,ct=(0,_.Z)(lt,Ye,Xe,!1,null,null,null),dt=ct.exports;function ut(e,t){e.component("".concat(t,"recycle-scroller"),et),e.component("".concat(t,"RecycleScroller"),et),e.component("".concat(t,"dynamic-scroller"),rt),e.component("".concat(t,"DynamicScroller"),rt),e.component("".concat(t,"dynamic-scroller-item"),dt),e.component("".concat(t,"DynamicScrollerItem"),dt)}var ht={version:"0.0.1",install:function(e,t){var i=Object.assign({},{installComponents:!0,componentsPrefix:""},t);for(var n in i)"undefined"!==typeof i[n]&&(ae[n]=i[n]);i.installComponents&&ut(e,i.componentsPrefix)}},mt=null;"undefined"!==typeof window?mt=window.Vue:"undefined"!==typeof i.g&&(mt=i.g.Vue),mt&&mt.use(ht);var pt=i(80366),ft=function(){var e=this,t=e._self._c;return t("div",{ref:"inboxItem",class:["inbox-item","tab-focus",{"inbox-border":!e.isString(e.inboxItem),"checked-item":!e.isString(e.inboxItem)&&e.isSelected,isSticky:e.isString(e.inboxItem),"split-view":e.isSplitView,"time-item":e.isDateCategoryHeader(e.inboxItem),"split-view-last-selected":e.splitViewSelected},e.isString(e.inboxItem)||e.inboxItem.threadHead.isUnread?"unread-item":"read-item"],on:{contextmenu:function(t){t.stopPropagation(),t.preventDefault(),e.inboxItem.isPlain?e.handleHideActions():e.handleShowActions(t,e.inboxItem)}}},[e.isDateCategoryHeader(e.inboxItem)?t("div",{staticClass:"inbox-item-title"},[e._v(" "+e._s(e.CATEGORY_DATE_FORMAT_MAP_DISPLAYNAME[e.inboxItem.value])+" ")]):t("div",{staticClass:"inbox-item-regular"},[t("div",{staticClass:"inbox-item-status"},[e.attachmentWithError?t("div",{staticClass:"with-error-attachment"},[t("i",{staticClass:"zm-icon-alert-triangle"})]):e._e(),"OUTBOX"!==e.inboxItem.labelId&&e.inboxItem.labelId!==e.escrowLabel?t("zm-checkbox-group",{attrs:{"aria-label":""},on:{change:e.handleCheckedItemsChange},model:{value:e.checkedList,callback:function(t){e.checkedList=t},expression:"checkedList"}},[t("zm-checkbox",{ref:"checkbox",class:[{"split-view-last-selected":e.splitViewSelected}],attrs:{id:e.inboxItem.threadId,label:e.inboxItem.threadId}},[e._v("   ")])],1):e.inboxItem.labelId===e.escrowLabel?t("div",{staticClass:"escrow-outlined"},[t("svg-icon",{class:[{"split-view-last-selected":e.splitViewSelected}],attrs:{iconClass:"escrow"}})],1):e._e()],1),t("div",{class:["inbox-item-content","tab-focus",{"display-unset":e.isSplitView}],attrs:{tabindex:"0",role:"button","aria-label":e.$t("list.showMailDetail")},on:{click:function(t){return t.preventDefault(),e.getDetail.apply(null,arguments)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.getDetail.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getDetail.apply(null,arguments)}]}},[t("div",{class:["inbox-item-left",e.isString(e.inboxItem)||e.inboxItem.threadHead.isUnread?"unread-item":"read-item",{"split-view":e.isSplitView,"split-view-last-selected":e.splitViewSelected}]},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.lastReadValid,expression:"lastReadValid"}],staticClass:"inbox-item-last-read"},[e._v(e._s(e.$t("list.lastRead")))]),t("div",{staticClass:"inbox-item-left-header"},["OUTBOX"!==e.inboxItem.labelId&&e.isLoadingDetail?t("div",[t("i",{staticClass:"zm-icon-loading"})]):!e.inboxItem.threadHead.isStarred&&!e.starHover||e.isNoActionFolder(e.inboxItem.labelId)?e.getInboxItemFirstEmail&&e.getInboxItemFirstName?t("Avatar",{staticClass:"head-img",attrs:{email:e.getInboxItemFirstEmail,name:e.getInboxItemFirstName}}):t("svg-icon",{staticClass:"draft-icon",attrs:{iconClass:"draft-filled"}}):t("zm-tooltip",{attrs:{content:e.inboxItem.threadHead.isStarred?e.$t("operation.markAsUnstarred"):e.$t("operation.markAsStarred"),placement:"bottom",enterable:!1}},[t("svg-icon",{class:[{"empty-star":!e.inboxItem.threadHead.isStarred&&e.starHover,"split-view-last-selected":e.splitViewSelected}],attrs:{iconClass:e.inboxItem.threadHead.isStarred?"starred-colored":"starred"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleMark(e.inboxItem,e.inboxItem.threadHead.isStarred?"UnStarred":"Starred")}}})],1)],1),t("div",{class:["inbox-item-left-name","much-hidden",{"split-view-last-selected":e.splitViewSelected}]},e._l(e.inboxItem.threadHead.userEmailStatusList,(function(i,n){return t("span",{key:n,style:{color:i.isDraft?"#E8173D":"",fontWeight:i.isUnread?"var(--text-bold)":"var(--text-normal)"}},e._l(e.senderInSearch(i.userEmail.displayName),(function(i,s){return t("span",{key:s},[i.searchTerm?t("span",{class:["highlight",{"split-view-last-selected":e.splitViewSelected}]},[e._v(e._s(i.searchTerm))]):t("span",{class:["unhighlight",{"split-view-last-selected":e.splitViewSelected}]},[e._v(e._s(i))]),t("span",{class:["unhighlight",{"split-view-last-selected":e.splitViewSelected}],style:{color:e.splitViewSelected?"var(--inbox-item-split-selected)":"var(--text-secondary)"}},[e._v(e._s(n!==e.inboxItem.threadHead.userEmailStatusList.length-1?", ":""))])])})),0)})),0),e.inboxItem.msgIds&&e.inboxItem.msgIds.length>1?t("div",{class:["inbox-item-left-num",{"split-view-last-selected":e.splitViewSelected}]},[e._v(" ("+e._s(e.inboxItem.msgIds&&e.inboxItem.msgIds.length)+") ")]):e._e()]),t("div",{staticClass:"inbox-item-right"},[t("div",{class:["content",{"display-unset":e.isSplitView}]},[e.labels.length>0&&!e.isSplitView&&!e.isOutlook?t("div",{staticClass:"content-labels"},[e._l(e.isSplitView?[]:e.labels.slice(0,e.maxNumVisibleLabels),(function(i){return t("label-flag",{key:i,attrs:{labelColor:e.userLabelIdObjectMap.get(i).backgroundColor,labelContent:e.getLabelContent(i)}})})),e.labels.length>e.maxNumVisibleLabels?t("zm-tooltip",[t("label-flag",{attrs:{labelContent:"+".concat(e.labels.length-e.maxNumVisibleLabels)}}),t("div",{staticClass:"content-labels content-labels-tooltip",attrs:{slot:"content"},slot:"content"},e._l(e.labels.slice(e.maxNumVisibleLabels),(function(i){return t("label-flag",{key:i,attrs:{labelColor:e.userLabelIdObjectMap.get(i).backgroundColor,labelContent:e.getLabelContent(i)}})})),1)],1):e._e()],2):e._e(),e.isLocalSearch(e.selectMailLabel.id)&&e.inboxItem.threadHead.subject?t("div",{class:["content-subject",!e.isString(e.inboxItem)&&e.inboxItem.threadHead.isUnread?"noRead":"",{"split-view-last-selected":e.splitViewSelected}]},e._l(e.subjectInSearch,(function(i,n){return t("span",{key:n},[i.searchTerm?t("span",{staticClass:"highlight"},[e._v(e._s(i.searchTerm))]):t("span",{staticClass:"unhighlight"},[e._v(e._s(i))])])})),0):t("div",{class:["content-subject",!e.isString(e.inboxItem)&&e.inboxItem.threadHead.isUnread?"noRead":"",{"split-view-last-selected":e.splitViewSelected}]},[e._v(" "+e._s(e.inboxItem.threadHead.subject?e.inboxItem.threadHead.subject:"(No Subject)")+" ")]),e.isLocalSearch(e.selectMailLabel.id)?t("div",{class:["content-snippet",{"split-view-last-selected":e.splitViewSelected}]},e._l(e.snippetInSearch,(function(i,n){return t("span",{key:n},[i.searchTerm?t("span",{class:["highlight",{"split-view-last-selected":e.splitViewSelected}]},[e._v(" "+e._s(i.searchTerm)+" ")]):t("span",{class:["unhighlight",{"split-view-last-selected":e.splitViewSelected}]},[e._v(e._s(e.cleanSnippet(i)))])])})),0):t("div",{class:["content-snippet",{"split-view-last-selected":e.splitViewSelected}]},[e._v(" "+e._s(e.cleanSnippet(e.inboxItem.threadHead.snippet))+" ")])]),t("div",{staticClass:"extras"},[t("div",{staticClass:"icons"},[e.inboxItem.threadHead.hasAttachment?t("svg-icon",{class:["attachment-icon",{"split-view-last-selected":e.splitViewSelected}],attrs:{iconClass:"clip"}}):e._e(),e.inboxItem.labelId===e.scheduledLabel?t("svg-icon",{class:["scheduled-time-icon",{"split-view-last-selected":e.splitViewSelected}],attrs:{iconClass:"scheduled"}}):e._e()],1),t("div",{class:["timestamp",e.inboxItem.threadHead.isUnread&&"timestamp__unread",{"timestamp-hidden":e.inboxItem.labelId!==e.escrowLabel,"scheduled-time":e.inboxItem.labelId===e.scheduledLabel,"split-view-last-selected":e.splitViewSelected}]},[e._v(" "+e._s(e.formatTime(e.inboxItem.threadHead.date))+" ")]),e.enableActions?t("div",{class:["item-action-wrap",{"split-view-hover-actions":e.isSplitView,"split-view-last-selected":e.splitViewSelected}]},[e.canMove2Inbox&&!e.isSplitView?t("zm-tooltip",{attrs:{content:"Move to Inbox",placement:"bottom",disabled:e.displayActionTooltip,enterable:!1}},[t("svg-icon",{attrs:{iconClass:"move",className:"label-btn-icon"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleMove(e.inboxItem)}}})],1):e._e(),"SPAM"!==e.inboxItem.labelId||e.isSplitView?e._e():t("zm-tooltip",{attrs:{content:"Not Spam",placement:"bottom",disabled:e.displayActionTooltip,enterable:!1}},[t("svg-icon",{attrs:{iconClass:"spam",className:"label-btn-icon"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSpam(e.inboxItem)}}})],1),e.showDeleteForever?t("zm-tooltip",{attrs:{content:"TRASH"===e.$store.state.selectMailLabel.id?"Delete forever":"Delete",placement:"bottom",disabled:e.displayActionTooltip,enterable:!1}},[t("svg-icon",{attrs:{iconClass:"delete",className:"label-btn-icon"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleDelete(e.inboxItem)}}})],1):e._e(),e.archiveStatus&&!e.isSplitView?t("zm-tooltip",{attrs:{content:"Archive",placement:"bottom",disabled:e.displayActionTooltip,enterable:!1}},[t("svg-icon",{attrs:{iconClass:"archive",className:"label-btn-icon"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleArchive(e.inboxItem)}}})],1):e._e(),e.isSplitView?e._e():t("zm-tooltip",{attrs:{content:"Mark as ".concat(e.inboxItem.threadHead.isUnread?"Read":"Unread"),placement:"bottom",disabled:e.displayActionTooltip,enterable:!1}},[t("svg-icon",{attrs:{iconClass:e.inboxItem.threadHead.isUnread?"read":"unread",className:"label-btn-icon"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleMark(e.inboxItem,e.inboxItem.threadHead.isUnread?"Read":"UnRead")}}})],1)],1):e._e(),e.inboxItem.labelId===e.scheduledLabel?t("div",{class:["item-action-wrap",{"split-view-last-selected":e.splitViewSelected}]},[t("zm-tooltip",{attrs:{content:e.$t("operation.cancelScheduled"),placement:"bottom",disabled:e.displayActionTooltip,enterable:!1}},[t("zm-button",{staticClass:"cancel-scheduled",attrs:{size:"mini"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.cancelScheduledSend([e.inboxItem.threadId])}}},[e._v(" "+e._s(e.$t("operation.cancelScheduled"))+" ")])],1)],1):e._e()])])])])])},vt=[],bt=i(30120),gt=i(11977),St=i(86598),It=i(71951),wt=I.Yb.SystemDefinedMailLabelIds,xt=I.e.labelUtil,yt={components:{SvgIcon:v.Z,LabelFlag:gt.Z,Avatar:St.Z},props:{isLoadingDetail:{type:Boolean,default:!1},inboxItem:{type:[Object,String]},displayActionTooltip:Boolean,selectInboxes:Array,lastReadInboxItem:String,lastSplitViewSelected:String},data:function(){return{checkedList:this.selectInboxes,attachments:[],starHover:!1,maxNumVisibleLabels:3,CATEGORY_DATE_FORMAT_MAP_DISPLAYNAME:It.Di}},computed:(0,c.Z)((0,c.Z)((0,c.Z)({},(0,d.rn)(["mailLabels","typeOfEmail","userProfile","searchString","inSearching","selectMailLabel","scaleRadio","isSplitView","showSplitDefault","splitViewSelectedMails"])),(0,d.Se)(["isOutlook"])),{},{splitViewSelected:function(){var e;return!(!this.$store.state.isSplitView||!this.$store.state.splitViewSelectedMails)&&(this.isSplitView&&(null===(e=this.$store.state.splitViewSelectedMails[this.$store.state.selectMailLabel.id])||void 0===e?void 0:e.threadId)===this.inboxItem.threadId)},senderInSearch:function(){var e=this;return this.searchString?function(t){return(0,ee._k)(t,[].concat((0,Y.Z)((0,ee.gE)(e.searchString)["default"]),(0,Y.Z)((0,ee.gE)(e.searchString).from)))}:function(e){return[e]}},subjectInSearch:function(){var e,t,i,n;return null!==(e=this.inboxItem)&&void 0!==e&&null!==(t=e.threadHead)&&void 0!==t&&t.subject?(0,ee._k)(this.inboxItem.threadHead.subject,[].concat((0,Y.Z)((0,ee.gE)(this.searchString)["default"]),(0,Y.Z)((0,ee.gE)(this.searchString).subject))):[null===(i=this.inboxItem)||void 0===i||null===(n=i.threadHead)||void 0===n?void 0:n.subject]},snippetInSearch:function(){var e,t,i,n;return null!==(e=this.inboxItem)&&void 0!==e&&null!==(t=e.threadHead)&&void 0!==t&&t.snippet?(0,ee._k)(this.inboxItem.threadHead.snippet,(0,ee.gE)(this.searchString)["default"]):[null===(i=this.inboxItem)||void 0===i||null===(n=i.threadHead)||void 0===n?void 0:n.snippet]},labels:function(){var e=this;return this.inboxItem.threadHead.showLabelIds.filter((function(t){return e.userLabelIdNameMap.has(t)}))},userLabelIdObjectMap:function(e){var t=e.mailLabels,i=e.userLabelIdNameMap,n=t.filter((function(e){var t=e.id;return i.get(t)}));return new Map(n.map((function(e){return[e.id,e]})))},userLabelIdNameMap:function(e){var t=e.mailLabels,i=e.isGmail,n=t.filter((function(e){return!e.isSystem||(0,ee["in"])(e.id)}));return new Map(n.map((function(e){var t=e.displayName;return i&&(t=e.name),[e.id,t]})))},getInboxItemFirstName:function(){var e=this.inboxItem.threadHead.userEmailStatusList.filter((function(e){return!/^\[(\d+ Drafts|Draft)\]$/.test(e.userEmail.displayName)}));return e.length>0?e[0].userEmail.displayName.toUpperCase():""},getInboxItemFirstEmail:function(){var e=this.inboxItem.threadHead.userEmailStatusList.filter((function(e){return"[Draft]"!==e.userEmail.displayName}));return e.length>0?e[0].userEmail.emailAddr:""},cachedUserLabels:function(e){var t=e.mailLabels;return t.filter((function(e){return!e.isSystem}))},userTimeZone:function(e){var t=e.userProfile;return t.userTimeZone},archiveStatus:function(){var e;return(0,ee.XP)(null===(e=this.inboxItem)||void 0===e?void 0:e.labelId)},lastReadValid:function(){return this.lastReadInboxItem===this.inboxItem.threadId&&"DRAFT"!==this.inboxItem.labelId&&"OUTBOX"!==this.inboxItem.labelId},canMove2Inbox:function(){var e=[xt.getInboxLabelId(),xt.getSpamLabelId(),xt.getDraftLabelId()];return-1===e.indexOf(this.inboxItem.labelId)},attachmentWithError:function(e){var t=e.inboxItem,i=["DRAFT"],n=i.indexOf(t.labelId)>-1,s=this.checkedList.indexOf(t.threadId)>-1,a=t.threadHead.attachmentList.some((function(e){return"Error"===e.downloadStatus}));return n&&a&&!s},isSelected:function(){return this.selectInboxes.includes(this.inboxItem.threadId)},enableActions:function(){return!this.isNoActionFolder(this.inboxItem.labelId)},escrowLabel:function(){return I.Yb.SystemDefinedMailLabelIds.ESCROW},scheduledLabel:function(){return I.Yb.SystemDefinedMailLabelIds.USER_SCHEDULED},showDeleteForever:function(){return(!this.isOutlook||this.inboxItem.labelId!==xt.getTrashLabelId())&&!(this.inboxItem.labelId===wt.TRASH&&"Zmail"!==this.typeOfEmail)}}),watch:{scaleRadio:function(e){this.$refs.inboxItem.style.zoom="".concat(100*e,"%")},selectInboxes:function(e){this.checkedList=e}},mounted:function(){!this.isString(this.inboxItem)&&this.$refs.checkbox&&this.$refs.checkbox.$el.addEventListener("mousedown",this.checkboxSelect),!this.isString(this.inboxItem)&&this.$refs.inboxItem&&(this.$refs.inboxItem.addEventListener("mouseenter",this.starredHover),this.$refs.inboxItem.addEventListener("mouseleave",this.starredUnhover)),this.$refs.inboxItem&&(this.$refs.inboxItem.style.zoom="".concat(100*this.scaleRadio,"%"))},beforeDestroy:function(){!this.isString(this.inboxItem)&&this.$refs.checkbox&&this.$refs.checkbox.$el.removeEventListener("mousedown",this.checkboxSelect),!this.isString(this.inboxItem)&&this.$refs.inboxItem&&(this.$refs.inboxItem.removeEventListener("mouseenter",this.starredHover),this.$refs.inboxItem.removeEventListener("mouseleave",this.starredUnhover))},methods:{checkboxSelect:function(e){e.shiftKey&&e.preventDefault()},starredHover:function(e){this.starHover=!0},starredUnhover:function(e){this.starHover=!1},substringSearch:function(e,t){var i=new Array(e.length).fill("0"),n=/[`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/,s=[];t.forEach((function(e){var t=e.split(n);s.push(t)})),s=s.flat(),s.forEach((function(t){var n=(0,Y.Z)(e.matchAll(new RegExp(t,"gi"))).map((function(e){return e.index}));n.forEach((function(e){for(var n=e;n<e+t.length;n++)i[n]="1"}))})),i=i.join("").match(/(.)\1*/g);var a=0,r=[];return i.forEach((function(t){"0"===t[0]?r.push(e.slice(a,a+t.length)):r.push({searchTerm:e.slice(a,a+t.length)}),a+=t.length})),r},getLabelNameById:function(e){return this.userLabelIdNameMap.has(e)?this.userLabelIdNameMap.get(e):""},getLabelContent:function(e){var t=this.userLabelIdObjectMap.get(e);return t?"DecryptFailed"===t.labelDecryptionStatus?this.$t("label.encrytedLabel"):t.isSystem?t.displayName:t.name:""},handleMove:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.$emit("handleMove",e);case 1:case"end":return i.stop()}}),i)})))()},handleDelete:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.$emit("handleDelete",e);case 1:case"end":return i.stop()}}),i)})))()},handleArchive:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.$emit("handleArchive",e);case 1:case"end":return i.stop()}}),i)})))()},handleSpam:function(e){this.$emit("handleSpam",e)},handleCheckedItemsChange:function(e){this.$emit("handleCheckedItemsChange",{threadId:this.inboxItem.threadId,status:e.length>0})},isString:function(e){return!!e.isPlain},isDateCategoryHeader:function(e){return"dateCategoryHeader"===e.type},formatTime:function(e){if("undefined"!==typeof e){var t=1e3*e,i={Upcoming:"LLL d",Today:"t","This Month":"LLL d","This Year":"LLL d"},n=(0,ee.Gt)(t),s=i[n]||"L/d/kk";return bt.ou.fromMillis(t).setZone(this.userTimeZone).toFormat(s)}return this.$t("time.notValidTime")},getDetail:function(){this.$emit("handleShowDetail",this.inboxItem)},handleHideActions:function(){this.$emit("handleHideActions")},handleShowActions:function(e,t){this.isNoActionFolder(t.labelId)||this.$emit("handleShowActions",{e:e,item:t})},handleMark:function(e,t){var i=this;return(0,l.Z)((0,o.Z)().mark((function n(){return(0,o.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:i.$emit("handleMark",{item:e,type:t});case 1:case"end":return n.stop()}}),n)})))()},isLocalSearch:function(e){return S.Z.isLocalSearch(e)},cleanSnippet:function(e){return(0,ee.X4)(e)},cancelScheduledSend:function(e){this.$emit("handleCancelScheduledSend",e,!0)},isNoActionFolder:function(e){return[I.Yb.SystemDefinedMailLabelIds.OUTBOX,I.Yb.SystemDefinedMailLabelIds.USER_SCHEDULED,I.Yb.SystemDefinedMailLabelIds.ESCROW].includes(e)}}},Lt=yt,Ct=(0,_.Z)(Lt,ft,vt,!1,null,"7659514b",null),$t=Ct.exports,kt=function(){var e=this,t=e._self._c;return t("div",{on:{click:function(e){return e.stopPropagation(),function(){}.apply(null,arguments)}}},[t("div",{staticClass:"enhanced-search"},[t("form",{staticClass:"searchbox",attrs:{name:"searchbox"},on:{submit:function(t){return t.preventDefault(),e.debounceHandleSubmit.apply(null,arguments)}}},[t("svg-icon",{staticClass:"search-icon",attrs:{iconClass:"search"}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInput,expression:"userInput"}],ref:"searchField",staticClass:"search-field",attrs:{type:"text",minlength:"1",placeholder:e.$t("search.searchMail")},domProps:{value:e.userInput},on:{input:function(t){t.target.composing||(e.userInput=t.target.value)}}}),t("input",{style:{display:"none"},attrs:{type:"submit"}}),t("span",{staticClass:"search-clear",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleClear.apply(null,arguments)}}},[e._v(" Clear ")]),t("span",{staticClass:"search-close",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleClose.apply(null,arguments)}}},[t("svg-icon",{style:{margin:"4px",width:"14px",height:"14px"},attrs:{iconClass:"close"}})],1)],1),t("br"),t("br"),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isGmail,expression:"isGmail"}],staticClass:"quick-search-actions"},[t("div",{class:e.hasAttachmentAction?"quick-action-active":"quick-action",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleAttachmentAction.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("search.hasAttachment"))+" ")]),t("div",{class:e.hasStarredAction?"quick-action-active":"quick-action",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleStarredAction.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("search.starred"))+" ")]),t("div",{class:e.hasFromMeAction?"quick-action-active":"quick-action",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleFromMeAction.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("search.fromMe"))+" ")])]),t("div",{staticClass:"recent-searches"},[t("div",{staticClass:"recent-searches-title"},[e._v(" "+e._s(e.$t("search.recentSearches"))+" ")]),e._l(e.recentSearches,(function(i){return t("div",{key:i},[t("div",{staticClass:"recent-item",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),function(t){return e.handleRecentClick(t,i)}.apply(null,arguments)}}},[t("svg-icon",{attrs:{iconClass:"recent-search"}}),t("span",{staticClass:"recent-item-text"},[e._v(e._s(i))])],1)])})),t("div",{directives:[{name:"show",rawName:"v-show",value:0===e.recentSearches.length,expression:"recentSearches.length === 0"}],staticClass:"no-recent-searches"},[t("div",{staticClass:"no-recent-searches-image"},[t("img",{attrs:{src:i(99391),alt:e.$t("search.noSearchHistory"),draggable:"false"}})]),t("div",{staticClass:"no-recent-searches-text"},[e._v(" "+e._s(e.$t("search.noSearchHistory"))+" ")])])],2),t("div",{directives:[{name:"show",rawName:"v-show",value:e.userInput.length>0,expression:"userInput.length > 0"}],staticClass:"view-all-searches",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.debounceHandleSubmit.apply(null,arguments)}}},[t("div",{staticClass:"view-all-searches-title"},[e._v(" "+e._s(e.$t("search.viewAll"))+" ")]),t("div",{staticClass:"view-all-searches-action"},[e._v(" "+e._s(e.$t("search.viewAllAction"))+" ")])])])])},Tt=[],_t=i(68571),Mt=20,Dt={name:"Search",props:{showSearch:{type:Boolean,default:!1}},data:function(){return{userInput:"",retryQueue:[],hasAttachmentAction:!1,hasStarredAction:!1,hasFromMeAction:!1,recentSearches:[]}},computed:(0,c.Z)((0,c.Z)({},(0,d.Se)(["isOutlook","isGmail"])),(0,d.rn)({searchRefresh:function(e){return e.searchRefresh||!1},cachedSearchString:function(e){return e.searchString},selectedMailLabel:function(e){return e.selectMailLabel},selectPrevLabel:function(e){return e.selectPrevLabel},mailLabels:function(e){return e.mailLabels},inFilters:function(e){return e.inFilters},maxNumberMailsPerRequest:function(e){return e.maxNumberMailsPerRequest},curSearchHash:function(e){return e.curSearchHash}})),watch:{showSearch:function(e){e&&this.$refs.searchField.focus()},userInput:function(e){e&&""!==e||this.$refs.searchField.focus()},searchRefresh:function(e){e&&(this.$store.commit("changeSearchRefresh",!1),this.search())},selectedMailLabel:function(e){if(!S.Z.isLocalSearch(null===e||void 0===e?void 0:e.id)){var t,i=e.isSystem?null===(t=g.Z[null===e||void 0===e?void 0:e.id])||void 0===t?void 0:t.id:e.name,n=null===e||void 0===e?void 0:e.id;this.$store.commit("clearSearchResults"),n===I.e.labelUtil.getInboxLabelId()||!i||this.isOutlook?(this.$store.commit("setSearchString",""),this.userInput=""):(this.$store.commit("setSearchString","in:".concat(i," ")),this.userInput="in:".concat(i," "))}}},mounted:function(){this.userInput=this.cachedSearchString.trim(),this.userInput&&(this.userInput+=" "),this.debounceHandleSubmit=(0,J.debounce)(this.handleSubmit,400,{leading:!0,trailing:!1})},beforeDestroy:function(){this.debounceHandleSubmit.cancel()},methods:(0,c.Z)((0,c.Z)({},(0,d.OI)(["setCurSearchHash"])),{},{handleRecentClick:function(e,t){this.userInput=t,this.handleSubmit(e)},handleAttachmentAction:function(){this.hasAttachmentAction=!this.hasAttachmentAction},handleStarredAction:function(){this.hasStarredAction=!this.hasStarredAction},handleFromMeAction:function(){this.hasFromMeAction=!this.hasFromMeAction},handleClear:function(){this.userInput=""},handleClose:function(){this.$emit("setShowSearch",!1)},trimWithSpace:function(e){return e?e.trim()+" ":""},handleSubmit:function(e){var t=this;e.preventDefault(),this.userInput=this.trimWithSpace(this.userInput),this.userInput&&(this.$store.commit("changeSearchStatus",!0),this.$store.commit("changeCurrentPage",1),this.search(!0),this.$nextTick((function(){var e;null===(e=t.$parent.$refs.recycleScroller)||void 0===e||e.scrollToPosition(0)})))},handleSearchArchive:function(){var e=this,t=this.mailLabels.find((function(e){return S.Z.isArchive(e.id)}));this.$store.commit("changeSearchStatus",!1),this.$store.commit("clearSearchResults"),this.$store.commit("changeInSearchBox",!1),this.$emit("searchFinished"),this.$store.commit("changeSelectMailLabel",t);var i=t.id.toLowerCase();this.$route.params.id!==i&&this.$router.push({name:"inbox",params:{id:i}}),this.$nextTick((function(){var t;null===(t=e.$parent.$refs.recycleScroller)||void 0===t||t.scrollToPosition(0)}))},search:function(){var e=arguments,t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n,s,a,r,c,d,u,h,m,p,f,v,b,g,I;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.length>0&&void 0!==e[0]&&e[0],s=t.userInput.trim().toLowerCase(),t.setCurSearchHash(s),t.$store.commit("changeInSearchBox",!0),t.$store.commit("changeInFilters",!1),t.handleClose(),""!==t.userInput.trim()){i.next=10;break}return t.$store.commit("changeSearchStatus",!1),t.$emit("searchFinished"),i.abrupt("return");case 10:if(a=["in:archive","is:archive","in:archived","is:archived","in:archives"],!a.includes(t.userInput.replace(" ",""))){i.next=14;break}return t.handleSearchArchive(),i.abrupt("return");case 14:return(t.cachedSearchString!==t.userInput||n)&&t.$store.commit("setSearchString",t.userInput),r=t.userInput,i.next=19,t.getSearchResultThreadIds(r,n);case 19:if(c=i.sent,d=c.labelId,u=c.threadIds,h=r.trim().toLowerCase(),m=t.recentSearches.indexOf(h),-1===m?(t.recentSearches.unshift(h),t.recentSearches.length>5&&t.recentSearches.pop()):(t.recentSearches.splice(m,1),t.recentSearches.unshift(h)),u&&0!==u.length){i.next=30;break}return t.$store.commit("changeSearchStatus",!1),t.userInput&&(S.Z.isLocalSearch(null===(p=t.selectedMailLabel)||void 0===p?void 0:p.id)||t.$store.commit("changeSelectPrevLabel",t.selectedMailLabel),t.$store.commit("changeSelectMailLabel",{id:It.v8}),t.$store.commit("changeInSearchBox",!0),t.$store.commit("changeInFilters",!1),"inbox"===t.$route.name&&S.Z.isLocalSearch(null===(f=t.$route.params)||void 0===f?void 0:f.id)||t.$router.push({name:"inbox",params:{id:It.v8}})),t.$emit("searchFinished"),i.abrupt("return");case 30:v=Mt,b=0,g=Math.floor(t.maxNumberMailsPerRequest/Mt);while(v)v--,I=u.splice(0,g),t.monoblockSearch({hash:s,labelId:d,threadIds:I}).then(function(){var e=(0,l.Z)((0,o.Z)().mark((function e(i){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(v<Mt&&i.length===g&&s===t.curSearchHash)){e.next=5;break}return e.next=3,t.$nextTick();case 3:t.$store.commit("changeSearchStatus",!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())["finally"]((function(){b++,b===Mt&&t.userInput&&t.$emit("searchFinished")}));case 34:case"end":return i.stop()}}),i)})))()},getSearchResultThreadIds:function(e,t){var i=this;return(0,l.Z)((0,o.Z)().mark((function n(){var s,a,r,l;return(0,o.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=!1,(e.includes("in:trash")||e.includes("in: trash"))&&(s=!0),(e.includes("is:trash")||e.includes("is: trash"))&&(s=!0),a=e,i.hasAttachmentAction&&(a+=" has:attachment"),i.hasStarredAction&&(a+=" is:starred"),i.hasFromMeAction&&(a+=" from:me"),n.next=9,window.zoomSdk.postJsMessage({functionName:"mailui_searchmails",params:{keyword:a,count:i.maxNumberMailsPerRequest,inSpamTrash:s,searchFromBegining:t}});case 9:if(r=n.sent,0===r.returnCode){n.next=15;break}return i.$emit("changeSearchErrorStatus",!0),i.$store.commit("changeIsLastPage",{type:It.v8,result:!1}),i.$emit("isLastPage",!1),n.abrupt("return",null);case 15:return i.$emit("changeSearchErrorStatus",!1),t&&i.$store.commit("clearSearchResults"),l=r.result.SearchMails,i.$store.dispatch("addListThreads",{ListThreads:l}),i.$store.commit("changeIsLastPage",{type:l.labelId,result:l.isLastPage}),i.$emit("isLastPage",l.isLastPage),n.abrupt("return",{labelId:l.labelId,threadIds:l.threadIds});case 22:case"end":return n.stop()}}),n)})))()},monoblockSearch:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n,s,a,r,l,c;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.hash,s=e.labelId,a=e.threadIds,!t.isOutlook){i.next=7;break}return i.next=4,t.doBatchSearch(s,a);case 4:i.t0=i.sent,i.next=10;break;case 7:return i.next=9,t.doSearch({hash:n,labelId:s,threadIds:a});case 9:i.t0=i.sent;case 10:return r=i.t0,r.forEach((function(e){n===t.curSearchHash&&t.$store.commit("addGetThreadHead",e)})),t.userInput&&(S.Z.isLocalSearch(null===(l=t.selectedMailLabel)||void 0===l?void 0:l.id)||t.$store.commit("changeSelectPrevLabel",t.selectedMailLabel),t.$store.commit("changeSelectMailLabel",{id:It.v8}),t.$store.commit("changeInSearchBox",!0),t.$store.commit("changeInFilters",!1),"inbox"===t.$route.name&&S.Z.isLocalSearch(null===(c=t.$route.params)||void 0===c?void 0:c.id)||t.$router.push({name:"inbox",params:{id:It.v8}})),i.abrupt("return",r);case 14:case"end":return i.stop()}}),i)})))()},doBatchSearch:function(e,t){var i=this;return(0,l.Z)((0,o.Z)().mark((function n(){var s;return(0,o.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e&&0!==t.length){n.next=2;break}return n.abrupt("return",[]);case 2:return n.prev=2,n.next=5,te.t.getAllThreadHead(e,t,!0);case 5:return s=n.sent,n.abrupt("return",s);case 9:return n.prev=9,n.t0=n["catch"](2),i.$emit("changeSearchErrorStatus",!0),n.abrupt("return",[]);case 13:case"end":return n.stop()}}),n,null,[[2,9]])})))()},doSearch:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n,s,a,r,l,c,d,u,h,m,p,f,v;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.hash,s=e.labelId,a=e.threadIds,0!==a.length){i.next=3;break}return i.abrupt("return",[]);case 3:return r=[],i.prev=4,i.next=7,te.t.experientialGetThreadsHead(s,a);case 7:l=i.sent,c=(0,W.Z)(l.entries());try{for(c.s();!(d=c.n()).done;)u=(0,_t.Z)(d.value,2),h=u[0],m=u[1],"fulfilled"===m.status?(p=m.value,f=p.result,v=p.returnCode,0===v?r.push(f):(t.retryQueue.push({labelId:s,threadId:a[h]}),t.retrySearch(n))):(t.retryQueue.push({labelId:s,threadId:a[h]}),t.retrySearch(n))}catch(o){c.e(o)}finally{c.f()}return i.abrupt("return",r);case 13:return i.prev=13,i.t0=i["catch"](4),t.$emit("changeSearchErrorStatus",!0),i.abrupt("return",[]);case 17:case"end":return i.stop()}}),i,null,[[4,13]])})))()},retrySearch:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n,s,a;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.retryQueue.length){i.next=2;break}return i.abrupt("return");case 2:n=t.retryQueue.pop(),s=n.labelId,a=n.threadId,te.t.getOneThreadHead(s,a).then(function(){var i=(0,l.Z)((0,o.Z)().mark((function i(n){return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(0===(null===n||void 0===n?void 0:n.returnCode)){i.next=2;break}return i.abrupt("return");case 2:return t.$store.commit("addGetThreadHead",n.result),i.next=7,t.$nextTick();case 7:e===t.curSearchHash&&t.$store.commit("changeSearchStatus",!1);case 9:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())["finally"]((function(){t.retryQueue.length||e!==t.curSearchHash||t.$store.commit("changeSearchStatus",!1)})),t.retrySearch(e);case 5:case"end":return i.stop()}}),i)})))()},clearRetryQueue:function(){this.retryQueue=[]}})},Et=Dt,At=(0,_.Z)(Et,kt,Tt,!1,null,"c079bc0e",null),Zt=At.exports,zt=function(){var e=this,t=e._self._c;return t("div",[e.showSelectionCount?t("zm-tabs",{staticClass:"selection-count",model:{value:e.selectedTabId,callback:function(t){e.selectedTabId=t},expression:"selectedTabId"}},[t("zm-tab-pane",{attrs:{label:e.getSelectionCountString(),name:e.selectedTabId}})],1):e.showTabs?t("zm-tabs",{model:{value:e.selectedTabId,callback:function(t){e.selectedTabId=t},expression:"selectedTabId"}},e._l(e.visibleCategoryTabIds,(function(i){return t("zm-tab-pane",{key:i,attrs:{label:e.getDisplayStringFromId(i),name:i}})})),1):t("zm-tabs",{model:{value:e.selectedTabId,callback:function(t){e.selectedTabId=t},expression:"selectedTabId"}},[t("zm-tab-pane",{attrs:{label:e.getDisplayStringFromId(e.selectedTabId),name:e.selectedTabId}})],1)],1)},Rt=[],Ht=I.Yb.SystemDefinedCategoryIds,Ot={name:"CategoryTabs",props:{selectionCount:{type:Number,default:0}},data:function(){return{selectedTabId:"",categoryIds:Object.values(Ht),omittedCategoryIds:[Ht.GROUP_APPROVAL]}},computed:(0,c.Z)((0,c.Z)((0,c.Z)({},(0,d.rn)(["mailLabels","selectMailLabel","GetThreadHead","inFilters"])),(0,d.Se)(["isGmail","isOutlook"])),{},{visibleCategoryTabIds:function(){var e=this,t=this.categoryIds.filter((function(t){return!e.omittedCategoryIds.includes(t)})).filter((function(t){return e.mailLabels.find((function(e){return e.id===t}))})),i=I.e.labelUtil.getInboxLabelId();return[i].concat((0,Y.Z)(t))},showSelectionCount:function(){return this.selectionCount>0},showTabs:function(){return this.visibleCategoryTabIds.includes(this.selectedTabId)}}),watch:{selectMailLabel:{handler:function(e){e&&!this.inFilters&&(this.selectedTabId=e.id)},immediate:!0},selectedTabId:function(e){var t=this.mailLabels.find((function(t){return t.id.toUpperCase()===e.toUpperCase()}));t&&this.$store.commit("changeSelectMailLabel",t)}},methods:{getSelectionCountString:function(){var e=this.getCount(this.selectedTabId,!0),t=this.selectionCount===e,i=t?"".concat(this.$t("common.all")," ").concat(e):this.selectionCount;return"".concat(this.$t("common.selected")," (").concat(i,")")},getLabelFromId:function(e){return this.mailLabels.find((function(t){return t.id===e}))},getDisplayStringFromId:function(e){var t=this.categoryIds.includes(e),i=this.getName(e),n=this.getCount(e);return t||n<=0?i:"".concat(i," (").concat(n,")")},getCount:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e===It.v8){var i=this.GetThreadHead[It.v8];return Object.keys(i).length}var n,s,a=this.getLabelFromId(e);return a?t?null===(n=a.count)||void 0===n?void 0:n.threadsTotal:null===(s=a.count)||void 0===s?void 0:s.threadsUnread:0},getName:function(e){if(e===It.v8)return this.$t("search.searchResults");var t=this.getLabelFromId(e);return t?this.getLabelName(t):""},getLabelName:function(e){var t,i;return e.isSystem?this.isOutlook?(null===(i=C[e.name])||void 0===i?void 0:i.displayName)||"":e.id&&(null===(t=g.Z[e.id])||void 0===t?void 0:t.displayName)||"":this.isGmail?(0,f.X)(e.name):"DecryptFailed"===e.labelDecryptionStatus?this.$t("label.encrytedLabel"):e.name}}},Pt=Ot,Ft=(0,_.Z)(Pt,zt,Rt,!1,null,"70c535aa",null),Nt=Ft.exports,Ut=function(){var e=this,t=e._self._c;return t("div",{class:{"split-view":e.isSplitView}},[e.currentLabelId===e.escrowLabel?t("div",{staticClass:"control-header"}):t("div",{ref:"controlHeader",staticClass:"control-header"},[t("div",{staticClass:"check-all-container"},[t("zm-checkbox",{attrs:{indeterminate:e.isIndeterminate,controls:Object.keys(e.GetThreadHead).join(" ")},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}}),t("zm-dropdown",{attrs:{trigger:"click",placement:"bottom"},on:{command:e.handleCheckMore}},[t("span",{staticClass:"zm-dropdown-link"},[t("svg-icon",{attrs:{iconClass:"triangle-down"}})],1),t("zm-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("zm-dropdown-item",{staticClass:"clearfix",attrs:{command:"All"}},[t("span",[e._v(e._s(e.$t("select.all")))])]),t("zm-dropdown-item",{staticClass:"clearfix",attrs:{command:"None"}},[t("span",[e._v(e._s(e.$t("select.none")))])]),t("zm-dropdown-item",{staticClass:"clearfix",attrs:{command:"Read"}},[t("span",[e._v(e._s(e.$t("select.read")))])]),t("zm-dropdown-item",{staticClass:"clearfix",attrs:{command:"Unread"}},[t("span",[e._v(e._s(e.$t("select.unread")))])]),t("zm-dropdown-item",{staticClass:"clearfix",attrs:{command:"Starred"}},[t("span",[e._v(e._s(e.$t("select.starred")))])]),t("zm-dropdown-item",{staticClass:"clearfix",attrs:{command:"Unstarred"}},[t("span",[e._v(e._s(e.$t("select.unstarred")))])])],1)],1)],1),t("inbox-filters",{directives:[{name:"show",rawName:"v-show",value:e.enableQuickFilter&&!e.selectedInboxItems.length,expression:"enableQuickFilter && !selectedInboxItems.length"}],ref:"inboxFilters",on:{searchFinished:e.setLoadingState,isLastPage:e.setIsLastPage,changeSearchErrorStatus:e.changeSearchErrorStatus}}),e.selectInboxes.length>0?t("div",{staticClass:"multi-actions"},[e._l(e.headerOptions,(function(i){return t("div",{key:i.id},["label"===i.id?t("label-menu",{attrs:{selectedInboxItems:e.selectedInboxItems},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("HeaderAction",{attrs:{hideLabel:e.isSplitView,labelMenu:!0,"icon-class":e.getActionIconClass(i.id),tooltip:e.getActionTooltip(i.id),label:e.getActionLabel(i.id)}})]},proxy:!0}],null,!0)}):"cancelScheduled"===i.id?t("div",{attrs:{"ax-title":e.$t("operation.cancelScheduled")},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),i.command()}}},[t("zm-button",{staticClass:"header-button",attrs:{size:"mini"}},[e._v(" "+e._s(e.$t("operation.cancelScheduled"))+" ")])],1):"discardDraft"===i.id?t("div",{attrs:{"ax-title":e.$t("operation.discardDrafts")},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),i.command()}}},[t("zm-button",{staticClass:"header-button",attrs:{size:"mini"}},[e._v(" "+e._s(e.$t("operation.discardDrafts"))+" ")])],1):t("HeaderAction",{attrs:{hideLabel:e.isSplitView,"icon-class":e.getActionIconClass(i.id),tooltip:e.getActionTooltip(i.id),label:e.getActionLabel(i.id)},on:{click:function(e){return i.command()}}})],1)})),e.moreOptions.length>0||"SPAM"===e.currentLabelId&&e.isZmail?t("zm-dropdown",{attrs:{trigger:"click",placement:"bottom-start"},on:{"visible-change":e.handleMoreButtonActive,command:e.handleActions}},[t("HeaderAction",{attrs:{iconClass:"more-horizontal",moreActive:e.moreActive,hideLabel:"",label:e.$t("common.moreOptions")}}),t("zm-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e._l(e.moreOptions,(function(i){return t("div",{key:i.id},["label"===i.id?t("label-menu",{attrs:{selectedInboxItems:e.selectedInboxItems},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("HeaderAction",{attrs:{"icon-class":e.getActionIconClass(i.id),tooltip:e.getActionTooltip(i.id),label:e.getActionLabel(i.id),hideTooltip:""}})]},proxy:!0}],null,!0)}):t("HeaderAction",{attrs:{tooltip:e.getActionTooltip(i.id),label:e.getActionLabel(i.id),moreMenu:!0,hideTooltip:""},on:{click:function(e){return i.command()}}})],1)})),e.isZmail&&1===e.selectInboxes.length&&"SPAM"===e.currentLabelId?t("zm-dropdown-item",{attrs:{command:"showApproveDialog"}},[e._v(" "+e._s(e.$t("operation.approve"))+' "'+e._s(e.selectedUserEmail.displayName)+'" ')]):e._e()],2)],1):e._e()],2):e._e(),e.isPaginated?t("div",{staticClass:"page-index"},[e._v(" "+e._s("".concat(e.currentPage," of ").concat(e.pageCount||"many"))+" ")]):e._e(),e.isPaginated?t("div",{staticClass:"inbox-page-nav"},[t("zm-tooltip",{staticClass:"tab-focus",attrs:{content:"'Previous Page'",placement:"bottom"}},[t("div",{class:e.noMorePrev||e.isLoading?"pagePrev-disabled":"pagePrev",on:{click:function(t){t.stopPropagation(),t.preventDefault(),!e.noMorePrev&&!e.isLoading&&e.prevPage()}}},[t("i",{staticClass:"zm-icon-left"})])]),t("zm-tooltip",{staticClass:"tab-focus",attrs:{content:"Next Page",placement:"bottom"}},[t("div",{class:e.noMoreNext||e.isLoading?"pageNext-disabled":"pageNext",on:{click:function(t){t.stopPropagation(),t.preventDefault(),!e.noMoreNext&&!e.isLoading&&e.nextPage()}}},[t("i",{staticClass:"zm-icon-right"})])])],1):e._e()],1)])},Vt=[],Bt=function(){var e=this,t=e._self._c;return t("div",{class:["inbox-filters",e.inFilters&&"inbox-filters__active"]},[t("zm-dropdown",{attrs:{trigger:"click",placement:"bottom"},on:{command:e.handleInboxFilter}},[t("span",{staticClass:"filter-icon"},[t("svg-icon",{attrs:{iconClass:"filter"}}),e.inFilters?t("svg-icon",{style:{margin:"3px 2px 3px 7px",width:"10px",height:"10px",color:"red"},attrs:{iconClass:"close"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),function(){return e.handleInboxFilter("None")}.apply(null,arguments)}}}):e._e()],1),t("zm-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("zm-dropdown-item",{staticClass:"clearfix",attrs:{command:"Unread"}},[t("span",[e._v(e._s(e.$t("select.unread")))])])],1)],1)],1)},Gt=[],jt={data:function(){return{userInput:this.cachedSearchString}},computed:(0,c.Z)((0,c.Z)({},(0,d.Se)(["isOutlook"])),(0,d.rn)({filterRefresh:function(e){return e.filterRefresh},cachedSearchString:function(e){return e.searchString},selectMailLabel:function(e){return e.selectMailLabel},selectPrevLabel:function(e){return e.selectPrevLabel},mailLabels:function(e){return e.mailLabels},currentInboxFilter:function(e){return e.currentInboxFilter},inFilters:function(e){return e.inFilters}})),watch:{cachedSearchString:function(e){this.userInput=e}},methods:{handleInboxFilter:function(e){var t=this;if(e!==this.currentInboxFilter&&this.$store.commit("clearSearchResults"),this.$store.commit("changeFilterStatus",!0),this.$store.commit("setCurrentInboxFilter",e),"None"===e){var i,n,s="inbox";if(null!==(i=this.selectPrevLabel)&&void 0!==i&&i.id)this.$store.commit("changeSelectMailLabel",this.selectPrevLabel),s=this.selectPrevLabel.id.toLowerCase();else this.$store.commit("changeSelectMailLabel",this.mailLabels[0]),s=null===(n=this.mailLabels[0])||void 0===n?void 0:n.id.toLowerCase();return this.$router.push({name:"inbox",params:{id:s}}),this.$nextTick((function(){var e;null===(e=t.$parent.$refs.recycleScroller)||void 0===e||e.scrollToPosition(0)})),this.$store.commit("clearSearchResults"),this.$store.commit("changeFilterStatus",!1),void this.$store.commit("changeInFilters",!1)}this.filterSearch(!0)},filterSearch:function(){var e=arguments,t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n,s,a,r,l,c,d,u,h;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=e.length>0&&void 0!==e[0]&&e[0],t.$store.commit("changeFilterRefresh",!1),r=t.inFilters,i.next=6,t.doFilterSearch(a);case 6:if(l=i.sent,c=(0,_t.Z)(l,2),d=c[0],u=c[1],!r||t.inFilters){i.next=12;break}return i.abrupt("return");case 12:0===(null===d||void 0===d?void 0:d.returnCode)?(h=d.result.SearchMails,t.$store.dispatch("addListThreads",{ListThreads:h}),t.$store.commit("changeIsLastPage",{type:h.labelId,result:h.isLastPage}),u.forEach((function(e){r&&!t.inFilters||t.$store.commit("addGetThreadHead",e)})),t.$emit("isLastPage",h.isLastPage)):(t.$store.commit("changeIsLastPage",{type:It.v8,result:!1}),t.$emit("isLastPage",!1)),S.Z.isLocalSearch(null===(n=t.selectMailLabel)||void 0===n?void 0:n.id)||t.$store.commit("changeSelectPrevLabel",t.selectMailLabel),t.$store.commit("changeSelectMailLabel",{id:It.v8}),t.$store.commit("changeInFilters",!0),"inbox"===t.$route.name&&S.Z.isLocalSearch(null===(s=t.$route.params)||void 0===s?void 0:s.id)||t.$router.push({name:"inbox",params:{id:It.v8}}),t.$store.commit("changeFilterStatus",!1),t.$emit("searchFinished");case 19:case"end":return i.stop()}}),i)})))()},doFilterSearch:function(){var e=arguments,t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n,s,a,r,l,c,d,u,h,m;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=e.length>0&&void 0!==e[0]&&e[0],r=t.mailLabels[0].id,S.Z.isLocalSearch(null===(n=t.selectMailLabel)||void 0===n?void 0:n.id)?null!==(s=t.selectPrevLabel)&&void 0!==s&&s.id&&(r=t.selectPrevLabel.isSystem||t.isOutlook?t.selectPrevLabel.id:t.selectPrevLabel.name):r=null!==(l=t.selectMailLabel)&&void 0!==l&&l.isSystem||t.isOutlook?t.selectMailLabel.id:t.selectMailLabel.name,S.Z.isArchive(r)&&(r="ARCHIVE"),"is:".concat(t.currentInboxFilter," in:").concat(r),i.prev=6,i.next=9,window.zoomSdk.postJsMessage({functionName:"mailui_searchmails",params:{keyword:"",count:t.$store.state.maxNumberMailsPerRequest,inSpamTrash:"SPAM"===t.selectMailLabel.id||"TRASH"===t.selectMailLabel.id,advSearch:{inLabelId:r,isUnread:"Unread"===t.currentInboxFilter,isStarred:!1},searchFromBegining:a}});case 9:if(c=i.sent,d=[],0!==c.returnCode){i.next=18;break}if(u=c.result.SearchMails,h=u.labelId,m=u.threadIds,t.$emit("changeSearchErrorStatus",!1),!(m.length>0)){i.next=18;break}return i.next=17,te.t.getAllThreadHead(h,m,t.isOutlook);case 17:d=i.sent;case 18:return i.abrupt("return",[c,d]);case 21:return i.prev=21,i.t0=i["catch"](6),t.$emit("changeSearchErrorStatus",!0),i.abrupt("return",[]);case 26:case"end":return i.stop()}}),i,null,[[6,21]])})))()}}},Wt=jt,Yt=(0,_.Z)(Wt,Bt,Gt,!1,null,"68b7bb28",null),Xt=Yt.exports,qt=i(84254),Jt=i(68020),Kt=I.Yb.OUTLOOK_SYSTEM_FOLDER_NAME,Qt={None:0,Some:1,All:2},ei={components:{inboxFilters:Xt,LabelMenu:qt.Z,HeaderAction:Jt.Z},props:{selectInboxes:{type:Array,default:[]},isLoading:{type:Boolean,default:!1},headerOptions:{type:Array,default:[]},moreOptions:{type:Array,default:[]}},data:function(){return{checkAll:!1,isIndeterminate:!1,moreActive:!1}},computed:(0,c.Z)((0,c.Z)((0,c.Z)({},(0,d.rn)(["ListThreads","selectMailLabel","inFilters","inSearching","currentPage","isLastPage","mailLabels","maxNumberMailsPerRequest","isPaginated","isSplitView"])),(0,d.Se)(["isGmail","isZmail","isOutlook"])),{},{selectedUserEmail:function(){var e,t=this.selectInboxes[0],i=this.GetThreadHead[t],n=i.threadHead.userEmailStatusList;return null===(e=n[n.length-1])||void 0===e?void 0:e.userEmail},markRead:function(){var e=this;return this.selectInboxes.filter((function(t){return e.GetThreadHead&&e.GetThreadHead[t]&&e.GetThreadHead[t].threadHead.isUnread})).length>0},markStarred:function(){var e=this;return this.selectInboxes.filter((function(t){return e.GetThreadHead&&e.GetThreadHead[t]&&!e.GetThreadHead[t].threadHead.isStarred})).length>0},enableQuickFilter:function(){var e,t,i;if(this.inFilters)return!0;if(this.inSearching)return!1;var n=!(null!==(e=this.selectMailLabel)&&void 0!==e&&e.isSystem),s=this.isOutlook?[Kt.INBOX,Kt.DELETED_ITEMS,Kt.JUNK_EMAIL].includes(null===(t=this.selectMailLabel)||void 0===t?void 0:t.name):["INBOX","STARRED","SPAM","TRASH","BLOCKED"].includes(null===(i=this.selectMailLabel)||void 0===i?void 0:i.id);return n||s},currentLabelId:function(){var e;return null===(e=this.selectMailLabel)||void 0===e?void 0:e.id},currentThreadList:function(){return this.ListThreads&&this.ListThreads[this.currentLabelId]&&this.ListThreads[this.currentLabelId].ListThreads&&this.ListThreads[this.currentLabelId].ListThreads.threadIds||[]},selectedInboxItems:function(){var e=this;return this.selectInboxes.filter((function(t){return e.GetThreadHead[t]})).map((function(t){return{groupId:t,msgIds:e.GetThreadHead[t].msgIds}}))},selectedStatus:function(){return this.currentThreadList.length<1||this.selectedInboxItems.length<1?Qt.None:this.selectedInboxItems.length===Object.keys(this.GetThreadHead).length?Qt.All:Qt.Some},GetThreadHead:function(){return this.$store.state.GetThreadHead[this.currentLabelId]||{}},escrowLabel:function(){return I.Yb.SystemDefinedMailLabelIds.ESCROW}}),watch:{selectedStatus:{handler:function(e){switch(e){case Qt.None:this.checkAll=!1,this.isIndeterminate=!1,this.moreActive=!1;break;case Qt.Some:this.checkAll=!1,this.isIndeterminate=!0;break;case Qt.All:this.checkAll=!0,this.isIndeterminate=!1;break}},immediate:!0}},methods:{getActionIconClass:function(e){switch(e){case"star":return this.markStarred?"star":"unstar";case"moveToInbox":return"move";case"archive":return"archive";case"delete":return"delete";case"spam":return"spam";case"readUnread":return this.markRead?"read":"unread";case"label":return this.isOutlook?"folder":"stroke";case"phishing":return"phishing";case"createFilterFrom":return"funnel";default:return""}},getActionLabel:function(e){switch(e){case"star":return this.$t(this.markStarred?"operation.star":"operation.removeStar");case"moveToInbox":return this.$t("operation.moveToInbox");case"archive":return this.$t("operation.archive");case"delete":return this.$t(this.currentLabelId===I.e.labelUtil.getTrashLabelId()?"operation.deleteForever":"operation.delete");case"spam":return this.$t(this.currentLabelId===I.e.labelUtil.getSpamLabelId()?"operation.notSpam":"operation.spam");case"readUnread":return this.$t("operation.markAs",[this.markRead?this.$t("select.read"):this.$t("select.unread")]);case"label":return this.isOutlook?this.$t("label.folderAction"):this.$t("operation.label");case"phishing":return this.$t("operation.reportPhishing");case"createFilterFrom":return this.$t("operation.createFilterFromMessages");default:return""}},getActionTooltip:function(e){switch(e){case"star":return this.$t("operation.markAs",[this.markStarred?"Starred":"Unstarred"]);default:return""}},handleActions:function(e){this.$emit("handleActions",e)},showApproveDialog:function(){this.$emit("showApproveDialog")},handleCheckMore:function(e){this.$emit("handleCheckMore",e)},setIsLastPage:function(e){this.$emit("setIsLastPage",e)},changeSearchErrorStatus:function(e){this.$emit("changeSearchErrorStatus",e)},setLoadingState:function(){this.$emit("setLoadingState")},handleCheckAllChange:function(e){this.$emit("handleCheckAllChange",e)},prevPage:function(){this.$emit("setSelectInboxes",[]),this.checkAll=!1,this.isIndeterminate=!1,this.$store.commit("changeCurrentPage",this.currentPage-1)},nextPage:function(){this.$emit("setSelectInboxes",[]),this.checkAll=!1,this.isIndeterminate=!1,this.$emit("handleRefresh"),this.$store.commit("changeCurrentPage",this.currentPage+1)},mailCount:function(){var e=this;return S.Z.isLocalSearch(this.selectMailLabel.id)||S.Z.isArchive(this.selectMailLabel.id)?this.isLastPage.get(this.selectMailLabel.id)?this.ListThreads[this.selectMailLabel.id]["ListThreads"]["threadIds"].length:null:this.mailLabels.find((function(t){return t.id===e.selectMailLabel.id})).count.threadsTotal},pageCount:function(){return null===this.mailCount?null:Math.ceil(this.mailCount/this.maxNumberMailsPerRequest)},noMorePrev:function(){return 1===this.currentPage},noMoreNext:function(){return this.currentPage===this.pageCount},handleMoreButtonActive:function(){this.moreActive=!this.moreActive}}},ti=ei,ii=(0,_.Z)(ti,Ut,Vt,!1,null,"89e15556",null),ni=ii.exports,si=i(48244),ai=i(69969),ri=i(95740),oi=i(88767),li=i(96802),ci=function(){var e=this,t=e._self._c;return t("zm-dropdown",[e._t("trigger"),t("zm-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("zm-dropdown-item",[t("div",{staticClass:"settings-dropdown-item",on:{click:e.enterSettings}},[t("svg-icon",{attrs:{iconClass:"setting"}}),e._v(" "+e._s(e.$t("operation.emailPreferences"))+" ")],1)]),t("a",{attrs:{href:"https://zoom.sjc1.qualtrics.com/jfe/form/SV_dmAxDuAFUQju4su"}},[t("zm-dropdown-item",[t("div",{staticClass:"settings-dropdown-item"},[t("svg-icon",{attrs:{iconClass:"form"}}),e._v(" "+e._s(e.$t("operation.submitFeedback"))+" ")],1)])],1)],1)],2)},di=[],ui={name:"SettingsDropdown",methods:{enterSettings:function(){this.$emit("enterSettings")}}},hi=ui,mi=(0,_.Z)(hi,ci,di,!1,null,"0f703f4f",null),pi=mi.exports,fi=i(63012),vi=I.Yb.SystemDefinedMailLabelIds,bi=I.Yb.OUTLOOK_SYSTEM_FOLDER_NAME,gi={name:"Inbox",components:{inboxItem:$t,RecycleScroller:et,CategoryTabs:Nt,Search:Zt,controlHeader:ni,SvgIcon:v.Z,detail:se.Z,ConfirmDialog:ai.Q,AddFilterDialog:si["default"],SettingsDropdown:pi},mixins:[pt.Z],data:function(){var e=this;return{version:li.Z.version,showGetStartedModal:!1,xDir:0,errorStatus:!1,searchErrorStatus:!1,isLocalLastPage:!1,index:0,refreshRun:!1,showSearch:!1,selectInboxes:[],selectedMailInThread:null,lastSelectedInboxItem:null,lastSelectedInboxItemFocused:!1,lastSplitViewSelected:null,lastReadInboxItem:"",responseItemMailLabels:[],storedTime:null,isIndeterminate:!1,checkAll:!1,showActions:!1,selectItem:{},actionX:0,actionY:0,allContextMenuSendersAreSelf:!0,allSelectedSendersAreSelf:!0,currentLoadingInboxDetailThreadId:"",filteredThreadHeads:{},loadingState:{},showApproveUserDialog:!1,approveInfo:{},approveUserActions:[{id:"cancel",className:"cancel-report-spam",handler:this.cancelApprove,text:this.$t("operation.cancel")},{id:"blockUser",className:"report-spam",handler:this.approveUser,text:this.$t("operation.approve"),type:"primary"}],allOptions:[{id:"delete",getContent:function(){if(e.currentLabelId===I.e.labelUtil.getTrashLabelId()){if(e.isZmail)return e.$t("operation.deleteForever")}else e.$t("operation.delete")},command:function(){return e.handleTrash("all")}},{id:"star",getContent:function(){return e.$t("operation.markAs",[e.markStarred?e.$t("select.starred"):e.$t("select.unstarred")])},command:function(){return e.handleMark("all",e.markStarred?"Starred":"UnStarred")}},{id:"spam",getContent:function(){return e.spamStatus},command:function(){e.isGmail?e.reportSpam(e.selectInboxes):e.isZmail&&(e.currentLabelId===I.Yb.SystemDefinedMailLabelIds.SPAM?e.reportSpam(e.selectInboxes):e.moveThreadsToSpam(e.selectedInboxItems))}},{id:"label",getContent:function(){return e.$t("label.labels")},command:function(){}},{id:"moveToInbox",getContent:function(){return e.$t("operation.moveToInbox")},command:function(){return e.handleItemMove("selectInboxes")}},{id:"readUnread",getContent:function(){return e.$t("operation.markAs",[e.markRead?e.$t("select.read"):e.$t("select.unread")])},command:function(){return e.handleMark("all",e.markRead?"Read":"UnRead")}},{id:"archive",getContent:function(){return e.$t("operation.archive")},command:function(){return e.handleItemArchive("selectInboxes")}},{id:"phishing",getContent:function(){return e.$t("operation.reportPhishing")},command:function(){e.isGmail?e.handleReportPhishing():e.isZmail&&e.currentLabelId!==I.Yb.SystemDefinedMailLabelIds.SPAM&&e.moveThreadsToSpam(e.selectedInboxItems)}},{id:"cancelScheduled",getContent:function(){return"Cancel Send"},command:function(){return e.handleCancelScheduledSend(e.selectInboxes)}},{id:"discardDraft",getContent:function(){return e.$t("operation.discardDrafts")},command:function(){return e.handleTrash("all")}},{id:"createFilterFrom",getContent:function(){return e.$t("operation.createFilterFromMessages")},command:function(){return e.$refs.addFilterDialog.open()}}].map((function(e){return(0,c.Z)((0,c.Z)({},e),{},{displayAtCurrentLabel:!1,displayAtHeader:!1,displayAtMore:!1})})),showReportPhishingDialog:!1,reportPhishingActions:[{id:"cancelPhishing",className:"cancel-report-spam",handler:function(){e.showReportPhishingDialog=!1},text:this.$t("operation.cancel")},{id:"reportPhishing",className:"report-spam",handler:function(){var t=(0,l.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showReportPhishingDialog=!1,t.next=3,e.reportPhishing(e.selectInboxes);case 3:e.selectInboxes=[];case 4:case"end":return t.stop()}}),t)})));function i(){return t.apply(this,arguments)}return i}(),text:this.$t("operation.report"),type:"primary"}]}},computed:(0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)({},(0,d.rn)(["isOffline","typeOfEmail","isSearchingMails","isFilteringMails","inSearching","searchString","inFilters","maxNumberMailsPerRequest","isTestClient","showDetail","mailLabels","selectMailLabel","selectPrevLabel","ListThreads","isLastPage","LastInboxRefreshDate","currentPage","isPaginated","scrollPositionY","scaleRadio","isSplitView","showSplitDefault","splitViewSelectedMails","userProfile"])),(0,d.rn)("auth",["isFirstLogin"])),(0,d.Se)(["isGmail","sidebarMenuWidth","isZmail","isOutlook"])),{},{listText:function(){var e,t=(e={},(0,w.Z)(e,vi.INBOX,"list.noDetailSelected"),(0,w.Z)(e,vi.STARRED,"list.noEmailsInStarred"),(0,w.Z)(e,vi.DRAFT,"list.noEmailsInDrafts"),(0,w.Z)(e,vi.SENT,"list.noEmailsInSent"),(0,w.Z)(e,vi.TRASH,"list.noEmailsInTrash"),(0,w.Z)(e,vi.ARCHIVE,"list.noEmailsInArchive"),(0,w.Z)(e,vi.SPAM,"list.noEmailsInSpam"),(0,w.Z)(e,vi.BLOCKED,"list.noEmailsInBlocked"),e);return this.$t(t[this.currentLabelId])||this.$t("list.noEmailsInLabel")},isDetailInList:function(){var e=this,t=this.mails.findIndex((function(t){var i;return t.threadId===(null===(i=e.$store.state.splitViewSelectedMails[e.currentLabelId])||void 0===i?void 0:i.threadId)}));return-1!==t},mailCount:function(){var e=this;return S.Z.isLocalSearch(this.selectMailLabel.id)||S.Z.isArchive(this.selectMailLabel.id)?this.isLastPage.get(this.selectMailLabel.id)?this.ListThreads[this.selectMailLabel.id]["ListThreads"]["threadIds"].length:null:this.mailLabels.find((function(t){return t.id===e.selectMailLabel.id})).count.threadsTotal},filterEdits:function(){var e,t,i,n,s=this,a="";if(this.showDetail)a=null===(i=this.selectedMailInThread)||void 0===i||null===(n=i.from)||void 0===n?void 0:n.emailAddr;else if(null!==(e=this.selectItem)&&void 0!==e&&null!==(t=e.threadHead)&&void 0!==t&&t.userEmailStatusList){var r,o,l,c;a=null===(r=this.selectItem)||void 0===r||null===(o=r.threadHead)||void 0===o||null===(l=o.userEmailStatusList[0])||void 0===l||null===(c=l.userEmail)||void 0===c?void 0:c.emailAddr}else if(this.selectInboxes.length>0){var d=[];this.selectInboxes.forEach((function(e){var t,i,n,a,r=null===(t=s.GetThreadHead[e])||void 0===t||null===(i=t.threadHead)||void 0===i||null===(n=i.userEmailStatusList[0])||void 0===n||null===(a=n.userEmail)||void 0===a?void 0:a.emailAddr;r&&"string"===typeof r&&d.push(r)})),a=(0,Y.Z)(new Set(d)).join(" OR ")}return{id:"",criteria:{from:a,to:"",subject:"",query:"",negatedQuery:"",hasAttachment:!1,excludeChats:!1,size:"",sizeComparison:"larger"},action:{removeLabelIds:[],addLabelIds:[]}}},pageCount:function(){return null===this.mailCount?null:Math.ceil(this.mailCount/this.maxNumberMailsPerRequest)},noMorePrev:function(){return 1===this.currentPage},noMoreNext:function(){return this.currentPage===this.pageCount},responseCheckboxGroup:function(){return this.cachedUserLabels.length>5?"response-checkbox-group":""},cachedUserLabels:function(){return this.mailLabels.filter((function(e){return!e.isSystem}))},currentLabelId:function(){var e;return null===(e=this.selectMailLabel)||void 0===e?void 0:e.id},currentLabelName:function(){var e;return null===(e=this.selectMailLabel)||void 0===e?void 0:e.name},isNotInOutbox:function(){return this.currentLabelId!==I.e.labelUtil.getOutboxLabelId()},isShowControlHeader:function(){return this.isNotInOutbox},canDeleteForever:function(){return this.currentLabelId===I.e.labelUtil.getTrashLabelId()&&this.isZmail},copyCurrentThreadList:function(){return this.currentThreadList.map((function(e){return{id:e}}))},currentThreadList:function(){return this.ListThreads&&this.ListThreads[this.currentLabelId]&&this.ListThreads[this.currentLabelId].ListThreads&&this.ListThreads[this.currentLabelId].ListThreads.threadIds||[]},GetThreadHead:function(){return this.$store.state.GetThreadHead[this.currentLabelId]||{}},markRead:function(){var e=this;return this.selectInboxes.filter((function(t){return e.GetThreadHead&&e.GetThreadHead[t]&&e.GetThreadHead[t].threadHead.isUnread})).length>0},markStarred:function(){var e=this;return this.selectInboxes.filter((function(t){return e.GetThreadHead&&e.GetThreadHead[t]&&!e.GetThreadHead[t].threadHead.isStarred})).length>0},readStatus:function(){return this.GetThreadHead&&this.selectItem.threadId&&this.GetThreadHead[this.selectItem.threadId]&&!this.GetThreadHead[this.selectItem.threadId].threadHead.isUnread},trashStatus:function(){var e;return(null===(e=this.selectItem)||void 0===e?void 0:e.labelId)===I.e.labelUtil.getTrashLabelId()},archiveStatus:function(){return(0,ee.XP)(this.currentLabelId)},isSpammed:function(){return this.currentLabelId===I.e.labelUtil.getSpamLabelId()},spamStatus:function(){return this.isSpammed?this.isGmail?this.$t("operation.removeFromSpamStatus"):this.$t("operation.reportNotSpamStatus"):this.isGmail?this.$t("operation.markAsSpamStatus"):this.$t("operation.reportSpamStatus")},trashOrMoveToInboxText:function(){return this.trashStatus?this.$t("operation.moveToInbox"):this.isOutlook?this.$t("operation.delete"):this.$t("operation.trash")},hasDrafts:function(){var e,t;return null===(e=this.selectItem)||void 0===e||null===(t=e.threadHead)||void 0===t?void 0:t.userEmailStatusList.some((function(e){return e.isDraft}))},groupMails:function(){var e=this,t=(new Date).getTime(),i={};return Object.values(this.GetThreadHead).forEach((function(n){var s=n&&n.threadHead&&1e3*n.threadHead.date,a=(0,ee.Gt)(s,t),r=a,o=I.e.labelUtil.getUserScheduledLabelId(),l=I.e.labelUtil.getDraftLabelId();r=[o,l].includes(e.currentLabelId)?a:"Upcoming"===a?"Today":a,i[r]||(i[r]=[]),i[r].push(n)})),i},selectedInboxItems:function(){var e=this;return this.selectInboxes.filter((function(t){return e.GetThreadHead[t]})).map((function(t){return{groupId:t,msgIds:e.GetThreadHead[t].msgIds}}))},mails:function(){if(!this.isPaginated)return this.flattenMails(this.groupMails);var e=this.flattenMails(this.groupMails),t=(this.currentPage-1)*this.maxNumberMailsPerRequest,i=this.currentPage*this.maxNumberMailsPerRequest;return e.slice(t,i)},canSpam:function(){return this.currentLabelId!==I.e.labelUtil.getOutboxLabelId()&&this.currentLabelId!==I.e.labelUtil.getSentLabelId()},isLoading:function(){var e;return(null===(e=this.loadingState[this.currentLabelId])||void 0===e?void 0:e.isLoading)||!1},inboxList:function(){return this.mails.filter((function(e){return!e.isPlain}))},isSingleCheckedInboxItem:function(){return 1===this.selectInboxes.length},selectedUserEmail:function(){var e,t=this.selectInboxes[0],i=this.GetThreadHead[t],n=i.threadHead.userEmailStatusList;return null===(e=n[n.length-1])||void 0===e?void 0:e.userEmail},headerOptions:function(){return this.allOptions.filter((function(e){return e.displayAtHeader}))},moreOptions:function(){return this.allOptions.filter((function(e){return e.displayAtMore}))}}),watch:{scaleRadio:function(e){this.updateZoomRadio(e)},showDetail:function(e){var t;(this.showSearch=!1,e)||(null===(t=this.$refs.recycleScroller)||void 0===t||t.updateVisibleItems(!0))},$route:function(e){var t=e.path,i=e.query.threadId,n=null===t||void 0===t?void 0:t.startsWith("/main/inbox");n&&(this.showSearch=!1,this.selectInboxes=[],this.lastSelectedInboxItem=null,i&&this.autoOpenThreadHandler(i))},currentLabelId:function(e){var t;if(this.showSearch=!1,!e)return!1;if(this.setOptionsDisplayStatus(),this.isLocalLastPage=!1,this.$store.commit("changeCurrentPage",1),this.isSplitView&&this.$store.state.splitViewSelectedMails[e]){this.$store.commit("changeShowSplitDefault",!1);var i=this.$store.state.splitViewSelectedMails[e];this.handleShowDetail(i,!1,!1,!0)}else this.isSplitView&&(this.$store.commit("changeShowDetail",!1),this.$store.commit("changeShowSplitDefault",!0));null===(t=this.$refs.recycleScroller)||void 0===t||t.updateVisibleItems(!0),this.checkIsLabelInit()||(this.setLoadingState(),(this.ListThreads&&!this.ListThreads[e]||this.ListThreads&&this.ListThreads[e]&&this.ListThreads[e].ListThreads&&this.ListThreads[e].ListThreads.threadIds&&(!this.ListThreads[e].ListThreads.threadIds||this.ListThreads[e].ListThreads.threadIds.length<=100))&&"LOCAL_ID_SEARCH"!==e&&this.handleRefresh())},GetThreadHead:function(e){this.selectInboxes=this.selectInboxes.filter((function(t){return e[t]}))},inboxList:function(e){var t=this;"LOCAL_ID_SEARCH"!==this.currentLabelId&&this.$nextTick((function(){var i=(null===e||void 0===e?void 0:e.length)<t.maxNumberMailsPerRequest;i&&!t.isLocalLastPage&&(t.setLoadingState(),t.handleRefresh())}))},selectInboxes:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n,s,a,r;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.allSelectedSendersAreSelf=!0,n=(0,W.Z)(e),i.prev=2,a=(0,o.Z)().mark((function e(){var i,n,a,r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=s.value,e.next=3,te.t.getThreadMailDetails({labelId:t.currentLabelId,threadId:i});case 3:if(n=e.sent,a=t.userProfile.userEmail,r=n.find((function(e){var t=e.from.emailAddr;return a.toLowerCase()!==t.toLowerCase()})),!r){e.next=9;break}return t.allSelectedSendersAreSelf=!1,e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),n.s();case 5:if((s=n.n()).done){i.next=12;break}return i.delegateYield(a(),"t0",7);case 7:if(r=i.t0,"break"!==r){i.next=10;break}return i.abrupt("break",12);case 10:i.next=5;break;case 12:i.next=17;break;case 14:i.prev=14,i.t1=i["catch"](2),n.e(i.t1);case 17:return i.prev=17,n.f(),i.finish(17);case 20:t.setOptionsDisplayStatus();case 21:case"end":return i.stop()}}),i,null,[[2,14,17,20]])})))()}},created:function(){var e=this;this.isPaginated||(this.throttleHandleMouseWheel=(0,J.throttle)(this.handleMouseWheel,300),this.throttleHandleSyncMail=(0,J.throttle)(this.handleSync,1e3),this.$once("hook:beforeDestroy",(function(){e.throttleHandleMouseWheel.cancel(),e.throttleHandleSyncMail.cancel()}))),document.addEventListener("visibilitychange",this.handleVisibilityChange),window.addEventListener("focus",this.refreshIfDateChanged)},mounted:function(){var e=this;this.fetchSplitConfig(),this.updateZoomRadio(this.scaleRadio),this.setOptionsDisplayStatus(),this.showGetStartedModal=this.isFirstLogin&&this.isZmail,this.isZmail&&ie.t.listSpammedUsers(),this.scrollPositionY&&setTimeout((function(){var t;null===(t=e.$refs.recycleScroller)||void 0===t||t.scrollToPosition(e.scrollPositionY),e.clearScrollPositionY()})),this.checkIsLabelInit()||(this.setLoadingState(),this.handleRefresh()),q()(window).on("click",this.handleClickOnWindow=function(){e.showActions=!1,e.showSearch=!1,e.selectItem={}}),document.getElementById("resizer").addEventListener("mousedown",this.resizeMouseDownHandler),this.setupMultiSelectHandlers()},beforeDestroy:function(){q()(window).off("click",this.handleClickOnWindow),q()(".inbox-container").off("mousewheel",this.mousewheelEventHandler),this.cleanupMultiSelectHandlers(),window.removeEventListener("focus",this.refreshIfDateChanged),document.removeEventListener("visibilitychange",this.handleVisibilityChange)},methods:(0,c.Z)((0,c.Z)({},(0,d.OI)(["setCurrentInboxItem","setCurrentInboxItemThreadId","clearCurrentInboxItemThreadId","setScrollPositionY","clearScrollPositionY","setSplitView","addInstantDraftList","changeShowSplitDefault","setSplitViewSelectedMails","clearSplitViewSelectedMails"])),{},{isThreadExist:function(e){return this.GetThreadHead[e]},handleExitSearch:function(){var e,t,i,n=this;(this.$store.commit("changeSearchStatus",!1),this.$store.commit("clearSearchResults"),this.$store.commit("setSearchString",""),this.$store.commit("changeInSearchBox",!1),null!==(e=this.selectPrevLabel)&&void 0!==e&&e.id)?(this.$store.commit("changeSelectMailLabel",this.selectPrevLabel),t=this.selectPrevLabel.id.toLowerCase()):(this.$store.commit("changeSelectMailLabel",this.mailLabels[0]),t=null===(i=this.mailLabels[0])||void 0===i?void 0:i.id.toLowerCase());this.$route.params.id!==t&&this.$router.push({name:"inbox",params:{id:t}}),this.$nextTick((function(){var e;null===(e=n.$refs.recycleScroller)||void 0===e||e.scrollToPosition(0)}))},getAllContextMenuSendersAreSelf:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){var i,n,s;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.selectItem,t.next=3,te.t.getThreadMailDetails(i);case 3:return n=t.sent,s=e.userProfile.userEmail,t.abrupt("return",!n.find((function(e){var t=e.from.emailAddr;return s.toLowerCase()!==t.toLowerCase()})));case 6:case"end":return t.stop()}}),t)})))()},autoOpenThreadHandler:function(e){var t=this;this.currentLabelId!==I.e.labelUtil.getInboxLabelId()&&this.switchToInbox();var i=this.mails,n=i.findIndex((function(t){return t.msgIds&&t.msgIds.includes(e)}));n>-1&&(this.$refs.recycleScroller.scrollToItem(n),setTimeout((function(){t.handleShowDetail(i[n],!0,!0)}),200))},resizeMouseDownHandler:function(e){e.preventDefault(),this.xDir=e.clientX,document.addEventListener("mousemove",this.resizeMouseMoveHandler),document.addEventListener("mouseup",this.resizeMouseUpHandler)},resizeMouseMoveHandler:function(e){e.preventDefault();var t=document.getElementById("resizer"),i=t.previousElementSibling,n=e.clientX-this.xDir,s=i.getBoundingClientRect().width,a=100*(s+n)/t.parentNode.getBoundingClientRect().width;a<50&&(i.style.width="".concat(a,"%"),this.xDir=e.clientX)},resizeMouseUpHandler:function(){document.removeEventListener("mousemove",this.resizeMouseMoveHandler),document.removeEventListener("mouseup",this.resizeMouseUpHandler)},openCreateFilter:function(e){this.selectedMailInThread=e,this.$refs.addFilterDialog.open()},setShowSearch:function(e){this.showSearch=e},setSelectInboxes:function(e){this.selectInboxes=e},setOptionsDisplayStatus:function(){var e=this,t=this.currentLabelId,i=this.currentLabelName;if(t&&i&&"ESCROW"!==t){this.isOutlook?this.allOptions.forEach((function(e){["star","delete","readUnread"].includes(e.id)&&i!==bi.SNOOZED?t===I.e.labelUtil.getTrashLabelId()&&"delete"===e.id?e.displayAtCurrentLabel=!1:e.displayAtCurrentLabel=!0:"moveToInbox"===e.id?e.displayAtCurrentLabel=![bi.INBOX,bi.JUNK_EMAIL,bi.SNOOZED,bi.DRAFTS].includes(i):"archive"===e.id?e.displayAtCurrentLabel=![bi.ARCHIVE,bi.JUNK_EMAIL,bi.SNOOZED,bi.DELETED_ITEMS,bi.DRAFTS].includes(i):"label"===e.id?e.displayAtCurrentLabel=![bi.DRAFTS].includes(i):("spam"===e.id||"phishing"===e.id||e.id,e.displayAtCurrentLabel=!1)})):this.allOptions.forEach((function(i){["star","delete","readUnread","label"].includes(i.id)&&t!==vi.USER_SCHEDULED&&t!==vi.DRAFT?"star"!==i.id&&"label"!==i.id&&"readUnread"!==i.id||t!==vi.TRASH?"delete"===i.id&&t===vi.TRASH?i.displayAtCurrentLabel="Zmail"===e.typeOfEmail:i.displayAtCurrentLabel=!0:i.displayAtCurrentLabel=!1:"moveToInbox"===i.id?i.displayAtCurrentLabel=![vi.INBOX,vi.SPAM,vi.USER_SCHEDULED,vi.DRAFT].includes(t):"archive"===i.id?i.displayAtCurrentLabel=e.archiveStatus&&t!==vi.USER_SCHEDULED&&t!==vi.DRAFT:"spam"===i.id?e.isOutlook?i.displayAtCurrentLabel=!1:i.displayAtCurrentLabel=e.canSpam&&!e.allSelectedSendersAreSelf&&![vi.DRAFT,vi.USER_SCHEDULED].includes(t):"phishing"===i.id?i.displayAtCurrentLabel=e.canSpam&&e.isZmail&&!e.allSelectedSendersAreSelf&&![vi.SPAM,vi.USER_SCHEDULED,vi.DRAFT].includes(t):"discardDraft"===i.id?i.displayAtCurrentLabel=t===vi.DRAFT:"cancelScheduled"===i.id?i.displayAtCurrentLabel=e.isZmail&&t===vi.USER_SCHEDULED:"createFilterFrom"===i.id?i.displayAtCurrentLabel=t===vi.INBOX:i.displayAtCurrentLabel=!1})),this.allOptions.filter((function(e){return!e.displayAtCurrentLabel})).forEach((function(e){e.displayAtHeader=!1,e.displayAtMore=!1}));var n=5;this.allOptions.filter((function(e){return e.displayAtCurrentLabel})).forEach((function(e,t){e.displayAtHeader=t<n,e.displayAtMore=!e.displayAtHeader}))}},handleCheckMore:function(e){var t={All:this.selectAllThreads,None:this.unselectAllThreads,Unread:this.selectAllUnreadThreads,Read:this.selectAllReadThreads,Starred:this.selectStarredThreads,Unstarred:this.selectAllUnstarredThreads},i=t[e];i(),this.lastSelectedInboxItem=null},handleMouseWheel:function(e){if(!this.isPaginated){if(e.deltaY>0){var t,i=null===(t=this.$refs.recycleScroller)||void 0===t?void 0:t.$_endIndex,n=this.flattenMails(this.groupMails).length;i<=n&&i>n-5&&this.handleRefresh()}this.showActions=!1,this.showSearch=!1}},updateZoomRadio:function(e){var t=this;["searchSettingBar","contextMenu"].forEach((function(i){t.$refs[i]&&(t.$refs[i].style.zoom="".concat(100*e,"%"))})),this.$refs.controlHeader&&(this.$refs.controlHeader.$refs.controlHeader.style.zoom="".concat(100*e,"%"))},setLoadingState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentLabelId,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.loadingState[e]||this.$set(this.loadingState,e,{}),this.$set(this.loadingState[e],"isLoading",t)},switchToInbox:function(){var e=this;this.$store.commit("changeInSearchBox",!1),this.showActions=!1,this.selectItem={};var t=this.mailLabels.find((function(e){return e.id===I.e.labelUtil.getInboxLabelId()}));this.$router.push({name:"inbox",params:{id:"inbox"}},(function(){e.$store.commit("changeSelectMailLabel",t),e.$store.commit("changeSelectPrevLabel",t),e.$store.commit("changeInSearchBox",!1),e.$store.commit("changeInFilters",!1)}))},handleShowDetail:function(e){var t=arguments,i=this;return(0,l.Z)((0,o.Z)().mark((function n(){var s,a,r,l,c,d,u,h,m,p;return(0,o.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.length>1&&void 0!==t[1]&&t[1],r=t.length>2&&void 0!==t[2]&&t[2],l=t.length>3&&void 0!==t[3]&&t[3],c=t.length>4&&void 0!==t[4]&&t[4],d=(null===(s=i.$store.state.splitViewSelectedMails[i.currentLabelId])||void 0===s?void 0:s.threadId)===e.threadId,!i.isSplitView||!d||l||a){n.next=7;break}return n.abrupt("return");case 7:if((r||i.isSplitView&&!c)&&(i.$store.commit("changeShowDetail",!1),i.$store.commit("changeShowSplitDefault",!1)),e){n.next=11;break}return n.abrupt("return");case 11:return i.currentLoadingInboxDetailThreadId=e.threadId,i.$emit("update:selectInboxes",[]),i.setCurrentInboxItemThreadId(e.threadId),i.setCurrentInboxItem(i.GetThreadHead[e.threadId]),i.responseItemMailLabels=e.threadHead.showLabelIds,i.currentLabelId!==I.e.labelUtil.getOutboxLabelId()&&i.currentLabelId!==I.e.labelUtil.getDraftLabelId()&&(i.lastReadInboxItem=e.threadId),i.$store.state.isSplitView&&(i.$store.commit("setSplitViewSelectedMails",(0,w.Z)({},i.currentLabelId,e)),i.lastSplitViewSelected=e.threadId),u=S.Z.isLocalSearch(i.currentLabelId)?e.labelId:i.currentLabelId,n.next=21,window.zoomSdk.postJsMessage({functionName:"mailui_getthreaddetails",params:{threadId:e.threadId,labelId:u}});case 21:if(h=n.sent,m=h.result.GetMailDetails.mailDetails,m.sort((function(e,t){return e.mailHead.date-t.mailHead.date})),!e.threadHead.isUnread){n.next=27;break}return n.next=27,i.handleMark(e,"Read");case 27:if(i.$store.commit("setSelectMailDetail",m),p="SELECT_MAIL_DETAIL_CHANGED",a&&i.$Bus.$emit(p),1!==m.length||!m[0].mailHead.isDraft){n.next=35;break}return i.currentLoadingInboxDetailThreadId="",i.$store.state.isSplitView&&i.$store.commit("changeShowSplitDefault",!0),i.$compose({composeItem:m[0],isDraft:!0}),n.abrupt("return");case 35:i.currentLoadingInboxDetailThreadId="",i.$store.commit("changeShowDetail",!0);case 37:case"end":return n.stop()}}),n)})))()},deSelectItem:function(e){this.selectInboxes.indexOf(e.threadId)>=0&&(this.selectInboxes=this.selectInboxes.filter((function(t){return t!==e.threadId}))),this.lastSelectedInboxItem===e.threadId&&(this.lastSelectedInboxItem=null)},handleItemDelete:function(e){this.handleTrash(e),this.deSelectItem(e)},moveThreadsToSpam:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,ri.l.moveThreads(e,t.currentLabelId,"SPAM");case 2:n=i.sent,0===n.returnCode?t.$undoNotice({iconClass:"checkmark",title:t.$t("operation.moveToSpam")}):t.$msg(t.$t("operation.moveFailed"));case 4:case"end":return i.stop()}}),i)})))()},handleItemMove:function(e){this.handleMove("selectInboxes"===e?this.selectedInboxItems:[e])},handleItemArchive:function(e){this.handleArchive("selectInboxes"===e?this.selectedInboxItems:[e])},handleItemSpam:function(e){this.reportSpam([e.threadId]),this.deSelectItem(e)},handleItemPhishing:function(e){this.reportPhishing([e.threadId]),this.deSelectItem(e)},handleItemMark:function(e){var t=e.item,i=e.type;this.handleMark(t,i)},handleMarkResponse:function(e){var t=e.item,i=e.type;this.handleMark(t,i)},handleMove:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=3,ri.l.moveThreads(e,t.currentLabelId,I.e.labelUtil.getInboxLabelId());case 3:n=i.sent,0===n.returnCode?t.$undoNotice({iconClass:"checkmark",title:t.$t("operation.movedToInbox")}):t.$msg(t.$t("operation.moveToInboxFailed"));case 5:case"end":return i.stop()}}),i)})))()},handleArchive:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n,s;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.currentLabelId,i.next=5,window.zoomSdk.postJsMessage({functionName:"mailui_archivemessages",params:{fromLabelId:n,groupMsgsIds:e.map((function(e){return{groupId:e.groupId||e.threadId,msgIds:e.msgIds}}))}});case 5:s=i.sent,0===s.returnCode?t.$undoNotice({iconClass:"checkmark",title:t.$t("operation.movedToArchive")}):t.$msg(t.$t("operation.moveToArchiveFailed"));case 7:case"end":return i.stop()}}),i)})))()},handleTrash:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n,s,a,r,l,c,d,u,h,m,p,f,v,b;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=t.currentLabelId===I.e.labelUtil.getTrashLabelId(),t.showActions=!1,s=1,a=t.isOutlook?"operation.moveToDeletedSuccess":"operation.undoResultMsg",r=t.isOutlook?"operation.moveToDeletedFailed":"operation.moveToTrashFailed","all"!==e){i.next=19;break}for(s=t.selectInboxes.length,l=[],c=[],d=0;d<t.selectInboxes.length;d++)u=t.selectInboxes[d],h=t.GetThreadHead[u],l.push({groupId:h.threadId,msgIds:h.msgIds}),c.push(h.threadId);return m=n?"mailui_deletemessages":"mailui_trashmessages",i.next=15,window.zoomSdk.postJsMessage({functionName:m,params:{fromLabelId:t.currentLabelId,groupMsgsIds:l}});case 15:p=i.sent,0===p.returnCode?(n||t.$undoNotice({title:t.$t(a,[l.length,l.length>1?"s":""])}),t.selectInboxes=[],t.$emit("resetInstantDraftsMsgIdByThreadIds",c)):t.$msg(t.$t(r)),i.next=25;break;case 19:return f=n?"mailui_deletemessages":"mailui_trashmessages",v=[{groupId:e.threadId,msgIds:e.msgIds}],i.next=23,window.zoomSdk.postJsMessage({functionName:f,params:{fromLabelId:e.labelId,groupMsgsIds:v}});case 23:b=i.sent,0===b.returnCode?(!n&&t.$undoNotice({title:t.$t(a,[v.length,v.length>1?"s":""])}),t.$emit("resetInstantDraftsMsgIdByThreadIds",[e.threadId])):t.$msg(t.$t(r));case 25:return s>t.maxNumberMailsPerRequest&&(s=t.maxNumberMailsPerRequest),i.next=28,t.handleRefresh(s);case 28:case"end":return i.stop()}}),i)})))()},handleMark:function(e,t){var i=this;return(0,l.Z)((0,o.Z)().mark((function n(){var s,a,r,l,c,d;return(0,o.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i.showActions=!1,"all"!==e){n.next=11;break}for(s=[],a=0;a<i.selectInboxes.length;a++)r=i.selectInboxes[a],l=i.GetThreadHead[r],s.push({groupId:l.threadId,msgIds:l.msgIds});return n.next=7,window.zoomSdk.postJsMessage({functionName:"mailui_markmessages",params:{mailMarkType:t,fromLabelId:i.currentLabelId,groupMsgsIds:s}});case 7:c=n.sent,0===c.returnCode?(i.selectInboxes.forEach((function(e){"Read"===t||"UnRead"===t?i.$store.commit("changeGetThreadHead",{labelId:i.GetThreadHead[e].labelId,threadId:e,type:"isUnread",status:"UnRead"===t}):"Starred"!==t&&"UnStarred"!==t||(i.$store.commit("changeGetThreadHead",{labelId:i.GetThreadHead[e].labelId,threadId:e,type:"isStarred",status:"Starred"===t}),"Starred"===t?i.$store.commit("addTypeGetThreadHead",{id:"STARRED",GetThreadHead:i.$store.state.GetThreadHead[i.GetThreadHead[e].labelId][e]}):i.$store.commit("deleteGetThreadHead",{id:"STARRED",threadId:e}))})),i.selectInboxes=[]):i.$msg(i.$t("operation.markFailed")),n.next=15;break;case 11:return n.next=13,window.zoomSdk.postJsMessage({functionName:"mailui_markmessages",params:{mailMarkType:t,fromLabelId:e.labelId,groupMsgsIds:[{groupId:e.threadId,msgIds:e.msgIds}]}});case 13:d=n.sent,0===d.returnCode?"Read"===t||"UnRead"===t?i.$store.commit("changeGetThreadHead",{labelId:e.labelId,threadId:e.threadId,type:"isUnread",status:"UnRead"===t}):"Starred"!==t&&"UnStarred"!==t||(i.$store.commit("changeGetThreadHead",{labelId:e.labelId,threadId:e.threadId,type:"isStarred",status:"Starred"===t}),"STARRED"===t&&i.$store.commit("addTypeGetThreadHead",{id:"STARRED",GetThreadHead:e})):i.$message.error(i.$t("operation.markFailed"));case 15:case"end":return n.stop()}}),n)})))()},handleCheckAllChange:function(e){this.selectInboxes=e?this.inboxList.map((function(e){return e.threadId})):[],this.lastSelectedInboxItem=null},setupMultiSelectHandlers:function(){var e=this;window.addEventListener("keydown",this.trackShiftPressed=function(t){"Shift"===t.key&&(e.shiftModifier=!0)}),window.addEventListener("keyup",this.trackShiftReleased=function(t){"Shift"===t.key&&(e.shiftModifier=!1)}),window.addEventListener("blur",this.trackWindowBlurred=function(){e.shiftModifier=!1}),window.addEventListener("click",this.trackCheckboxBlurred=function(t){e.lastSelectedInboxItemFocused=!1},!0)},cleanupMultiSelectHandlers:function(){window.removeEventListener("keydown",this.trackShiftPressed),window.removeEventListener("keyup",this.trackShiftReleased),window.removeEventListener("blur",this.trackWindowBlurred),window.removeEventListener("click",this.trackCheckboxBlurred,!0)},handleCheckedItemsChange:function(e){var t,i=this,n=e.threadId,s=e.status;if(this.lastSelectedInboxItem&&this.shiftModifier){var a=this.inboxList.findIndex((function(e){return e.threadId===i.lastSelectedInboxItem}));if(a>=0){var r=this.inboxList.findIndex((function(e){return e.threadId===n}));r>=0&&(t=[Math.min(a,r),Math.max(a,r)+1])}}var o,l=[n];t&&(l=(o=this.inboxList).slice.apply(o,(0,Y.Z)(t)).filter((function(e){return e.threadId&&!e.isPlain})).map((function(e){return e.threadId})));var c=new Set(this.selectInboxes);s?c.has(n)?l.forEach((function(e){c["delete"](e)})):l.forEach((function(e){c.add(e)})):l.forEach((function(e){c["delete"](e)})),this.selectInboxes=Array.from(c),this.lastSelectedInboxItem=n,this.lastSelectedInboxItemFocused=!0},handleSync:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isOutlook){t.next=4;break}return t.next=3,e.handleSyncCurrentLabelMails();case 3:return t.abrupt("return");case 4:return t.next=6,e.handleSyncAllLabelMails();case 6:case"end":return t.stop()}}),t)})))()},handleSyncAllLabelMails:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.refreshRun=!0,!window.zoomSdk){t.next=7;break}return t.next=4,window.zoomSdk.postJsMessage({functionName:"mailui_syncmails",params:{}});case 4:setTimeout((function(){e.refreshRun=!1}),3e3),t.next=8;break;case 7:setTimeout((function(){e.refreshRun=!1}),3e3);case 8:case"end":return t.stop()}}),t)})))()},handleSyncCurrentLabelMails:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){var i,n,s,a,r,l,c,d;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.refreshRun){t.next=3;break}return t.abrupt("return");case 3:return e.refreshRun=!0,t.next=6,fi.Mh.syncMails();case 6:if(s=t.sent,a=s.errorCode,r=s.data,0===a){t.next=10;break}throw Error("Sync mail failed.");case 10:if(l=(null===r||void 0===r||null===(i=r.ListThreads)||void 0===i?void 0:i.threadIds)||[],c=null===r||void 0===r||null===(n=r.ListThreads)||void 0===n?void 0:n.labelId,c){t.next=14;break}throw Error("label id invalid.");case 14:return t.next=16,te.t.getAllThreadHead(c,l,e.isOutlook);case 16:d=t.sent,d.forEach((function(t){e.$store.commit("addGetThreadHead",t)})),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](0),e.$msg(e.$t("common.syncMailError"));case 23:return t.prev=23,e.refreshRun=!1,t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[0,20,23,26]])})))()},goToSettings:function(){var e;this.setScrollPositionY(null===(e=this.$refs.recycleScroller)||void 0===e?void 0:e.getScroll().start),this.$router.push({path:"/group",params:{path:this.$route.path}})},fetchSplitConfig:function(){var e=this,t=ne.getConfiguration().then((function(t){if(0===t.returnCode){var i=t.result.GetConfiguration,n=document.getElementById("mail-list");1===i.value?(n.style.width="34%",e.$store.commit("setSplitView",!0),e.$store.commit("changeShowSplitDefault",!0)):e.$store.commit("setSplitView",!1)}}))["catch"]((function(e){}));return t},setSplitConfig:function(e){var t=this,i=ne.setConfiguration(e).then((function(e){0===e.returnCode&&t.$store.commit("setSplitView",!t.isSplitView)}))["catch"]((function(e){}));return i},handleSplitToggle:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){var i,n,s,a,r,l;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.isSplitView?0:1,t.next=3,e.setSplitConfig(i);case 3:n=document.getElementById("mail-list"),e.isSplitView?(n.style.width="34%",e.$store.commit("clearSplitViewSelectedMail"),e.$store.commit("changeShowSplitDefault",!0),null===(r=e.$refs.recycleScroller)||void 0===r||r.scrollToPosition(2*(null===(l=e.$refs.recycleScroller)||void 0===l?void 0:l.getScroll().start))):(null===(s=e.$refs.recycleScroller)||void 0===s||s.scrollToPosition((null===(a=e.$refs.recycleScroller)||void 0===a?void 0:a.getScroll().start)/2),n.style.width="100%",e.$store.commit("changeShowDetail",!1),e.$store.commit("changeShowSplitDefault",!1));case 5:case"end":return t.stop()}}),t)})))()},flattenMails:function(e){var t=this,i=["Upcoming","Today","All"],n=Object.keys(e).sort((function(e,t){var n=i.indexOf(e),s=i.indexOf(t),a=n>-1&&s>-1;return a?n-s:-1===n&&-1===s?t-e:n>-1?-1:s>-1?1:0})),s=n.reduce((function(i,n){var s=e[n];return s.length&&(t.isSplitView||i.push({threadId:n,isPlain:!0,value:n,type:"dateCategoryHeader"}),i.push.apply(i,(0,Y.Z)(s.sort((function(e,t){return t.threadHead.date-e.threadHead.date}))))),i}),[]);return s},checkIsLabelInit:function(){return Object.keys(this.GetThreadHead).length>=this.maxNumberMailsPerRequest},handleRefresh:function(){var e=arguments,t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n,s,a,r,l,c,d,u,h,m,p,f,v;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:t.maxNumberMailsPerRequest,s=e.length>1&&void 0!==e[1]&&e[1],a=t.currentLabelId,!t.isLastPage.get(a)){i.next=10;break}return t.isLocalLastPage=!0,t.setLoadingState(a,!1),i.abrupt("return");case 10:t.isLocalLastPage=!1;case 11:if(!t.isLoading){i.next=13;break}return i.abrupt("return");case 13:if(t.setLoadingState(a,!0),!t.inSearching){i.next=19;break}return s&&t.$store.commit("changeSearchStatus",!0),t.$store.commit("changeSearchRefresh",!0),i.abrupt("return");case 19:if(!t.inFilters){i.next=23;break}return s&&t.$store.commit("changeFilterStatus",!0),t.$nextTick((function(){var e;t.$store.commit("changeFilterRefresh",!0),null===(e=t.$refs.controlHeader.$refs.inboxFilters)||void 0===e||e.filterSearch()})),i.abrupt("return");case 23:return r=[],l=[],i.prev=25,i.next=28,window.zoomSdk.postJsMessage({functionName:"mailui_listthreads",params:{label:a,count:n}});case 28:return c=i.sent,d=c.result,u=c.returnCode,0!==u&&(t.errorStatus=!0),i.next=34,t.$store.dispatch("addListThreads",d);case 34:if(h=d.ListThreads,m=h.threadIds,p=h.labelId,f=h.isLastPage,f||t.inSearching||t.inFilters||t.currentThreadList.length<t.maxNumberMailsPerRequest&&setTimeout((function(){t.handleRefresh()}),t.errorStatus||t.isOffline?1e4:1e3),!(m.length>0)){i.next=44;break}return i.next=39,te.t.getAllThreadHead(p,m,t.isOutlook);case 39:v=i.sent,t.isZmail?v.forEach((function(e){return"Decrypted"===e.GetThreadHead.threadHead.decryptionStatus?r.push(e):l.push(e)})):r=v,l.forEach((function(e){e.GetThreadHead.threadHead.subject="Decrypt Failed"})),[].concat((0,Y.Z)(r),l).forEach((function(e){t.$store.commit("addGetThreadHead",e)})),l.length;case 44:t.$store.commit("changeIsLastPage",{type:p,result:f}),t.errorStatus=!1,i.next=53;break;case 48:i.prev=48,i.t0=i["catch"](25),t.errorStatus=!0,t.$store.commit("changeIsLastPage",{type:a,result:!1});case 53:return i.prev=53,t.setLoadingState(a,!1),i.finish(53);case 56:case"end":return i.stop()}}),i,null,[[25,48,53,56]])})))()},handleShowActions:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n,s;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.e,s=e.item,t.currentLabelId!==I.e.labelUtil.getOutboxLabelId()){i.next=4;break}return i.abrupt("return");case 4:return t.selectItem=s,t.showActions=!0,t.calculateContextMenuPosition(n),t.allContextMenuSendersAreSelf=!0,i.next=10,t.getAllContextMenuSendersAreSelf();case 10:t.allContextMenuSendersAreSelf=i.sent;case 11:case"end":return i.stop()}}),i)})))()},calculateContextMenuPosition:function(e){var t=this;this.$nextTick((function(){var i=t.scaleRadio||1,n=window.innerWidth,s=window.innerHeight,a=document.getElementById("mail-right"),r=((null===a||void 0===a?void 0:a.scrollLeft)||0)/i,o=((null===a||void 0===a?void 0:a.scrollTop)||0)/i,l=(e.clientX-t.sidebarMenuWidth)/i,c=e.clientY/i,d=document.getElementById("mail-list-actions-menu").getBoundingClientRect(),u=d.height/i,h=d.width/i;t.actionX=(e.clientX>n-h-20?l-h:l)+r,t.actionY=(e.clientY>s-u-20?c-u:c)+o}))},handleHideActions:function(){this.showActions=!1},handleTrashToggle:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){var i,n,s;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.selectItem,i.labelId!==I.e.labelUtil.getTrashLabelId()){t.next=11;break}return n=I.e.labelUtil.getInboxLabelId(),t.next=6,ri.l.moveThreads([i],i.labelId,n);case 6:s=t.sent,0===s.returnCode?e.$store.commit("changeGetThreadHeadLabel",{threadId:i.threadId,oldLabelId:i.labelId,newLabelId:n}):e.$msg(e.$t("operation.moveToInboxFailed")),t.next=13;break;case 11:e.handleTrash(i);case 13:e.showActions=!1;case 14:case"end":return t.stop()}}),t)})))()},handleReadToggle:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){var i,n,s;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.selectItem,n=i.threadHead.isUnread?"Read":"UnRead",t.next=4,window.zoomSdk.postJsMessage({functionName:"mailui_markmessages",params:{mailMarkType:n,fromLabelId:i.labelId,groupMsgsIds:[{groupId:i.threadId,msgIds:i.msgIds}]}});case 4:s=t.sent,0===s.returnCode&&e.$store.commit("changeGetThreadHead",{labelId:i.labelId,threadId:i.threadId,type:"isUnread",status:"UnRead"===n}),e.showActions=!1;case 7:case"end":return t.stop()}}),t)})))()},handleDiscardDrafts:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){var i,n;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.selectItem,t.next=4,window.zoomSdk.postJsMessage({functionName:"mailui_discarddrafts",params:{fromLabelId:i.labelId,groupMsgsIds:[{groupId:i.threadId}]}});case 4:n=t.sent,0===n.returnCode?(e.$undoNotice({title:e.$t("operation.draftsDiscarded")}),e.$store.commit("removeInstantDraftsForThreads",[i.threadId]),e.$emit("resetInstantDraftsMsgIdByThreadIds",[i.threadId])):e.$msg(e.$t("operation.failedToDiscardDrafts")),e.showActions=!1;case 8:case"end":return t.stop()}}),t)})))()},markAsSpam:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n,s,a,r,l,c;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=e.labelId,s=e.threadId,a=e.msgIds,r=e.type,l=r===It.NW.NOT_JUNK?"INBOX":"SPAM",i.prev=2,i.next=5,window.zoomSdk.postJsMessage({functionName:"mailui_movemessages",params:{fromLabelId:n,toLabelId:l,groupMsgsIds:[{groupId:s,msgIds:a}]}});case 5:if(c=i.sent,0!==c.returnCode){i.next=10;break}t.$store.commit("changeGetThreadHeadLabel",{threadId:s,oldLabelId:n,newLabelId:l}),i.next=11;break;case 10:throw Error("Move failed");case 11:i.next=16;break;case 13:throw i.prev=13,i.t0=i["catch"](2),Error();case 16:case"end":return i.stop()}}),i,null,[[2,13]])})))()},handleReportPhishing:function(){this.showReportPhishingDialog=!0},handleSpamToggle:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.reportSpam([e.selectItem.threadId]);case 1:case"end":return t.stop()}}),t)})))()},handleArchiveToggle:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){var i,n,s,a;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.selectItem,n=1,e.selectInboxes.indexOf(i.threadId)>=0&&(e.selectInboxes=e.selectInboxes.filter((function(e){return e!==i.threadId}))),!S.Z.isArchive(i.labelId)){t.next=12;break}return t.next=7,ri.l.moveThreads([i],i.labelId,I.e.labelUtil.getInboxLabelId());case 7:s=t.sent,0===s.returnCode?e.$store.commit("changeGetThreadHeadLabel",{threadId:i.threadId,oldLabelId:i.labelId,newLabelId:I.e.labelUtil.getInboxLabelId()}):e.$msg(e.$t("operation.moveToInboxFailed")),t.next=17;break;case 12:return t.next=14,window.zoomSdk.postJsMessage({functionName:"mailui_archivemessages",params:{fromLabelId:e.selectItem.labelId,groupMsgsIds:[{groupId:e.selectItem.threadId,msgIds:e.selectItem.msgIds}]}});case 14:a=t.sent,0===a.returnCode?e.$store.commit("changeGetThreadHeadLabel",{threadId:i.threadId,oldLabelId:i.labelId,newLabelId:I.e.labelUtil.getArchiveLabelId()}):e.$msg(e.$t("operation.moveToArchiveFailed"));case 17:return e.showActions=!1,t.next=20,e.handleRefresh(n);case 20:case"end":return t.stop()}}),t)})))()},handleDeleteTrash:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){var i,n;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.selectItem,t.next=3,window.zoomSdk.postJsMessage({functionName:"mailui_deletemessages",params:{fromLabelId:i.labelId,groupMsgsIds:[{groupId:i.threadId,msgIds:i.msgIds}]}});case 3:n=t.sent,0===n.returnCode?(e.$store.dispatch("moveGetThreadHead",{threadId:i.threadId,id:i.labelId}),e.$undoNotice({title:e.$t("operation.mailDeleted")}),e.$emit("resetInstantDraftsMsgIdByThreadIds",[i.threadId])):e.$msg(e.$t("operation.deleteFailed")),e.showActions=!1;case 6:case"end":return t.stop()}}),t)})))()},handleDeleteResponse:function(e){this.clearCurrentInboxItemThreadId(),this.setCurrentInboxItem(null),this.handleTrash(e),this.deSelectItem(e)},handleSpamResponse:function(e){this.clearCurrentInboxItemThreadId(),this.setCurrentInboxItem(null),this.reportSpam([e.threadId])},handleCancelScheduledSend:function(e){var t=arguments,i=this;return(0,l.Z)((0,o.Z)().mark((function n(){var s,a;return(0,o.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.length>1&&void 0!==t[1]&&t[1],i.clearCurrentInboxItemThreadId(),i.setCurrentInboxItem(null),a=e.reduce((function(e,t){return e.concat(i.$store.getters.getReportSpamInfoByThreadId(t))}),[]),n.prev=4,n.next=7,Promise.all(a.map(function(){var e=(0,l.Z)((0,o.Z)().mark((function e(t){var n,a,r,l,d,u,h;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.threadId,a=t.msgIds,r=t.labelId,e.next=3,te.t.getThreadMailDetails({threadId:n,labelId:r});case 3:return l=e.sent,l.sort((function(e,t){return e.mailHead.date-t.mailHead.date})),d=l[l.length-1],e.next=8,ri.l.cancelSendingMail(a[a.length-1]);case 8:if(u=e.sent,0!==u.returnCode||!s){e.next=17;break}return h={key:(0,oi.Z)(),composeItem:(0,c.Z)({},d),isDraft:!0},i.$store.commit("addInstantDraftList",h),i.$compose({composeItem:h.composeItem}),i.$undoNotice({iconClass:"checkmark",title:"Cancelled scheduled send and reverted to draft"}),e.abrupt("return");case 17:if(0!==u.returnCode||s){e.next=20;break}return i.$undoNotice({iconClass:"checkmark",title:"Cancelled selected emails and reverted to drafts"}),e.abrupt("return");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](4),i.$undoNotice({iconClass:"crossmark",title:"Failed to cancel, message may be already sent"});case 12:case"end":return n.stop()}}),n,null,[[4,9]])})))()},resetLastInboxRefreshDate:function(){var e=(0,Q.YZ)();return(!this.LastInboxRefreshDate||this.LastInboxRefreshDate.getTime()!==e.getTime())&&(this.$store.commit("setLastInboxRefreshDate",e),!0)},refreshIfDateChanged:function(){this.resetLastInboxRefreshDate()&&this.handleRefresh()},setIsLastPage:function(e){this.isLocalLastPage=e},changeSearchErrorStatus:function(e){this.searchErrorStatus=e},reportPhishing:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=e.reduce((function(e,i){return e.concat(t.$store.getters.getReportSpamInfoByThreadId(i))}),[]),i.prev=1,i.next=4,Promise.all(n.map(function(){var e=(0,l.Z)((0,o.Z)().mark((function e(t){var i,n,s,a,r,l,c;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.threadId,n=t.msgIds,s=t.labelId,e.next=3,te.t.getThreadMailDetails({threadId:i,labelId:s});case 3:if(a=e.sent,a.sort((function(e,t){return e.mailHead.date-t.mailHead.date})),r=a[0],!r){e.next=9;break}return c=ie.t.reportSpam({threadId:i,msgIds:n,sender:null===r||void 0===r||null===(l=r.from)||void 0===l?void 0:l.emailAddr,type:"phishing"}),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:t.$undoNotice({iconClass:"checkmark",title:t.$t("operation.moveToSpamSuccess",[n.length>1?"s":""])}),i.next=11;break;case 7:i.prev=7,i.t0=i["catch"](1),t.$undoNotice({iconClass:"crossmark",title:"Report phishing failed!"});case 11:case"end":return i.stop()}}),i,null,[[1,7]])})))()},reportSpam:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n,s,a,r,d,u;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.reduce((function(e,i){return e.concat(t.$store.getters.getReportSpamInfoByThreadId(i))}),[]),s=t.isSpammed?function(e){return"SPAM"===e}:function(e){return"SPAM"!==e},n=n.filter((function(e){var t=e.labelId;return s(t)})),a=t.isSpammed?It.NW.NOT_JUNK:It.NW.JUNK,r=[],i.prev=5,!t.isGmail){i.next=11;break}return i.next=9,Promise.all(n.map((function(e){var i=(0,c.Z)((0,c.Z)({},e),{},{type:a});return r.push((0,c.Z)((0,c.Z)({},i),{},{type:It.NW.JUNK})),t.markAsSpam(i)})));case 9:i.next=14;break;case 11:return i.next=13,Promise.all(n.map(function(){var e=(0,l.Z)((0,o.Z)().mark((function e(t){var i,n,s,l,c,d,u;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.threadId,n=t.msgIds,s=t.labelId,e.next=3,te.t.getThreadMailDetails({threadId:i,labelId:s});case 3:if(l=e.sent,l.sort((function(e,t){return e.mailHead.date-t.mailHead.date})),c=l[l.length-1],!c){e.next=9;break}return r.push({threadId:i,msgIds:n,sender:null===c||void 0===c||null===(d=c.from)||void 0===d?void 0:d.emailAddr,type:It.NW.JUNK}),e.abrupt("return",ie.t.reportSpam({threadId:i,msgIds:n,sender:null===c||void 0===c||null===(u=c.from)||void 0===u?void 0:u.emailAddr,type:a}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:case 14:i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](5),t.$undoNotice({iconClass:"crossmark",title:"Report Spam failed!"});case 19:return i.prev=19,d=r.length===n.length,a===It.NW.NOT_JUNK&&d&&(u=function(){r.forEach((function(e){t.isGmail?t.markAsSpam(e):ie.t.reportSpam(e)}))},t.$undoNotice({iconClass:"checkmark",title:t.$t("operation.movedToInboxTitle",[r.length,r.length>1?"s":""]),action:t.$t("operation.undo"),actionCallback:u})),t.showActions=!1,i.finish(19);case 24:case"end":return i.stop()}}),i,null,[[5,16,19,24]])})))()},showApproveDialog:function(){this.showApproveUserDialog=!0,this.approveInfo={default:[this.$t("operation.approveDialogInfoPre"),this.$t("operation.approveDialogInfoPost")],bold:[this.selectedUserEmail.displayName,this.selectedUserEmail.emailAddr]}},cancelApprove:function(){this.showApproveUserDialog=!1},approveUser:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){var i,n;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.selectedUserEmail.emailAddr,e.showApproveUserDialog=!1,!i){t.next=15;break}return t.prev=3,t.next=7,ie.t.reportSpam({sender:i,type:It.NW.ALLOWLIST});case 7:n=function(){var t=(0,l.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ie.t.reportSpam({sender:i,type:It.NW.NOT_ALLOWLIST});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.$msg({type:"Error",content:e.$t("detail.undoFailed")});case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}(),e.$undoNotice({iconClass:"checkmark",title:e.$t("operation.emailAddressApproved"),action:e.$t("operation.undo"),actionCallback:n}),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](3),e.$msg({type:"Error",content:e.$t("operation.approveFailedContent",[e.selectedUserEmail.displayName])});case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},handleActions:function(e){var t,i=this.moreOptions.find((function(t){return t.id===e}));i?null===i||void 0===i||i.command():null===(t=this[e])||void 0===t||t.call(this)},handleVisibilityChange:function(){document.hidden||this.refreshIfDateChanged();var e=bt.ou.now();if(document.hidden)this.storedTime=e;else{var t=bt.ou.now().diff(this.storedTime,"hours");t.toObject().hours>6&&(this.lastReadInboxItem="")}},closeGetStartedModal:function(){this.showGetStartedModal=!1,this.$store.commit("auth/setIsFirstLogin",!1)}})},Si=gi,Ii=(0,_.Z)(Si,G,j,!1,null,"5eb8b99e",null),wi=Ii.exports,xi=function(){var e=this,t=e._self._c;return t("div",{ref:"composeContainer",staticClass:"compose-container"},[t("div",{ref:"composeListWrap",class:["compose-list-wrap",{"single-draft":e.isComposeShouldOnEdge||e.hideShortcuts}]},[t("transition-group",{attrs:{name:"compose-list"}},e._l(e.composeList,(function(i){return t("Compose",{key:i.key,ref:"composeRef_".concat(i.key),refInFor:!0,attrs:{id:i.key,isCurrent:e.currentCompose&&e.currentCompose.key===i.key,composeItem:i.composeItem,isDraft:i.isDraft,isForward:i.isForward,isReply:i.isReply,preTo:i.preTo},on:{triggerClose:e.handleComposeClose,minimize:e.handleComposeMinimize,updateSubject:e.handleComposeUpdate,creatingOrUpdating:e.creatingOrUpdating}})})),1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showComposeShortCut,expression:"showComposeShortCut"}],ref:"shortcutListRef",staticClass:"compose-shortcut-list-wrap"},[t("transition-group",{attrs:{name:"compose-shortcut-list"}},e._l(e.composeShortcutList,(function(i){return t("ComposeShortcut",{key:i.key,ref:"composeShortcut_".concat(i.key),refInFor:!0,attrs:{id:i.key,isCurrent:e.currentCompose&&e.currentCompose.key===i.key,composeItem:i.composeItem,isDraft:i.isDraft,isForward:i.isForward,isReply:i.isReply,preTo:i.preTo,creatingOrUpdatingLists:e.creatingOrUpdatingLists,isAllowCompose:e.allowComposeFromShortcut},on:{close:e.handleShortcutClose}})})),1)],1)])},yi=[],Li=function(){var e=this,t=e._self._c;return t("div",{ref:"root",class:["compose-wrap",{hide:!e.isCurrent,"fullscreen-size":e.fullScreen}],style:{height:e.fullScreen?"auto":"".concat(e.composeHeight,"px"),width:e.fullScreen?"auto":"".concat(e.composeWidth,"px")}},[t("div",{staticClass:"compose-resize-bar-horizontal",on:{mousedown:function(t){return t.preventDefault(),t.stopPropagation(),e.handleResizeMouseDown(t,"horizontal")}}}),t("div",{class:["compose-header"]},[t("div",{staticClass:"compose-title-bar"},[t("div",{staticClass:"compose-title-left"},[t("span",{style:{fontWeight:"bold"}},[e._v(" "+e._s(e.composeTitle)+" ")])]),t("div",{staticClass:"compose-title-right"},[t("svg-icon",{attrs:{iconClass:"minus"},on:{click:e.handleMini}}),t("svg-icon",{attrs:{iconClass:e.fullScreen?"minimize":"maximize"},on:{click:e.handleFullScreen}}),t("svg-icon",{attrs:{iconClass:"close"},on:{click:e.triggerClose}})],1)]),t("div",{staticClass:"recipients-line"},[t("span",{staticClass:"recipients-line-label"},[e._v(e._s(e.$t("filter.to")))]),t("contactsSelector",{ref:"toContactRef",attrs:{value:e.to,type:"to",toExternalList:e.toExternalList,ccExternalList:e.ccExternalList,bccExternalList:e.bccExternalList},on:{change:function(t){e.to=t},focus:function(t){return t.stopPropagation(),e.handleFocus(t,"recipients")},resetShowActions:e.resetShowActions,handleHasExternal:e.handleHasExternal,handleAddExternalUser:e.handleAddExternalUser,handleRemoveExternalUser:e.handleRemoveExternalUser}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.showCc,expression:"!showCc"}],staticClass:"showToAction",on:{click:function(t){return t.stopPropagation(),e.handleCc.apply(null,arguments)}}},[e._v(e._s(e.$t("editor.cc")))]),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.showBcc,expression:"!showBcc"}],staticClass:"showToAction",on:{click:function(t){return t.stopPropagation(),e.handleBcc.apply(null,arguments)}}},[e._v(e._s(e.$t("editor.bcc")))])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showCc,expression:"showCc"}],staticClass:"recipients-line"},[t("span",{staticClass:"recipients-line-label"},[e._v(e._s(e.$t("editor.cc")))]),t("contactsSelector",{ref:"ccContactRef",attrs:{value:e.cc,type:"cc",toExternalList:e.toExternalList,ccExternalList:e.ccExternalList,bccExternalList:e.bccExternalList},on:{change:function(t){e.cc=t},focus:function(t){return t.stopPropagation(),e.handleFocus(t,"recipients")},resetShowActions:e.resetShowActions,handleHasExternal:e.handleHasExternal,handleAddExternalUser:e.handleAddExternalUser,handleRemoveExternalUser:e.handleRemoveExternalUser}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showBcc,expression:"showBcc"}],staticClass:"recipients-line"},[t("span",{staticClass:"recipients-line-label"},[e._v(e._s(e.$t("editor.bcc")))]),t("contactsSelector",{ref:"bccContactRef",attrs:{value:e.bcc,type:"bcc",toExternalList:e.toExternalList,ccExternalList:e.ccExternalList,bccExternalList:e.bccExternalList},on:{change:function(t){e.bcc=t},focus:function(t){return t.stopPropagation(),e.handleFocus(t,"recipients")},resetShowActions:e.resetShowActions,handleHasExternal:e.handleHasExternal,handleAddExternalUser:e.handleAddExternalUser,handleRemoveExternalUser:e.handleRemoveExternalUser}})],1),t("div",{staticClass:"subject"},[t("zm-input",{ref:"input",attrs:{placeholder:e.$t("filter.subject")},on:{focus:function(t){return e.handleFocus(t,"subject")},blur:function(t){return e.handleBlur(t,"subject")}},model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}})],1)]),t("div",{ref:"editorBody",staticClass:"compose-body"},[t("drop-zone",{attrs:{onDragEnter:e.debouncedPositionUploader,onLeaveWindow:e.onLeaveWindow,filesOnly:""}},[t("editor",{ref:"editor",attrs:{inlineImages:e.inlineImages,options:e.editorOptions,noPadding:""},on:{"hook:mounted":e.editorMounted,focus:function(t){return e.handleFocus(t,"editor")},blur:function(t){return e.handleBlur(t,"editor")},input:e.handleEditorContentUpdate,immediateUpdate:e.handleImmediateUpdate,showFileSelector:e.showFileSelector,pasteFiles:e.uploadFiles,imageInserted:e.removeInsertedImage},scopedSlots:e._u([e.hasExternalRecipient||e.showScheduledSend||e.hasAttachments?{key:"selectList",fn:function(){return[t("div",{staticClass:"editor-select-list-container"},[e.hasExternalRecipient?t("external-user-warning-banner",{on:{handleHasExternal:e.handleHasExternal}}):e._e(),t("div",{class:[{subitems:e.hasComposeSubItems}]},[e.showExpirationBanner?t("expiration-banner",{attrs:{showExpirationBanner:e.showExpirationBanner,expirationSeconds:e.expirationSeconds,hasComposeSubItems:e.hasComposeSubItems},on:{edit:e.handleSetSecurity,closed:e.handleCloseExpirationBanner}}):e._e(),e.showScheduledSend?t("scheduled-send-banner",{ref:"scheduledSend",attrs:{showScheduledSend:e.showScheduledSend,scheduledTime:e.scheduledTime,isEdit:!0,hasComposeSubItems:e.hasComposeSubItems},on:{handleCustomTimeVisible:e.handleCustomTimeVisible,handleEditScheduledSend:e.handleEditScheduledSend,handleScheduledSend:e.handleScheduledSend,setScheduledTime:e.setScheduledTime}}):e._e()],1),e.hasAttachments?t("div",{staticClass:"upload-item"},e._l(e.availableAttachmentList,(function(i,n){return t("upload-item",{key:n,attrs:{select:!0,uploadItem:i},on:{deleteItem:e.handleDeleteItem}})})),1):e._e()],1)]},proxy:!0}:null],null,!0),model:{value:e.content,callback:function(t){e.content=t},expression:"content"}},[t("ComposeToolbar",{attrs:{disableSent:e.isSentDisabled,isSecure:e.passwordProtected,customTimeVisible:e.customTimeVisible,isEditScheduledSend:e.isEditScheduledSend,showScheduledSend:e.showScheduledSend,showScheduledSendActions:e.showScheduledSendActions,scheduledTime:e.scheduledTime,externalListLength:e.externalListLength},on:{handleScheduledSend:e.handleScheduledSend,handleEditScheduledSend:e.handleEditScheduledSend,handleShowScheduledSendActions:e.handleShowScheduledSendActions,handleCustomTimeVisible:e.handleCustomTimeVisible,setScheduledTime:e.setScheduledTime,send:e.handleSend,selectedFiles:e.handleSelectedFiles,setSecurity:e.handleSetSecurity,delete:e.handleDraftDelete}})],1)],1)],1),t("expiration-dialog",{attrs:{show:e.showExpirationModal,title:e.$t("detail.passwordProtection"),defaultExpiration:e.expirationSeconds,ruleActive:e.passwordProtected},on:{onCancel:e.handleExpirationCancel,onOk:e.handleExpirationSelect,onRemove:e.handleExpirationRemove}})],1)},Ci=[],$i=i(7105),ki=i(10432),Ti=i(57078),_i=i(4373),Mi=i(41797),Di=i(13887),Ei=i(96464),Ai=i(57159),Zi=i(53744),zi=i(19030),Ri=i(24800),Hi=i(81983),Oi={DEFAULT_WIDTH:600,DEFAULT_HEIGHT:450},Pi=i(96713),Fi='<div style="font-size: var(--text-base-size);"></div>',Ni={name:"Compose",components:{Editor:$i["default"],ComposeToolbar:ki["default"],SvgIcon:v.Z,uploadItem:Mi["default"],contactsSelector:Ai.Z,DropZone:Hi["default"],ExpirationDialog:Di["default"],ExpirationBanner:Ei["default"],ScheduledSendBanner:Ti.Z,ExternalUserWarningBanner:_i.Z},mixins:[zi.b,Ri.Z],props:{id:{type:String,default:""},isCurrent:{type:Boolean,default:!1},composeItem:{type:Object,default:function(){}},isDraft:{type:Boolean,default:!1},isForward:{type:Boolean,default:!1},isReply:{type:Boolean,default:!1},preTo:{type:Array,default:function(){return[]}}},data:function(){return{originalComposeHeight:Oi.DEFAULT_HEIGHT,originalComposeWidth:Oi.DEFAULT_WIDTH,composeHeight:Oi.DEFAULT_HEIGHT,composeWidth:Oi.DEFAULT_WIDTH,resizing:!1,resizeOriginalPos:{offsetX:0,offsetY:0},resizeOri:"",to:[],cc:[],bcc:[],subject:"",content:"",showCc:!1,showBcc:!1,hasExternalRecipient:!1,fullScreen:!1,options:[],passwordProtected:!1,showExpirationModal:!1,showExpirationBanner:!1,expirationSeconds:2592e3,composePrepared:!1,isComposeDirty:!1,isSending:!1,creatingOrUpdating:!1,isEditorMounted:!1,msgId:"",threadId:"",totalMessageSize:0,updatedContent:!1,isEditingMailRecipients:!1,isEditingMailSubject:!1,isEditingMailContent:!1,editorOptions:{isComposeEditor:!0},showScheduledSend:!1,customTimeVisible:!1,isEditScheduledSend:!1,showScheduledSendActions:!1,scheduledTime:null,refreshFingerprintDone:!1}},computed:(0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)({},(0,d.rn)({userTimeZone:function(e){return e.userProfile.userTimeZone},typeOfEmail:function(e){return e.typeOfEmail},inboxItem:function(e){return e.currentInboxItem},undoDuration:function(e){return e.undoDuration},mailLabels:function(e){return e.mailLabels}})),(0,d.Se)(["isZmail","currentLabelId"])),(0,d.Se)("fingerprint",["getCachedEmailFingerprint"])),{},{composeTitle:function(){var e;return(null===(e=this.composeItem)||void 0===e?void 0:e.mailHead.subject)||this.$t("editor.newMail")},publicRecipients:function(){return[].concat((0,Y.Z)(this.to),(0,Y.Z)(this.cc))},recipients:function(){return[].concat((0,Y.Z)(this.to),(0,Y.Z)(this.cc),(0,Y.Z)(this.bcc))},hasMore:function(){return this.recipients.length>5},hasInvalidContactInMoreContact:function(){var e=this;return!!this.hasMore&&this.recipients.slice(5).some((function(t){return!e.isValidateMail(t)}))},hasComposeSubItems:function(){return this.showExpirationBanner&&this.showScheduledSend},expandComposeWindow:function(){var e=!!this.availableAttachmentList.length+this.hasExternalRecipient+this.showExpirationBanner+this.showScheduledSend;return this.showScheduledSend&&this.showExpirationBanner&&(e-=1),e},externalListLength:function(){return this.toExternalList.length+this.ccExternalList.length+this.bccExternalList.length},hasAttachments:function(){return this.availableAttachmentList.length>0},isSentDisabled:function(){return"Uploading"===this.attachmentsStatus||this.isZmail&&!this.refreshFingerprintDone}}),watch:{isCurrent:function(e){e&&this.autofocus()},subject:function(e){this.$emit("updateSubject",{id:this.id,subject:e})},expandComposeWindow:function(e){2===e?this.composeHeight=536:3===e&&(this.composeHeight=622)},activeKeyBinding:function(e){var t=e.action,i=e.event;switch(t){case"editor-send":i.preventDefault(),this.isCurrent&&(this.isEditingMailRecipients||this.isEditingMailSubject||this.isEditingMailContent)&&"Uploading"!=this.attachmentsStatus&&this.handleSend();break;case"editor-add-cc":i.preventDefault(),this.isEditingMailRecipients&&this.handleCc();break;case"editor-add-bcc":i.preventDefault(),this.isEditingMailRecipients&&this.handleBcc();break;default:break}}},created:function(){var e=this;this.debouncedHandleResizeMouseMove=K().throttle(this.handleResizeMouseMove,16),this.debouncedHandleResizeMouseUp=K().debounce(this.handleResizeMouseUp,200),this.$once("hook:beforeDestroy",(function(){e.debouncedHandleResizeMouseMove.cancel(),e.debouncedHandleResizeMouseUp.cancel()})),this.$nextTick((0,l.Z)((0,o.Z)().mark((function t(){var i,n,s,a,r,c,d,u,h,m,p,f,v,b,g,S,w,x,y,L,C,$;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i="",t.next=4,window.zoomSdk.postJsMessage({functionName:"mailui_getmailsignature",params:{}});case 4:if(n=t.sent,0!==n.returnCode?e.$msg(e.$t("detail.getSignatureFailed")):n.result.GetMailSignature.mailSign&&(i="\n            ".concat((0,ee.mM)(n.result.GetMailSignature.mailSign),"\n          ")),e.composeItem?(s=e.composeItem,a=s.bcc,r=s.from,c=s.cc,d=s.content,u=s.mailHead,h=s.to,m=s.attachments,p=(0,ee.mM)(I.cQ.sanitizeHTML2String(null===u||void 0===u?void 0:u.subject)),f=(0,ee.mM)(d,{WHOLE_DOCUMENT:!0}),v=I.cQ.sanitizeHTML2String(null===r||void 0===r?void 0:r.displayName),b=I.cQ.sanitizeHTML2String(null===r||void 0===r?void 0:r.emailAddr),e.isForward?(g=u&&u.subject?u.subject:"",e.subject="Fwd: "+g,e.attachments=m&&m.length>0?m.map((function(t){return t.msgId=e.composeItem.mailHead.msgId,t})):[],e.to=[],e.bcc=[],e.cc=[],S="\n              ".concat(Fi,'\n              <div class="gmail_quote">\n                <div class="gmail_attr">\n                  <div>---------- Forwarded message ---------- </div>\n                  <div>\n                    From: <b>').concat(v,'</b>&lt;<a href="mailto:').concat(b,'">').concat(b,"</a>&gt;\n                  </div>\n                  <div>Date: ").concat(e.formatTime(u.date),"</div>\n                  <div>Subject: ").concat(p,"</div>\n                  <div>To: ").concat(h.map((function(e){return e.displayName+'&lt;<a href="mailto:'+e.emailAddr+'">'+e.emailAddr+"</a>&gt;"})).join(", "),"\n                  </div>\n                  ").concat(c.length>0?"<div>Cc: "+c.map((function(e){return e.displayName+'&lt;<a href="mailto:'+e.emailAddr+'">'+e.emailAddr+"</a>&gt;"})).join(", ")+"</div>":"","\n                </div>\n                <br/>\n                ").concat(f,"\n              </div>\n            ")+'\n              <div class="gmail_signature">\n                '.concat(i,"\n              </div>\n            "),e.setEditorContent(S),e.setEditorEllipsisContent("")):e.isReply||(e.isDraft?(e.msgId=e.composeItem.mailHead.msgId,e.threadId=e.composeItem.mailHead.threadId,e.to=h?h.map((function(e){return e.emailAddr})):[],e.bcc=a?a.map((function(e){return e.emailAddr})):[],e.cc=c?c.map((function(e){return e.emailAddr})):[],u&&u.subject&&u.subject.length>0&&(e.subject=u.subject),d.length>0&&e.setEditorContent(d),e.attachments=m&&m.length>0?m:[],e.isZmail&&e.composeItem.sendMailEncryptOption&&(w=e.composeItem.sendMailEncryptOption,e.expirationSeconds=w.passwordExpireSeconds?w.passwordExpireSeconds:2592e3,e.showExpirationBanner=!!w.passwordExpireSeconds,e.passwordProtected="PasswordProtect"===w.Mode),x=bt.ou.now().toISO(),y=bt.ou.fromSeconds(u.date).toISO(),e.isZmail&&y&&x<y&&(e.showScheduledSend=!0,e.scheduledTime=bt.ou.fromSeconds(u.date))):(e.to=h?h.map((function(e){return e.emailAddr})):[],e.bcc=a?a.map((function(e){return e.emailAddr})):[],e.cc=c?c.map((function(e){return e.emailAddr})):[],L='\n            <div style="font-size: var(--text-base-size);">'.concat(d,"</div>\n          "),C="\n              ".concat(Fi,'\n              <div class="gmail_signature">\n                ').concat(i,"\n              </div>\n            "),e.setEditorContent(d?L+C:C),e.subject=u&&u.subject?u.subject:"",e.attachments=m&&m.length>0?m:[]))):(i.length>0?($="\n            ".concat(Fi,'\n            <div class="gmail_signature">\n              ').concat(i,"\n            </div>\n          "),e.setEditorContent($),e.setEditorEllipsisContent("")):e.setEditorContent(""),e.preTo.length>0&&(e.to=e.preTo)),e.debouncComposeChange=K().debounce((function(){e.doCreateOrUpdate()}),Zi.Z.composeChangedFrequency,{leading:!0,trailing:!0}),e.monitorComposeChange=function(){e.composePrepared&&(e.isComposeDirty=!0,e.debouncComposeChange())},e.updateImmediately=(0,l.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.msgId){t.next=5;break}return t.next=3,e.createDraft();case 3:t.next=8;break;case 5:if(!e.msgId){t.next=8;break}return t.next=8,e.updateDraft();case 8:case"end":return t.stop()}}),t)}))),e.$watch("to",e.monitorComposeChange),e.$watch("cc",e.monitorComposeChange),e.$watch("bcc",e.monitorComposeChange),e.$watch("subject",e.monitorComposeChange),e.$watch("attachments",e.updateImmediately),e.$watch("expirationSeconds",e.monitorComposeChange),e.$watch("passwordProtected",e.monitorComposeChange),e.$watch("scheduledTime",e.monitorComposeChange),e.composePrepared=!0,e.recipients.length&&(e.isEditingMailContent=!0),e.autofocus(),!e.isZmail){t.next=34;break}return t.prev=22,t.next=25,e.batchRefreshFingerprintCache({emailList:e.recipients.slice()});case 25:t.next=31;break;case 28:t.prev=28,t.t0=t["catch"](22);case 31:return t.prev=31,e.refreshFingerprintDone=!0,t.finish(31);case 34:case"end":return t.stop()}}),t,null,[[22,28,31,34]])}))))},mounted:function(){q()(document).on("mousemove",this.debouncedHandleResizeMouseMove),q()(document).on("mouseup",this.debouncedHandleResizeMouseUp),q()(document).on("mouseleave",this.handleResizeMouseLeave)},beforeDestroy:function(){q()(document).off("mousemove",this.debouncedHandleResizeMouseMove),q()(document).off("mouseup",this.debouncedHandleResizeMouseUp),q()(document).off("mouseleave",this.handleResizeMouseLeave)},methods:(0,c.Z)((0,c.Z)({},(0,d.nv)("fingerprint",["batchRefreshFingerprintCache"])),{},{handleHasExternal:function(e){this.hasExternalRecipient=e},handleEditScheduledSend:function(e){this.isEditScheduledSend=e},handleCustomTimeVisible:function(e){this.customTimeVisible=e},handleScheduledSend:function(e){this.showScheduledSend=e},handleShowScheduledSendActions:function(e){this.showScheduledSendActions=e},setScheduledTime:function(e){this.scheduledTime=e},autofocus:function(){try{if(!this.to.length)return void this.focusToSelector("to");if(!this.subject.length)return void this.$refs.input.focus();this.getEditorInstance().focus()}catch(e){}},handleResizeMouseDown:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e.pageX,n=e.pageY;this.resizeOriginalPos={pageX:i,pageY:n},this.originalComposeHeight=this.composeHeight,this.originalComposeWidth=this.composeWidth,this.resizing=!0,this.resizeOri=t},handleResizeMouseMove:function(e){if(this.resizing){e.preventDefault();var t=e.originalEvent,i=t.pageY,n=t.pageX;i<20&&(i=20),n<20&&(n=20);var s=this.resizeOriginalPos.pageY,a=s-i,r=this.originalComposeHeight+a;this.composeHeight=r<400?400:r}},handleResizeMouseUp:function(){this.resizing=!1,this.resizeOri="",this.resizeOriginalPos={pageX:0,pageY:0},this.originalComposeHeight=this.composeHeight,this.originalComposeWidth=this.composeWidth},handleResizeMouseLeave:function(){this.resizing=!1,this.resizeOri="",this.resizeOriginalPos={pageX:0,pageY:0},this.originalComposeHeight=this.composeHeight,this.originalComposeWidth=this.composeWidth},handleEditorContentUpdate:function(){this.monitorComposeChange&&this.monitorComposeChange()},handleDraftDelete:function(){this.msgId&&window.zoomSdk.postJsMessage({functionName:"mailui_deletedraft",params:{draftId:this.msgId}}),this.resetInfo(),this.$emit("triggerClose",this.id)},formatTime:function(e){return bt.ou.fromSeconds(e).setZone(this.userTimeZone).toLocaleString(bt.ou.DATETIME_MED)},handleMini:function(){this.recipients.length>0&&(this.isEditingMailContent=!0),this.$Bus.$emit("disableLinkPopoverVisible"),this.doCreateOrUpdate(),this.$emit("minimize")},resetInfo:function(){this.to=[],this.cc=[],this.bcc=[],this.setEditorContent(Fi),this.subject="",this.attachments=[],this.passwordProtected=!1,this.totalMessageSize=0},handleFullScreen:function(){this.$Bus.$emit("disableLinkPopoverVisible"),this.fullScreen=!this.fullScreen},resetEditingMailRecipientsState:function(e){this.isEditingMailRecipients=!1},handleFocus:function(e,t){"recipients"===t?(this.isEditingMailRecipients=!0,this.showScheduledSendActions=!1):(this.hideCcBccIfEmpty(),"editor"===t?(this.isEditingMailContent=!0,this.isEditingMailRecipients=!1):"subject"===t&&(this.isEditingMailSubject=!0,this.isEditingMailRecipients=!1,this.showScheduledSendActions=!1))},hideCcBccIfEmpty:function(){this.showBcc=Boolean(this.bcc.length),this.showCc=Boolean(this.cc.length)},handleBlur:function(e,t){"editor"===t?this.isEditingMailContent=!1:"subject"===t&&(this.isEditingMailSubject=!1)},handleCc:function(){var e=this;this.showCc=!0,this.$nextTick((function(){return e.$refs.ccContactRef.focus()}))},handleBcc:function(){var e=this;this.showBcc=!0,this.$nextTick((function(){return e.$refs.bccContactRef.focus()}))},triggerClose:function(){this.$Bus.$emit("disableLinkPopoverVisible"),this.doCreateOrUpdate(),this.$emit("triggerClose",this.id)},updateDraft:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,window.zoomSdk.postJsMessage({functionName:"mailui_updatedraft",params:{mailSendInfo:{subject:e.subject,content:(0,ee.mM)(e.getEditorContent()),inReplyTo:"",forwardMsgZid:e.isForward&&e.composeItem&&e.composeItem.mailHead.msgId?e.composeItem.mailHead.msgId:"",draftId:"",msgId:e.msgId,mailEncryptionMode:e.detectMailEncryptionMode(),passwordExpireSeconds:e.passwordProtected?e.expirationSeconds:void 0,scheduledSendTime:e.scheduledTime?e.convertTime(e.scheduledTime):null,toUserEmail:e.to.map((function(e){return{emailAddr:e,displayName:e.split("@")[0]}})),ccUserEmail:e.cc.map((function(e){return{emailAddr:e,displayName:e.split("@")[0]}})),bccUserEmail:e.bcc.map((function(e){return{emailAddr:e,displayName:e.split("@")[0]}})),atListUserEmail:[],attachments:e.attachments}}});case 2:e.$emit("creatingOrUpdating",e.id),e.getThreadHeadAllLabels();case 4:case"end":return t.stop()}}),t)})))()},getThreadHeadAllLabels:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){var i,n,s,a,r;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=I.e.labelUtil.getDraftLabelId(),s){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,(0,ee.vA)(te.t.getThreadHead(s,e.threadId),(function(t){e.$store.commit("addGetThreadHead",t)}));case 6:a=t.sent,r=(null===a||void 0===a||null===(i=a.GetThreadHead)||void 0===i||null===(n=i.threadHead)||void 0===n?void 0:n.showLabelIds)||[],Promise.all(null===r||void 0===r?void 0:r.map((function(t){return(0,ee.vA)(te.t.getThreadHead(t,e.threadId),(function(t){e.$store.commit("addGetThreadHead",t)}))})));case 9:case"end":return t.stop()}}),t)})))()},createDraft:function(){var e=this;return window.zoomSdk.postJsMessage({functionName:"mailui_createdraft",params:{mailSendInfo:{subject:this.subject,content:(0,ee.mM)(this.getEditorContent()),inReplyTo:"",forwardMsgZid:this.isForward&&this.composeItem&&this.composeItem.mailHead.msgId?this.composeItem.mailHead.msgId:"",msgId:"",mailEncryptionMode:this.detectMailEncryptionMode(),passwordExpireSeconds:this.passwordProtected?this.expirationSeconds:void 0,scheduledSendTime:this.scheduledTime?this.convertTime(this.scheduledTime):null,toUserEmail:this.to.map((function(e){return{emailAddr:e,displayName:e.split("@")[0]}})),ccUserEmail:this.cc.map((function(e){return{emailAddr:e,displayName:e.split("@")[0]}})),bccUserEmail:this.bcc.map((function(e){return{emailAddr:e,displayName:e.split("@")[0]}})),atListUserEmail:[],attachments:this.attachments}}}).then((function(t){return 0===t.returnCode?(e.$emit("creatingOrUpdating",e.id),e.msgId=t.result.CreateDraft.msgId,e.threadId=t.result.CreateDraft.threadId,e.$store.commit("updateInstantDraftThread",{id:e.id,threadId:e.threadId})):e.$msg(e.$t("detail.createDraftFailed")),t}))},doCreateOrUpdate:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isComposeDirty){t.next=2;break}return t.abrupt("return");case 2:if(!e.isSending){t.next=4;break}return t.abrupt("return");case 4:if(!e.creatingOrUpdating){t.next=6;break}return t.abrupt("return");case 6:if(e.creatingOrUpdating=!0,e.msgId){t.next=12;break}return t.next=10,e.createDraft();case 10:t.next=15;break;case 12:if(!e.msgId){t.next=15;break}return t.next=15,e.updateDraft();case 15:e.creatingOrUpdating=!1;case 16:case"end":return t.stop()}}),t)})))()},handleShowCompose:function(){this.$store.commit("setCurrentSend",""),this.$store.commit("setCurrentInstantDraft",{key:this.id,composeItem:this.composeItem,isDraft:this.isDraft,isForward:this.isForward,isReply:this.isReply,preTo:this.preTo})},handleSend:function(){var e=this,t=[];if(this.attachments.forEach((function(e){"Error"!==e.downloadStatus&&t.push(e)})),this.attachments.length>t.length){var i=this.$t("editor.attachmentsFailedToLoad"),n=this.$t("editor.confirmSendContent");this.$confirm(n,i,{confirmButtonText:this.$t("editor.sendEmail"),cancelButtonText:this.$t("operation.cancel"),closeOnClickModal:!1,callback:function(i){"confirm"===i&&e.delayedSend(t,!0)}})}else this.delayedSend()},delayedSend:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isDisable)this.$msg(this.$t("editor.emailContentCannotBeEmpty"));else if(0!==this.to.length||0!==this.bcc.length||0!==this.cc.length){var n=this.validateEmails([].concat((0,Y.Z)(this.to),(0,Y.Z)(this.bcc),(0,Y.Z)(this.cc)));if(n.length>0)this.$msg(n.length>1?this.$t("compose.emailNotValid",[n.join(", ")]):this.$t("compose.emailIsInvalid"));else{this.handleMini(),this.$store.commit("setCurrentSend",this.id),this.$store.commit("changeSendingFlag",{key:this.id,status:!0});var s,a=[];this.isZmail&&(this.recipients.forEach((function(t){if(t&&!e.externalList.includes(t)){var i=e.getCachedEmailFingerprint(t);i&&a.push({email:t,fingerprint:i})}})),s=function(t){e.$Bus.$emit("onZmailFingerprintChange",{recipients:t})});var r={subject:this.subject,content:(0,ee.mM)(this.getEditorContent()),inReplyTo:"",forwardMsgZid:this.isForward&&this.composeItem&&this.composeItem.mailHead.msgId?this.composeItem.mailHead.msgId:"",msgId:this.msgId,mailEncryptionMode:this.detectMailEncryptionMode(),passwordExpireSeconds:this.passwordProtected?this.expirationSeconds:void 0,scheduledSendTime:this.scheduledTime?this.convertTime(this.scheduledTime):null,toUserEmail:this.to.map((function(e){return{emailAddr:e,displayName:e.split("@")[0]}})),ccUserEmail:this.cc.map((function(e){return{emailAddr:e,displayName:e.split("@")[0]}})),bccUserEmail:this.bcc.map((function(e){return{emailAddr:e,displayName:e.split("@")[0]}})),atListUserEmail:[],ignoreFailedAttachments:i,attachments:i?t:this.attachments,userFingerprints:a};this.isSending=!0,(0,Pi.Y)({el:this.$root,mailSendInfo:r,undoDuration:this.undoDuration,onSendSuccessfully:function(){e.$emit("triggerClose",e.id)},onAfterSend:function(){e.triggerClose(),e.isSending=!1},onCancel:function(){e.isSending=!1,e.$store.commit("changeSendingFlag",{key:e.id,status:!1}),e.handleShowCompose()},onZmailFingerprintChange:s},this.typeOfEmail)}}else this.$msg(this.$t("compose.toIsEmpty"))},handleSelectedFiles:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.checkMsgId();case 2:return i.prev=2,i.next=5,t.isValidateFilesSize(e);case 5:n=i.sent,n&&e.forEach((function(e){var i=t.attachments.findIndex((function(t){return t.filePath===e.filePath}));-1===i&&t.attachments.push(e)})),i.next=12;break;case 9:i.prev=9,i.t0=i["catch"](2);case 12:case"end":return i.stop()}}),i,null,[[2,9]])})))()},handleSetSecurity:function(){this.showExpirationModal=!0},handleExpirationCancel:function(){this.showExpirationModal=!1},handleExpirationRemove:function(){this.passwordProtected=!1,this.showExpirationBanner=!1,this.showExpirationModal=!1},handleSetSecurityExpiration:function(e){this.expirationSeconds=e},handleExpirationSelect:function(e){this.showExpirationModal=!1,this.expirationSeconds=e,this.passwordProtected=!0,this.showExpirationBanner=!0},handleCloseExpirationBanner:function(){this.showExpirationBanner=!1},validateEmails:function(e){var t=this,i=[];return e.forEach((function(e){t.validateEmail(e)||i.push(e)})),(0,Y.Z)(new Set(i))},validateEmail:function(e){return String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},getEditorComponent:function(){if(this.isEditorMounted)return this.$refs.editor.$refs.squireEditor},getEditorInstance:function(){return this.$refs.editor.$refs.squireEditor.editorInstance},getEditorContent:function(){var e=this.getEditorComponent();if(e){var t=e.getContent(),i='<div style="font-size: var(--text-base-size);"><br></div>';return t===i?"":t}return""},setEditorContent:function(e){var t=this.getEditorInstance();t&&t.setHTML(e||Fi)},setEditorEllipsisContent:function(e){var t=this.getEditorComponent();t&&t.setEllipsisContent(e)},isEditorEmpty:function(){var e=this.getEditorContent();return!q()(e).text()},editorMounted:function(){this.isEditorMounted=!0},setWidth:function(e){this.composeWidth=e},setHeight:function(e){this.composeHeight=e},getPosition:function(){var e=this.$refs.root.getBoundingClientRect();return{left:e.left,top:e.top,width:e.width,height:e.height}},isFullScreen:function(){return this.fullScreen},focusToSelector:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isEditingMailRecipients=!0;var i={to:this.$refs.toContactRef,cc:this.$refs.ccContactRef,bcc:this.$refs.bccContactRef};"cc"===e&&t?(this.showCc=!0,this.showBcc=Boolean(this.bcc.length)):"bcc"===e&&t?(this.showCc=Boolean(this.cc.length),this.showBcc=!0):(this.showCc=Boolean(this.cc.length),this.showBcc=Boolean(this.bcc.length)),this.$nextTick((function(){var t;return null===(t=i[e])||void 0===t?void 0:t.focus()}))},key:function(e){return"".concat(e," + ").concat((0,oi.Z)())},isValidateMail:function(e){return(0,ee.Xt)(e)},needAttachBccIndicator:function(e,t){return e===this.publicRecipients.length&&this.bcc.includes(t)},dragEnter:function(e){this.$emit("onDragEnter",e)},resetShowActions:function(){this.$refs.toContactRef&&(this.$refs.toContactRef.showActions=!1,this.$refs.toContactRef.targetContact=null),this.$refs.ccContactRef&&(this.$refs.ccContactRef.showActions=!1,this.$refs.ccContactRef.targetContact=null),this.$refs.bccContactRef&&(this.$refs.bccContactRef.showActions=!1,this.$refs.bccContactRef.targetContact=null)},convertTime:function(e){return Math.floor(e.toSeconds())},detectMailEncryptionMode:function(){return this.passwordProtected?"PasswordProtect":this.externalListLength?"Plaintext":"ExternalDisAllowed"}})},Ui=Ni,Vi=(0,_.Z)(Ui,Li,Ci,!1,null,null,null),Bi=Vi.exports,Gi=function(){var e=this,t=e._self._c;return t("transition",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isHide,expression:"isHide"}],class:["compose-shortcut-wrap",{active:e.isCurrent}],attrs:{title:e.isAllowCompose?"":e.$t("editor.resizeYourWindowToHaveMoreSpace")}},[t("div",{staticClass:"compose-shortcut-left"},[e.creatingOrUpdatingLists[e.id]?t("i",[e._v(" ["+e._s(e.$t("label.draft"))+"]  ")]):e._e(),t("span",[e._v(e._s(e.title))])]),t("div",{class:["compose-shortcut-right"]},[t("svg-icon",{directives:[{name:"show",rawName:"v-show",value:!e.isCurrent&&e.isAllowCompose,expression:"!isCurrent && isAllowCompose"}],attrs:{iconClass:"maximize",className:"compose-icon"},on:{click:e.handleShowCompose}}),t("svg-icon",{attrs:{iconClass:"close",className:"compose-icon"},on:{click:e.handleCloseCompose}})],1)])])},ji=[],Wi={name:"ComposeShortcut",props:{id:{type:String,default:""},isCurrent:{type:Boolean,default:!1},composeItem:{type:Object,default:function(){}},isDraft:{type:Boolean,default:!1},isForward:{type:Boolean,default:!1},isReply:{type:Boolean,default:!1},preTo:{type:Array,default:function(){return[]}},creatingOrUpdatingLists:{type:Object,default:function(){}},isAllowCompose:{type:Boolean,default:!0}},data:function(){return{snippet:""}},computed:(0,c.Z)((0,c.Z)({},(0,d.rn)(["isCurrentSent"])),{},{title:function(e){var t=e.snippet,i=e.composeItem;return t||(i&&i.plainText?i.plainText:this.$t("editor.newMail"))},isHide:function(e){var t=e.id,i=e.isCurrentSent;return!(i&&i===t)}}),methods:{handleShowCompose:function(){this.$store.commit("setCurrentInstantDraft",{key:this.id,composeItem:this.composeItem,isDraft:this.isDraft,isForward:this.isForward,isReply:this.isReply,preTo:this.preTo})},handleCloseCompose:function(){this.$emit("close",this.id)},setComposeSinippet:function(e){this.snippet=e}}},Yi=Wi,Xi=(0,_.Z)(Yi,Gi,ji,!1,null,null,null),qi=Xi.exports,Ji={name:"ComposeContainer",components:{Compose:Bi,ComposeShortcut:qi},props:{composeItem:{type:Object,default:function(){}}},data:function(){return{creatingOrUpdatingLists:{},lastWindowWidth:window.innerWidth,lastWindowHeight:window.innerHeight,hideShortcuts:!1,allowComposeFromShortcut:!0}},computed:(0,c.Z)((0,c.Z)({},(0,d.rn)({currentCompose:"currentInstantDraft",composeList:"instantDraftList"})),{},{composeShortcutList:function(e){var t=e.composeList;return t.filter((function(e){return!e.status}))},isComposeShouldOnEdge:function(e){var t=e.composeShortcutList,i=e.currentCompose;return t.length<1||!(t.length>1)&&!!i},hasMultiShortcuts:function(e){var t=e.composeShortcutList;return t.length>1},showComposeShortCut:function(e){var t=e.composeShortcutList,i=e.currentCompose;return 0!==t.length&&(t.length>1||!i)},activeCompose:function(e){var t=e.currentCompose;return t?this.$refs["composeRef_".concat(t.key)][0]:null}}),watch:{currentCompose:function(e){e&&(e.isDraft&&this.creatingOrUpdating(e.key),this.hideShortcuts=!1)}},created:function(){var e=this;this.debouncedAutoLayoutCompose=K().throttle(this.$autoLayoutCompose,16),this.$once("hook:beforeDestroy",(function(){e.debouncedAutoLayoutCompose.cancel()})),this.handleComposeUpdate=K().throttle((function(t){var i=t.id,n=t.subject,s=e.$refs["composeShortcut_".concat(i)][0];s&&(null===s||void 0===s||s.setComposeSinippet(n.slice(0,20)))}),200)},mounted:function(){window.addEventListener("resize",this.debouncedAutoLayoutCompose)},beforeDestroy:function(){window.removeEventListener("resize",this.debouncedAutoLayoutCompose)},methods:{creatingOrUpdating:function(e){this.$set(this.creatingOrUpdatingLists,e,!0)},handleComposeClose:function(e){this.doComposeClose(e)},handleComposeMinimize:function(){this.$store.commit("setCurrentInstantDraft",null)},handleShortcutClose:function(e){var t=this.$refs["composeRef_".concat(e)][0];null===t||void 0===t||t.triggerClose()},doComposeClose:function(e){this.currentCompose&&this.currentCompose.key===e&&this.$store.commit("setCurrentInstantDraft",null);var t=this.$store.state.instantDraftList.filter((function(t){return e!==t.key}));this.$store.commit("setInstantDraftList",t)},resetInstantDraftsMsgIdByThreadIds:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.composeList.length&&this.composeList.forEach((function(i){var n,s,a=i.threadId||(null===(n=i.composeItem)||void 0===n||null===(s=n.mailHead)||void 0===s?void 0:s.threadId);if(a&&t.includes(a)){var r=e.$refs["composeRef_".concat(i.key)][0];r&&(r.msgId="")}}))},isDecreasingWindow:function(){return this.lastWindowWidth>window.innerWidth||this.lastWindowHeight>window.innerHeight},isIncreasingWindow:function(){return this.lastWindowWidth<window.innerWidth||this.lastWindowHeight<window.innerHeight},need2HideShortcutsForCompose:function(){if(this.hasMultiShortcuts&&this.currentCompose){var e,t,i=null===(e=this.activeCompose)||void 0===e?void 0:e.composeWidth,n=null===(t=this.$refs.shortcutListRef)||void 0===t?void 0:t.getBoundingClientRect();if(n)return n.right-n.width>i+10}return!1},allowComposeByShortcuts:function(){var e,t=null===(e=this.$refs.shortcutListRef)||void 0===e?void 0:e.getBoundingClientRect();if(t&&this.hasMultiShortcuts)return t.right-t.width>Oi.DEFAULT_WIDTH+10;if(!this.hasMultiShortcuts){var i=0===t.width;return t.right>Oi.DEFAULT_WIDTH+10||i}return!1},$autoLayoutCompose:function(){var e,t=60,i=10,n=.7*Oi.DEFAULT_HEIGHT;if(!this.currentCompose||null===(e=this.activeCompose)||void 0===e||!e.isFullScreen()){if(this.isDecreasingWindow()&&this.currentCompose){var s,a=this.activeCompose.getPosition(),r=a.left,o=null===(s=this.activeCompose)||void 0===s?void 0:s.composeHeight;if(r<t){var l,c=o-i,d=c<n||r<=10;if(d){if(!this.hideShortcuts){var u=this.need2HideShortcutsForCompose();if(u)return void(this.hideShortcuts=!0)}this.handleComposeMinimize(),this.allowComposeFromShortcut=!1}null===(l=this.activeCompose)||void 0===l||l.setHeight(c)}}if(this.isIncreasingWindow()){if(this.currentCompose){var h,m,p=null===(h=this.activeCompose)||void 0===h?void 0:h.composeHeight,f=p<Oi.DEFAULT_WIDTH;if(f)null===(m=this.activeCompose)||void 0===m||m.setHeight(p+10>Oi.DEFAULT_HEIGHT?Oi.DEFAULT_HEIGHT:p+10)}this.hasMultiShortcuts&&this.hideShortcuts&&(this.hideShortcuts=!this.need2HideShortcutsForCompose())}this.allowComposeFromShortcut=this.allowComposeByShortcuts(),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}}}},Ki=Ji,Qi=(0,_.Z)(Ki,xi,yi,!1,null,"de39e3e8",null),en=Qi.exports,tn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"vacation-banner"},[t("div",[e._v(" "+e._s(e.vacationResponder.responseSubject)+"   "),t("span",{staticClass:"banner-content",on:{click:e.disableVacationAutoReply}},[e._v("End now")]),e._v("   "),t("span",{staticClass:"banner-content",on:{click:e.goVacationSetting}},[e._v("Vacation Setting")])])])},nn=[],sn={name:"VacationResponderBanner",components:{},props:{},data:function(){return{}},computed:(0,c.Z)({},(0,d.rn)(["vacationResponder"])),methods:{disableVacationAutoReply:function(){var e=this,t=this.vacationResponder;t.enableAutoReply=!1;var i=JSON.stringify(t);window.zoomSdk.postJsMessage({functionName:"mailui_updatevacationresponder",params:{vacationResponder:i}}).then((function(t){if(0===t.returnCode)try{var i=JSON.parse(t.result.UpdateVacationResponder.vacationResponder);e.$store.commit("setVacationResponder",i),e.$undoNotice({title:e.$t("vacationSettings.vacationResponderUpdated")})}catch(n){e.$msg(e.$t("vacationSettings.updateVacationResponderFailed"))}else e.$msg(e.$t("vacationSettings.updateVacationResponderFailed"))}))},goVacationSetting:function(){this.$router.push({name:"Groups",path:"/group",params:{tab:"Vacation",path:this.$route.path}})}}},an=sn,rn=(0,_.Z)(an,tn,nn,!1,null,"6bcb53ac",null),on=rn.exports,ln={name:"NewUIView",components:{SystemLabels:R,UserLabels:V,inbox:wi,ComposeContainer:en,ShortcutReminder:B.Z,VacationResponderBanner:on},data:function(){return{tabed:!1}},computed:(0,c.Z)((0,c.Z)((0,c.Z)({},(0,d.rn)(["mailLabels","selectMailLabel","isSidebarMinimized","vacationResponder","isSplitView","userProfile"])),(0,d.Se)(["sidebarMenuWidth","isZmail","isOutlook","isGmail"])),{},{isMinimized:function(e){var t=e.isSidebarMinimized;return t},showBanner:function(e){var t=e.vacationResponder;if(!t.startTime||!t.enableAutoReply)return!1;var i=t.startTime,n=t.endTime?t.endTime:t.startTime,s=new Date;return t.enableAutoReply&&s>=i&&s<=n},selectMailLabelData:function(e){var t=e.mailLabels,i=e.selectMailLabel;return t.find((function(e){return e.id===(null===i||void 0===i?void 0:i.id)}))||{}}}),watch:{activeKeyBinding:function(e){var t=e.action,i=e.event;if(i&&!(0,ee.LJ)(i))switch(t){case"compose":i.preventDefault(),this.openCompose();break;default:break}}},created:function(){var e=this;window.zoomSdk.postJsMessage({functionName:"mailui_getvacationresponder",params:{}}).then((function(t){if(0===t.returnCode){var i=JSON.parse(t.result.GetVacationResponder.vacationResponder);e.$store.commit("setVacationResponder",i)}}))},mounted:function(){var e=this;document.addEventListener("keydown",this.holdScroll),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("keydown",e.holdScroll)}))},methods:{holdScroll:function(e){if(e&&!(0,ee.LJ)(e))if("ArrowUp"===e.key)e.preventDefault(),this.mimicScroll("up");else{if("ArrowDown"!==e.key)return;e.preventDefault(),this.mimicScroll("down")}},mimicScroll:function(e){var t=this.$refs.inboxRef.$refs.recycleScroller.getScroll().start;switch(e){case"up":this.$refs.inboxRef.$refs.recycleScroller.scrollToPosition(t-50);break;case"down":this.$refs.inboxRef.$refs.recycleScroller.scrollToPosition(t+50);break;default:break}},handleTab:function(){this.tabed=!0},closeInboxContextMenu:function(){var e=this.$children.find((function(e){return e.showActions}));e&&(e.showActions=!1,e.selectItem={})},openCompose:function(){this.$Bus.$emit("disableLinkPopoverVisible"),this.$compose()},handleSelectLabel:function(e){var t=this;return(0,l.Z)((0,o.Z)().mark((function i(){var n;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=t.$store.state.showDetail,t.$store.state.isSplitView||t.$store.commit("changeShowDetail",!1),t.closeInboxContextMenu(),t.selectMailLabel.id!==e.id){i.next=6;break}return t.$nextTick((function(){var e;n||(null===(e=t.$refs.inboxRef.$refs.recycleScroller)||void 0===e||e.scrollToPosition(0))})),i.abrupt("return");case 6:t.$store.commit("changeInSearchBox",!1),t.$store.commit("changeInFilters",!1),t.$router.push({name:"inbox",params:{id:e["id"].toLowerCase()}},(function(){t.$store.commit("changeSelectMailLabel",e),t.$store.commit("changeSelectPrevLabel",e),t.$store.commit("changeInSearchBox",!1),t.$store.commit("changeInFilters",!1)}));case 9:case"end":return i.stop()}}),i)})))()},toggleMinimize:function(e){var t=this.$store.state.isSidebarMinimized;this.$store.commit("changeSidebarMinimized",!t),"keydown"===e.type&&this.$msg({content:this.isMinimized?this.$t("sidebar.minimized"):this.$t("sidebar.maximized"),type:"Success"})},resetInstantDraftsMsgIdByThreadIds:function(e){var t;null===(t=this.$refs.composeContainer)||void 0===t||t.resetInstantDraftsMsgIdByThreadIds(e)}}},cn=ln,dn=(0,_.Z)(cn,a,r,!1,null,"73190fa4",null),un=dn.exports},56423:function(e,t){var i,n,s;(function(a,r){n=[],i=r,s="function"===typeof i?i.apply(t,n):i,void 0===s||(e.exports=s)})(0,(function(){var e=/(auto|scroll)/,t=function(e,i){return null===e.parentNode?i:t(e.parentNode,i.concat([e]))},i=function(e,t){return getComputedStyle(e,null).getPropertyValue(t)},n=function(e){return i(e,"overflow")+i(e,"overflow-y")+i(e,"overflow-x")},s=function(t){return e.test(n(t))},a=function(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var i=t(e.parentNode,[]),n=0;n<i.length;n+=1)if(s(i[n]))return i[n];return document.scrollingElement||document.documentElement}};return a}))},81983:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return h}});var n=function(){var e=this,t=e._self._c;return t("div",{ref:"container",staticClass:"mc-drop-zone-container",on:{dragenter:e.$onDragEnter,dragover:e.debouncedDragOver,dragleave:function(t){return t.stopPropagation(),e.$onDragLeave.apply(null,arguments)}}},[e._t("default"),e.canDrop?t("div",{staticClass:"mc-drop-zone-overlay"},[e._t("mc-drop-zone-place-holder",(function(){return[t("span",{staticClass:"mc-drop-zone-place-holder"},[e._v(e._s(e.$t("editor.dropFilesHere")))])]}))],2):e._e()],2)},s=[],a=i(76635),r=i.n(a),o={name:"DropZone",props:{onDragEnter:{type:Function},onDragOver:{type:Function},onDrop:{type:Function},onLeaveWindow:{type:Function},filesOnly:{type:Boolean,default:!1}},data:function(){return{canDrop:!1,isDraggingLeave:!0,lastEnterElement:null}},watch:{canDrop:{handler:function(e){!e&&this.debouncedCanDrop(),e&&this.$onDragEnter()}}},created:function(){var e=this;this.debouncedDragOver=r().debounce(this.$onDragOver,16),this.debouncedCanDrop=r().debounce(this.$canDrop,100),this.$once("hook:beforeDestroy",(function(){e.debouncedDragOver.cancel(),e.debouncedCanDrop.cancel()}))},mounted:function(){var e=this;window.addEventListener("dragenter",this.$setCanDrop),window.addEventListener("dragover",this.$setCanDrop),window.addEventListener("dragleave",this.$unsetCanDrop),window.addEventListener("mouseout",this.$unsetCanDrop),window.addEventListener("drop",this.$unsetCanDrop),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("dragenter",e.$setCanDrop),window.removeEventListener("dragover",e.$setCanDrop),window.removeEventListener("dragleave",e.$unsetCanDrop),window.removeEventListener("drop",e.$unsetCanDrop),window.removeEventListener("mouseout",e.$unsetCanDrop)}))},methods:{$canDrop:function(){this.onLeaveWindow&&this.onLeaveWindow()},$onDragEnter:function(){if(this.onDragEnter&&this.canDrop){var e=this.$refs.container.getBoundingClientRect();return this.onDragEnter(e)}},$onDragOver:function(){if(this.onDragOver)return this.onDragOver()},$onDragLeave:function(){this.onDragLeave&&this.onDragLeave()},$setCanDrop:function(e){this.lastEnterElement=e.target,e.preventDefault(),this.filesOnly&&!e.dataTransfer.types.includes("Files")||(this.canDrop=!0)},$unsetCanDrop:function(e){e.preventDefault(),this.canDrop&&e.target===this.lastEnterElement&&(this.canDrop=!1)}}},l=o,c=i(93483),d=(0,c.Z)(l,n,s,!1,null,"1ca0b15e",null),u=d.exports,h=u},99391:function(e,t,i){"use strict";e.exports=i.p+"static/img/search-files.4487810a.svg"},66813:function(e,t,i){"use strict";e.exports=i.p+"static/img/splash.77bac1b7.svg"}}]);