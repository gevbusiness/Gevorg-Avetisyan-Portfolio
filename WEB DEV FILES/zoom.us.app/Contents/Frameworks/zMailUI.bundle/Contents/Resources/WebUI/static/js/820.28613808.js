"use strict";(self["webpackChunk_zoom_client_email_desktop"]=self["webpackChunk_zoom_client_email_desktop"]||[]).push([[820],{96820:function(t,a,s){s.r(a),s.d(a,{default:function(){return L}});var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"to-cc-bcc-wrap"},[t.showMore?a("div",[a("div",{staticClass:"recepients"},[t.toList.length?a("span",{staticClass:"label label-mini"},[t._v("To: ")]):t._e(),t._l(t.toList,(function(s){return a("avatar-tag",{key:s.emailAddr,attrs:{userInfo:s,isExternal:t.isExternalAddress(s.emailAddr)}})})),t.ccList.length?a("span",{staticClass:"label label-mini"},[a("span",{staticClass:"first-label"},[t._v("Cc: ")]),t._l(t.ccList,(function(s){return a("avatar-tag",{key:s.emailAddr,attrs:{userInfo:s,isExternal:t.isExternalAddress(s.emailAddr)}})}))],2):t._e(),t.bccList.length?a("span",{staticClass:"label label-mini"},[a("span",{staticClass:"first-label"},[t._v("Bcc: ")]),t._l(t.bccList,(function(s){return a("avatar-tag",{key:s.emailAddr,attrs:{userInfo:s,isExternal:t.isExternalAddress(s.emailAddr)}})}))],2):t._e(),t.sumLen>t.LIMIT_NUM?a("div",{staticClass:"avatar-tag-wrap more",on:{click:function(a){return a.stopPropagation(),t.handleMore.apply(null,arguments)}}},[t._v(" +"+t._s(t.sumLen-t.LIMIT_NUM)+" ")]):t._e()],2)]):t._e(),t.showMore?t._e():a("div",[t.to.length?a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("To: ")]),a("div",{staticClass:"avatar-tag"},t._l(t.to,(function(s){return a("avatar-tag",{key:s.emailAddr,attrs:{userInfo:s,isExternal:t.isExternalAddress(s.emailAddr)}})})),1)]):t._e(),t.cc.length?a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("Cc: ")]),a("div",{staticClass:"avatar-tag"},t._l(t.cc,(function(s){return a("avatar-tag",{key:s.emailAddr,attrs:{userInfo:s,isExternal:t.isExternalAddress(s.emailAddr)}})})),1)]):t._e(),t.bcc.length?a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("Bcc:")]),a("div",{staticClass:"avatar-tag"},t._l(t.bcc,(function(s){return a("avatar-tag",{key:s.emailAddr,attrs:{userInfo:s,isExternal:t.isExternalAddress(s.emailAddr)}})})),1)]):t._e(),t.sumLen>t.LIMIT_NUM?a("div",{staticClass:"hide-all",on:{click:function(a){return a.stopPropagation(),t.handleMore.apply(null,arguments)}}},[t._v(" "+t._s(t.$t("editor.hideAll"))+" ")]):t._e()])])},i=[],n=s(70021),r=s(6041),l=s(56706),c=s(34948),o=function(){var t=this,a=t._self._c;return a("div",{class:["avatar-tag-wrap",{"is-external":t.isExternal}]},[a("div",{staticClass:"avatar-tag"},[a("div",{staticClass:"avatar-wrap"},[a("Avatar",{staticClass:"avatar",attrs:{email:t.userInfo.emailAddr,name:t.getDisplayNameWithoutQuotation()}})],1),a("zm-tooltip",{attrs:{content:t.userInfo.emailAddr}},[a("div",{staticClass:"display-name"},[t._v(t._s(t.getDisplayNameWithoutQuotation()))])])],1)])},u=[],d=s(86598),h={name:"AvatarTag",components:{Avatar:d.Z},props:{userInfo:{type:Object,default:function(){return{}}},isExternal:{type:Boolean,default:!1}},methods:{getDisplayNameWithoutQuotation:function(){var t=this.userInfo.displayName.slice(0,1),a=this.userInfo.displayName.slice(-1);return t!==a||"'"!==t&&'"'!==t?this.userInfo.displayName:this.userInfo.displayName.slice(1,-1)}}},m=h,f=s(93483),p=(0,f.Z)(m,o,u,!1,null,"2adf93c4",null),v=p.exports,_=s(27804),g=s(20629),b=3,A={name:"ToCcBccWrap",components:{AvatarTag:v},props:{to:{type:Array,default:function(){return[]}},cc:{type:Array,default:function(){return[]}},bcc:{type:Array,default:function(){return[]}}},data:function(){return{LIMIT_NUM:b,showMore:!0,nums:0,toList:[],ccList:[],bccList:[],externalUsers:[]}},computed:(0,c.Z)((0,c.Z)({},(0,g.Se)(["isZmail"])),{},{sumLen:function(){return this.to.length+this.cc.length+this.bcc.length}}),watch:{showMore:{handler:function(t){t?this.init():(this.toList=this.to,this.ccList=this.cc,this.bccList=this.bcc)},immediate:!0}},mounted:function(){var t=this;return(0,l.Z)((0,n.Z)().mark((function a(){var s,e,i,l,c;return(0,n.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t.to.length+t.cc.length+t.bcc.length,t.showMore=s>b,!t.isZmail){a.next=10;break}return e=[].concat((0,r.Z)(t.to),(0,r.Z)(t.cc),(0,r.Z)(t.bcc)),i=e.map((function(t){return t.emailAddr})),a.next=7,_.p.checkExternalUser(i);case 7:l=a.sent,c=l.emailIdentities,t.externalUsers=c.filter((function(t){return"valid_identity"!==t.identity})).map((function(t){return t.email}));case 10:case"end":return a.stop()}}),a)})))()},methods:{handleMore:function(){this.showMore=!this.showMore},init:function(){var t=this.to.length,a=this.cc.length;t<=b?(this.toList=this.to.slice(0,t),this.ccList=this.cc.slice(0,b-t),this.bccList=b-t>=a?this.bcc.slice(0,b-t-a):[]):(this.toList=this.to.slice(0,b),this.ccList=[],this.bccList=[])},isExternalAddress:function(t){return this.externalUsers.includes(t)}}},C=A,y=(0,f.Z)(C,e,i,!1,null,"3ef3be3c",null),L=y.exports}}]);